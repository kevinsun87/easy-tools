"use strict";(globalThis.webpackChunkbrowser_extension=globalThis.webpackChunkbrowser_extension||[]).push([[869],{26964:(e,t,s)=>{s.d(t,{OR:()=>a});var n=s(6839),o=s(24671),r=s(72431);const a=[o.ql,n.aN];r.eA.WebSpeech,o.u8,r.eA.TencentRealtime,n.Er,r.eA.WebSpeech,o.HO,r.eA.TencentRealtime,n.AH},46613:(e,t,s)=>{s.d(t,{O:()=>o});const n={"中文(简体)":"zh",英语:"en",俄语:"ru",西班牙语:"es",法语:"fr",阿拉伯语:"ar",土耳其语:"tr",葡萄牙语:"pt",泰语:"th",印尼语:"id",意大利语:"it",越南语:"vi"};function o(e,t="",s=""){const o=n[s]||"auto",r=n[t]||"zh";return`https://translate.alibaba.com/#hcfy_text=${encodeURIComponent(e)}&hcfy_from=${o}&hcfy_to=${r}`}},1707:(e,t,s)=>{s.d(t,{O:()=>o});s(48983);const n={"":"自动识别","中文(简体)":"中文"};function o(e,t="中文",s=""){return`https://fanyi.qq.com/#hcfy_text=${encodeURIComponent(e)}&hcfy_from=${n[s]||s}&hcfy_to=${n[t]||t}`}},10469:(e,t,s)=>{s.d(t,{Z:()=>o});const n=JSON.parse('{"中文(简体)":"zh-CHS","英语":"en","日语":"ja","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","芬兰语":"fi","丹麦语":"da","越南语":"vi","印地语":"hi","印尼语":"id","马来语":"ms"}');function o(e,t="",s=""){const o=n[s],r=n[t];return o&&r?`https://fanyi.youdao.com/#hcfy_text=${encodeURIComponent(e)}&hcfy_from=${o}&hcfy_to=${r}`:`http://fanyi.youdao.com/#hcfy_text=${encodeURIComponent(e)}`}},43566:(e,t,s)=>{s.d(t,{A:()=>B});s(69375);var n=s(14041),o=s(19687),r=s(23590),a=s(10435),i=s(78220),l=s(16342),c=s(3444),u=s(63446),d=s(22067),p=s(54449),m=s(98087),h=s.n(m),f=s(79071),x=s.n(f),g=s(74874),y=s.n(g),C=s(25148),j=s(16224),b=s(62269),k=s(4225),v=s(91307),I=s(81152),S=s(20760),A=s(83813),N=s(5877),R=s(3040),w=s(96072),T=s(74703),E=s(98009),P=s(74070),L=s(66690),$=s(81215),_=s(67116),z=s(31085);const U=y()(j.g2,"secondDestinationLatestSource","selectedAPIs","collapsedAPIs","selectedExternalLinks","source","destination","autoPlay","autoCopy","recentUseLangFrom","recentUseLangTo","sourceTransformNCaml","sourceTransformNoBr","sourceTransformNoComment","sourceLower","sourceTransformRegExps","tipPanelSettingsClosed","historyEnabled","favoritesEnabled","quickLinks","tipQuickLinksClosed","panelCustomStyle","customAPINames","panelSize","panelButtons","textAreaAuto"),O=y()(j.Ne,["user","noticesUnreadNum"]),q={small:14,middle:18,large:22},B=(0,n.forwardRef)((function(e,t){const{toaster:s,headerLeft:m,headerRight:f,extendOptions:g,showTextArea:j=!1,size:B="small",style:H,hasDragTip:M,portalContainer:W,showOptionsTip:F=!0,onTranslate:D,elementRef:K}=e,[Q,Z,J]=(0,C.A)(U),[G]=(0,C.A)(O),V=G?.user||null,X=(0,n.useMemo)((()=>{const e=Q?.selectedAPIs,t=Q?.customAPINames;if(e&&t)return[...e,...t]}),[Q?.customAPINames,Q?.selectedAPIs]),Y=(0,n.useMemo)((()=>{const e=Q?.collapsedAPIs;return e&&e.length?(0,A.jM)(X,(t=>{t&&e.forEach((e=>{const s=t.indexOf(e);s>=0&&t.splice(s,1)}))})):X}),[X,Q?.collapsedAPIs]),ee=Q?.quickLinks.filter((e=>e.panel))||[],te=Q||U,se=q[B],ne="small"===B,oe="large"===B,re=Q?.source||"",ae=(0,n.useCallback)((e=>{Z({source:e})}),[Z]),[ie,le]=(0,n.useState)(""),[ce,ue]=(0,n.useState)(""),de=ie===ce,pe=(0,n.useRef)(null),[me,he]=(0,n.useState)(!1),{results:fe,queryResult:xe,dispatchResults:ge}=(0,I.L)(ce,Y,re,Q?.destination,D),[ye,Ce]=(0,n.useState)([]),[,je]=(0,k.A)(),{isInFavorites:be,saveOrDelete:ke}=(0,S.A)(ce,ge,Y),ve=(0,T.O)(s),{sourceTransformNCaml:Ie,sourceTransformNoBr:Se,sourceTransformNoComment:Ae,sourceLower:Ne,sourceTransformRegExps:Re}=y()(Q||U,["sourceTransformNCaml","sourceTransformNoBr","sourceTransformNoComment","sourceLower","sourceTransformRegExps"]),we=(0,n.useRef)(""),Te=(0,n.useCallback)((e=>{if(e===we.current)return;we.current=e,Ce((e=>(0,A.jM)(e,(e=>{e.splice(0)}))));const t=(0,$.W)(e,{sourceTransformNCaml:Ie,sourceTransformNoBr:Se,sourceTransformNoComment:Ae,sourceLower:Ne,sourceTransformRegExps:Re});le(t),ue(t)}),[Ie,Se,Ae,Ne,Re]),Ee=(0,n.useRef)(Te);Ee.current=Te;const Pe=(0,N.A)(ce);(0,n.useEffect)((()=>{te.historyEnabled&&Pe!==ce&&ce&&je({type:"save translate record",text:ce})}),[je,ce,te.historyEnabled]),(0,n.useEffect)((()=>{te.secondDestinationLatestSource&&Pe!==ce&&ce&&(0,L.o)(ce).then((e=>{null!=e&&"中文(简体)"!==e&&chrome.storage.local.set({latestSource:e})}))}),[ce,te.secondDestinationLatestSource]),(0,n.useImperativeHandle)(t,(()=>({select(){pe.current?.select()},async play(){if(!X)return;const e=X[0],t=fe.results[e]?.result;return e&&t?.text===we.current?(0,p.Z)({apiId:e,source:t.from,text:t.text,ttsURI:t.phonetic?.[0].ttsURI||t.ttsURI}):void 0},async setText(e){if(await J,"text"===e.type)le(e.text);else if("image"===e.type)return ve(e.dataURI).then((e=>{le(e)}))},async translate(e,t){if(await J,"text"===e.type)Ee.current(e.text),t&&this.select();else if("image"===e.type)return ve(e.dataURI).then((e=>{Ee.current(e),t&&this.select()}))}})),[ve,J,fe.results,X]);const Le=(0,n.useMemo)((()=>ne?{width:6,height:6,borderRadius:3,right:3,top:1}:oe?{width:10,height:10,borderRadius:5,right:8,top:6}:{width:8,height:8,borderRadius:4,right:5,top:3}),[oe,ne]),$e=(0,z.jsx)(o.$,{icon:(0,z.jsx)(r.I,{icon:"cog",size:se}),small:ne,large:oe,minimal:!0,active:me,className:"settings",onClick:()=>{he((e=>!e))},title:"快捷设置"});return(0,z.jsxs)(z.Fragment,{children:[Q?.panelCustomStyle&&(0,z.jsx)("style",{children:Q.panelCustomStyle.replace(/bp3/g,"bp4").replace(/bp4/g,"bp5")}),(0,z.jsxs)("div",{id:"translate-panel",className:"size-"+B,style:H,ref:K,children:[(0,z.jsxs)("div",{className:"fixed",children:[(0,z.jsxs)("div",{className:"header",children:[(0,z.jsxs)("div",{className:"left",children:[m,Q?.panelButtons.includes("media")&&(0,z.jsx)(E.m,{isSmall:ne,isLarge:oe,iconSize:se,onSelect:e=>{ve(e).then(Te,x())},portalContainer:W}),Q?.panelButtons.includes("microphone")&&(0,z.jsx)(P.h,{isSmall:ne,isLarge:oe,iconSize:se,onSelect:Te,portalContainer:W}),Q?.panelButtons.includes("folder-open")&&(0,z.jsx)(o.$,{small:ne,large:oe,minimal:!0,icon:(0,z.jsx)(r.I,{icon:"folder-open",size:se}),onClick:()=>{(0,_._)({action:"open options page",suffix:"#/stars"})},title:"打开收藏夹"}),Q?.panelButtons.includes("history")&&(0,z.jsx)(o.$,{small:ne,large:oe,minimal:!0,icon:(0,z.jsx)(r.I,{icon:"history",size:se}),onClick:()=>{(0,_._)({action:"open options page",suffix:"#/history"})},title:"打开历史记录"})]}),(0,z.jsx)("div",{className:"drag-block",title:M?"按住不放可以拖动":void 0}),(0,z.jsxs)("div",{className:"right",children:[!!ye.length&&(0,z.jsx)(o.$,{icon:(0,z.jsx)(r.I,{icon:"undo",size:se}),small:ne,large:oe,minimal:!0,title:"返回上一次翻译",onClick:()=>{const e=h()(ye);e&&(le(e),ue(e)),Ce((e=>(0,A.jM)(e,(e=>{e.pop()}))))}}),!!G?.noticesUnreadNum&&(0,z.jsxs)("div",{style:{fontSize:0,position:"relative"},children:[(0,z.jsx)(o.$,{icon:(0,z.jsx)(r.I,{icon:"notifications",size:se}),small:ne,large:oe,minimal:!0,title:`你有 ${G.noticesUnreadNum} 条未读消息`,onClick:()=>{(0,_._)({action:"open options page",suffix:"?notices"})}}),(0,z.jsx)("div",{style:{position:"absolute",background:"rgb(243,1,1)",...Le}})]}),Q&&(0,z.jsxs)(z.Fragment,{children:[Q.favoritesEnabled&&(0,z.jsx)(o.$,{icon:(0,z.jsx)(r.I,{icon:be?"star":"star-empty",size:se}),disabled:!ce,small:ne,large:oe,minimal:!0,title:be?"从收藏夹中删除":"添加到收藏夹",onClick:ke}),Q.tipPanelSettingsClosed&&$e,!Q.tipPanelSettingsClosed&&(0,z.jsx)(a.A,{enforceFocus:!1,content:(0,z.jsxs)("div",{className:i.KJG,style:{width:"200px",padding:"5px"},children:["添加 / 隐藏翻译源、语种切换、鼠标悬浮取词开关和显示翻译文本开关在这里。",(0,z.jsx)("a",{onClick:()=>{Z({tipPanelSettingsClosed:!0})},children:"不再提示"})]}),canEscapeKeyClose:!1,isOpen:!Q.tipPanelSettingsClosed&&F,portalContainer:W,children:$e})]}),f]})]}),(0,z.jsx)(l.S,{isOpen:me,keepChildrenMounted:!0,children:(0,z.jsx)(v.A,{source:re,setSource:ae,options:Q,setOptions:Z,user:V,size:B,portalContainer:W,children:g})}),j&&(0,z.jsx)(w.j,{isLarge:oe,isSmall:ne,iconSize:se,value:ie,onChange:le,onTranslate:e=>{Te(null==e?ie:e)},ref:pe,hideBtn:de||!ie,auto:Q?.textAreaAuto||!1})]}),(0,z.jsxs)("div",{className:"body",style:de?void 0:{opacity:.7},children:[!ce&&(0,z.jsx)("p",{children:"请输入需要翻译的文本。"}),ce&&Q&&X?.map(((e,t)=>{const s=fe.results[e];return(0,z.jsx)(p.A,{portalContainer:W,apiId:e,result:s,size:B,queryResult:t=>{xe(ce,e,t||re)},autoPlay:Q.autoPlay&&0===t,autoCopy:Q.autoCopy&&0===t,setQuery:e=>{Ce((e=>(0,A.jM)(e,(e=>{e.push(ce)})))),ue(e),le(e)},collapse:Q.collapsedAPIs.includes(e),onCollapseChange:()=>{Z((t=>{const s=t.collapsedAPIs.indexOf(e);s>=0?t.collapsedAPIs.splice(s,1):t.collapsedAPIs.push(e)}))}},e)})),X&&!X.length&&(0,z.jsx)(c.I,{className:"no-api",title:"你隐藏了所有翻译源",description:"请添加一个翻译源来显示翻译结果。",action:(0,z.jsx)(a.A,{portalContainer:W,content:(0,z.jsx)(u.W,{children:(0,z.jsx)(b.A,{})}),children:(0,z.jsx)(o.$,{icon:"add",small:ne,large:oe,text:"添加翻译源"})})}),!!Q?.selectedExternalLinks.length&&(0,z.jsx)("div",{className:"external-translators",children:Q.selectedExternalLinks.map((e=>{const t=R.j.find((t=>t.id===e));return t?(0,z.jsx)("div",{children:(0,z.jsx)(o.A,{small:ne,large:oe,text:t.name,target:"_blank",href:t.generateLink(ce,Q.destination,re)})},e):null}))}),Q&&!Q.tipQuickLinksClosed&&ce&&(0,z.jsxs)(d.P,{style:{marginBottom:8,fontSize:12},children:["下方是预定义的三个快捷链接，你可以前往",(0,z.jsx)("a",{onClick:()=>{(0,_._)({action:"open options page",suffix:"#/panel"})},children:"“设置” - “翻译面板”"})," ","- “快捷链接”中修改或删除它们。",(0,z.jsx)("a",{onClick:()=>{Z({tipQuickLinksClosed:!0})},children:"不再提示"})]}),!!ee.length&&ce&&(0,z.jsx)("div",{className:"quick-links",children:ee.map((e=>(0,z.jsx)("a",{href:e.link.replace("%s",encodeURIComponent(ce)),target:"_blank",rel:"noreferrer",children:e.name},e.name)))})]})]})]})}))},23593:(e,t,s)=>{s.d(t,{c_:()=>r});s(85100),s(27162),s(66403),s(94154),s(64777),s(16465),s(62896);var n=s(30819),o=s(20124);s.n(o)()("hotkeys");const r={ctrl:n.U0?"metaKey":"ctrlKey",alt:"altKey",shift:"shiftKey"};n.U0&&n.gm},17439:(e,t,s)=>{s.d(t,{W:()=>h});var n=s(14041),o=s(22067),r=s(68802),a=s(78107),i=s(19687),l=s(74874),c=s.n(l),u=s(16224),d=s(67116),p=s(31085);const m=c()(u.g2,["autoClipboard","autoClipboardImage"]);function h(e){const{onTranslate:t,onDismiss:s}=e,[l,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{chrome.storage.local.get(m).then((async({autoClipboard:e,autoClipboardImage:s})=>{if(!1===e&&!1===s)return;const n=await(0,d._)({action:"read clipboard"});if(n&&("text"!==n.type||n.text.trim()))if("text"===n.type)switch(e){case null:c(n);break;case!0:t(n);break;case"write-only":t(n,!0)}else if("image"===n.type)switch(s){case null:c(n);break;case!0:t(n);break;case"write-only":t(n,!0)}}))}),[t]),l?(0,p.jsxs)(o.P,{intent:"primary",children:[(0,p.jsxs)(r.H5,{children:["是否要翻译剪切板内的",(0,p.jsx)("i",{children:"text"===l.type?"文本":"图片"}),"？"]}),(0,p.jsx)(a.Sc,{label:"记住我的选择，下次不再询问",className:"ask-clipboard-checkbox",checked:u,onChange:e=>{h(e.target.checked)}}),(0,p.jsx)(i.$,{style:{marginRight:15},text:"翻译",onClick:()=>{t(l),u&&chrome.storage.local.set({["text"===l.type?"autoClipboard":"autoClipboardImage"]:!0}),c(null)}}),(0,p.jsx)(i.$,{text:"不翻译",onClick:()=>{u&&chrome.storage.local.set({["text"===l.type?"autoClipboard":"autoClipboardImage"]:!1}),c(null),s()}})]}):null}},64795:(e,t,s)=>{s.d(t,{W:()=>o});var n=s(14041);function o(e){const[t,s]=(0,n.useState)({v:!1,h:!1});return(0,n.useEffect)((()=>{if(!e)return;const t=()=>{s(function(e){return{h:e.scrollWidth>e.clientWidth,v:e.scrollHeight>e.clientHeight}}(e))};t();const n=new ResizeObserver(t);return n.observe(e),()=>{n.unobserve(e)}}),[e]),t}},84848:(e,t,s)=>{s.d(t,{dU:()=>l,j_:()=>i});var n=s(31085),o=s(95805),r=s(14041),a=s(25873);function i(e,t=document.body){const s=document.createElement("div");t.appendChild(s);const r=(0,a.H)(s);return new Promise(((t,s)=>{r.render((0,n.jsx)(o.V,{...e,usePortal:!1,ref:e=>{e?t(e):s(new Error("[Blueprint] Unable to create toaster."))}}))}))}function l(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{e.then((e=>{t.current=e}))}),[e]),t}},62337:(e,t,s)=>{s(96959)},5090:(e,t,s)=>{s.d(t,{Z5:()=>l,NF:()=>c,$2:()=>a.$,qs:()=>n.qs,_:()=>r._,fm:()=>o.f});var n=s(37767),o=(s(29516),s(64347)),r=s(74976),a=s(73109);s(12980),s(51934),s(99687);class i extends Error{request;response;url;constructor(e,t,s){const n=t instanceof Response;var o;super(n?`Request failed with status code ${t.status}.`:(o=t)instanceof Error?o.message:"Unknown error. See `error.cause` for details."),this.request=s,this.url=e,this.name="FetchError",n?this.response=t:this.cause=t}}function l(e,t){return fetch(e,t).then((s=>{if(!s.ok)throw new i(e,s,t);return s}),(s=>{throw new i(e,s,t)}))}function c(e){return e instanceof i}}}]);