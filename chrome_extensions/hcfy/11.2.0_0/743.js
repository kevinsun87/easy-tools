(globalThis.webpackChunkbrowser_extension=globalThis.webpackChunkbrowser_extension||[]).push([[743],{66690:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});const o={zh:"中文(简体)","zh-TW":"中文(繁体)",en:"英语",da:"丹麦语",nl:"荷兰语",fi:"芬兰语",fr:"法语",de:"德语",he:"希伯来语",it:"意大利语",ja:"日语",ko:"韩语",no:"挪威语",pl:"波兰语",pt:"葡萄牙语","pt-PT":"葡萄牙语","pt-BR":"巴西葡萄牙语",ru:"俄语",es:"西班牙语",sv:"瑞典语",cs:"捷克语",el:"希腊语",is:"冰岛语",lv:"拉脱维亚语",lt:"立陶宛语",ro:"罗马尼亚语",hu:"匈牙利语",et:"爱沙尼亚语",bg:"保加利亚语",hr:"克罗地亚语",sr:"塞尔维亚语",ga:"爱尔兰语",gl:"加利西亚语",fil:"他加禄语",tr:"土耳其语",uk:"乌克兰语",hi:"印地语",mk:"马其顿语",bn:"孟加拉语",id:"印尼语",la:"拉丁语",ms:"马来语",ml:"马拉雅拉姆语",cy:"威尔士语",ne:"尼泊尔语",te:"泰卢固语",sq:"阿尔巴尼亚语",ta:"泰米尔语",be:"白俄罗斯语",jw:"爪哇语",oc:"奥克语",ur:"乌尔都语",bh:void 0,gu:"古吉拉特语",th:"泰语",ar:"阿拉伯语",ca:"加泰罗尼亚语",eo:"世界语",eu:"巴斯克语",ia:"因特语",kn:"卡纳达语",pa:"旁遮普语",gd:"苏格兰盖尔语",sw:"斯瓦希里语",sl:"斯洛文尼亚语",mr:"马拉地语",mt:"马耳他语",vi:"越南语",fy:"弗里西语",sk:"斯洛伐克语",fo:"法罗语",su:"印尼巽他语",uz:"乌兹别克语",am:"阿姆哈拉语",az:"阿塞拜疆语",ka:"格鲁吉亚语",ti:"提格利尼亚语",fa:"波斯语",bs:"波斯尼亚语",si:"僧伽罗语",nn:"新挪威语",xh:"科萨语",zu:"祖鲁语",gn:"瓜拉尼语",st:"塞索托语",tk:"土库曼语",ky:"吉尔吉斯语",br:"布列塔尼语",tw:"契维语",yi:"意第绪语",sh:"塞尔维亚-克罗地亚语",so:"索马里语",ug:"维吾尔语",ku:"库尔德语",mn:"蒙古语",hy:"亚美尼亚语",lo:"老挝语",sd:"信德语",rm:"罗曼什语",af:"南非荷兰语",lb:"卢森堡语",my:"缅甸语",km:"高棉语",bo:void 0,dv:"迪维西语",chr:"切罗基语",syr:"叙利亚语","sit-NP":void 0,or:"奥里亚语",as:"阿萨姆语",co:"科西嘉语",ie:"西方国际语",kk:"哈萨克语",ln:"林加拉语",mo:void 0,ps:"普什图语",qu:"克丘亚语",sn:"修纳语",tg:"塔吉克语",tt:"鞑靼语",to:"汤加语",yo:"约鲁巴语",cpe:void 0,cpf:void 0,cpp:void 0,crp:void 0,mi:"毛利语",wo:"沃洛夫语",ab:"阿布哈兹语",aa:void 0,ay:"艾马拉语",ba:"巴什基尔语",bi:"比斯拉马语",dz:void 0,fj:"斐济语",kl:"格陵兰语",ha:"豪萨语",ht:"海地克里奥尔语",ik:void 0,iu:"伊努克提图特语",ks:"克什米尔语",rw:"卢旺达语",mg:"马尔加什语",na:void 0,om:"奥罗莫语",rn:"基隆迪语",sm:"萨摩亚语",sg:"桑戈语",sa:"梵语",ss:void 0,ts:"聪加语",tn:void 0,vo:"沃拉普克语",za:void 0,kha:"卡西语",sco:"苏格兰语",lg:"卢干达语",gv:"马恩语","sr-ME":void 0};async function r(e){const t=await chrome.i18n.detectLanguage(e),n=t.languages[0]?.language;if(n)return o[n]}},34047:(e,t,n)=>{"use strict";n.d(t,{c:()=>p,f:()=>d});n(69375);var o=n(10133),r=n(22053),s=n.n(r),a=n(19891),i=n.n(a),c=n(7276),l=n(66690),u=n(29842);function d(e){return e.split("\n").map((e=>e.trim())).filter(s()).join("\n")}class p extends o.c{constructor(e,t){super(e,t?.retry),this.service=e,this.standardMap=t?.standardMap,this.customMap=this.standardMap&&i()(this.standardMap)}convertToStandard(e){return this.customMap?this.customMap[e]:e}convertToCustom(e){return this.standardMap?this.standardMap[e]:e}isSameLang(e,t){return!1}isSuccessResponse(e){return!0}throwErrorResponse(e){throw new u.Fw(`${this.service.name}抛出了一个错误，但未被处理。`,{context:e})}async callByPoints(e){const{text:t,destination:n,source:o,domain:r}=e,s=(await(0,c.cN)("/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api:this.service.id,text:t,destination:n,source:o,domain:r})})).serverResponse;return this.isSuccessResponse(s)||this.throwErrorResponse(s),s}async convertLanguages(e,t){const{text:n,destinations:o,source:r}=e;let s;if(r&&(s=this.convertToCustom(r),!s))throw new u.Fw(`${this.service.name}不支持翻译语种为${r}的文本。`,{type:u.VC.UNSUPPORTED_LANGUAGE,context:t});t.source=s;const a=[];if(o.some((e=>{const t=this.convertToCustom(e);if(t)return 2===a.push(t)})),!a.length)throw new u.Fw(this.service.name+"不支持将文本翻译为这些语种："+o.join("，")+"。",{type:u.VC.UNSUPPORTED_LANGUAGE,context:t});t.destinations=a;let i=0,c=s;c||(c=await(0,l.o)(n),c&&(c=this.convertToCustom(c))),c===a[0]&&a.length>1&&(i=1),t.destIndex=i}async getDomainInner(e){if(!this.service.getDomain)return;const t=await this.service.getDomain();if(!t)throw new u.Fw("请先前往【划词翻译设置】-【第三方服务】选择专业领域。",{type:u.VC.NEED_DOMAIN,context:e});e.domain=t}async translateInner(e,t){const n=e.destIndex,o=await this.call({text:e.normalizedText,destination:e.destinations[n],source:e.source,domain:e.domain});if(!t&&e.destinations.length>1&&this.isSameLang(o,e)){let t;return t=0===n?1:0,e.destIndex=t,this.translateInner(e,!0)}return o}async translate(e){const t=d(e.text),n={text:e.text,normalizedText:t,hcfySource:e.source,hcfyDestinations:e.destinations,destinations:[],destIndex:0};let o;try{await Promise.all([this.convertLanguages(e,n),this.getDomainInner(n)]),o=await this.translateInner(n,!1)}catch(e){const t=this.transform(n);return t.error=(0,u.xh)(e).toJSON(),t}return this.transform(n,o)}getTTS(e,t){throw new u.Fw(this.service.name+"不支持语音朗读。")}}},86045:(e,t,n)=>{"use strict";n.d(t,{zy:()=>x,I8:()=>w,Dx:()=>y,Qy:()=>f});const o=JSON.parse('{"中文(简体)":"zh","英语":"en","日语":"ja","泰语":"th","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","荷兰语":"nl","波兰语":"pl","芬兰语":"fi","捷克语":"cs","保加利亚语":"bg","丹麦语":"da","爱沙尼亚语":"et","匈牙利语":"hu","罗马尼亚语":"ro","斯洛文尼亚语":"sl","瑞典语":"sv","越南语":"vi","中文(粤语)":"yue","中文(繁体)":"zh-tw","南非荷兰语":"af","阿尔巴尼亚语":"sq","阿姆哈拉语":"am","亚美尼亚语":"hy","阿萨姆语":"as","阿斯图里亚斯语":"ast","阿塞拜疆语":"az","巴斯克语":"eu","白俄罗斯语":"be","孟加拉语":"bn","波斯尼亚语":"bs","缅甸语":"my","加泰罗尼亚语":"ca","宿务语":"ceb","克罗地亚语":"hbs","世界语":"eo","法罗语":"fo","菲律宾语":"fil","加利西亚语":"gl","格鲁吉亚语":"ka","古吉拉特语":"gu","豪萨语":"ha","希伯来语":"he","印地语":"hi","冰岛语":"is","伊博语":"ig","印尼语":"id","爱尔兰语":"ga","卡纳达语":"kn","哈萨克语":"kk","克林贡语":"tlh","库尔德语":"ku","老挝语":"lo","拉丁语":"la","拉脱维亚语":"lv","立陶宛语":"lt","卢森堡语":"lb","马其顿语":"mk","马尔加什语":"mg","马来语":"ms","马拉雅拉姆语":"ml","马耳他语":"mt","马拉地语":"mr","尼泊尔语":"ne","波斯语":"fa","僧伽罗语":"si","索马里语":"so","斯瓦希里语":"sw","他加禄语":"tl","塔吉克语":"tg","泰米尔语":"ta","鞑靼语":"tt","泰卢固语":"te","土耳其语":"tr","土库曼语":"tk","乌尔都语":"ur","乌兹别克语":"uz","奥克语":"oc","吉尔吉斯语":"ky","普什图语":"ps","高棉语":"km","海地克里奥尔语":"ht","旁遮普语":"pa","比斯拉马语":"bi","胡帕语":"hup","印古什语":"inh","拉特加莱语":"ltg","毛里求斯克里奥尔语":"mfe","黑山语":"cnr","卢森尼亚语":"rue","西里西亚语":"szl","亚齐语":"ace","阿肯语":"ak","阿拉贡语":"an","艾马拉语":"ay","俾路支语":"bal","巴什基尔语":"ba","本巴语":"bem","柏柏尔语":"ber","博杰普尔语":"bho","比林语":"byn","布列塔尼语":"br","切罗基语":"chr","齐切瓦语":"ny","楚瓦什语":"cv","科西嘉语":"co","克里克语":"mus","克里米亚鞑靼语":"crh","弗留利语":"fur","卢干达语":"lg","瓜拉尼语":"gn","夏威夷语":"haw","希利盖农语":"hil","伊多语":"io","因特语":"ia","伊努克提图特语":"iu","爪哇语":"jv","卡拜尔语":"kab","格陵兰语":"kl","卡努里语":"kr","克什米尔语":"ks","卡舒比语":"csb","卢旺达语":"rw","刚果语":"kg","林堡语":"li","林加拉语":"ln","逻辑语":"jbo","低地德语":"nds","迈蒂利语":"mai","毛利语":"mi","马绍尔语":"mh","挪威语":"no","奥杰布瓦语":"oj","奥里亚语":"or","奥罗莫语":"om","奥塞梯语":"os","帕皮阿门托语":"pap","克丘亚语":"qu","罗曼什语":"rm","罗姆语":"rom","萨摩亚语":"sm","梵语":"sa","苏格兰语":"sco","掸语":"shn","修纳语":"sn","信德语":"sd","叙利亚语":"syr","德顿语":"tet","提格利尼亚语":"ti","聪加语":"ts","契维语":"tw","文达语":"ve","瓦隆语":"wa","威尔士语":"cy","沃洛夫语":"wo","科萨语":"xh","意第绪语":"yi","约鲁巴语":"yo","扎扎其语":"zza","祖鲁语":"zu","弗里西语":"fy","蒙古语":"mn","苗语":"hmn","印尼巽他语":"su","斐济语":"fj","汤加语":"to","塔希提语":"ty","阿布哈兹语":"ab","阿兹特克语":"nch","埃维语":"ee","巴布亚皮钦语":"tpi","班巴拉语":"bm","邦阿西楠语":"pag","北萨米语":"se","查莫罗语":"ch","查瓦卡诺语":"cbk","迪维西语":"dv","侗语":"kdx","杜順語":"dtp","富尔语":"fvr","格雷罗纳瓦特尔语":"ngu","格罗宁根方言":"gos","基里巴斯语":"gil","基隆迪语":"rn","基切语":"quc","卡西语":"kha","康沃尔语":"kw","马恩语":"gv","马里语（俄罗斯）":"chm","玛雅语":"kek","姆班杜语":"umb","纳瓦霍语":"nv","纽埃语":"niu","帕姆语":"pmn","桑戈语":"sg","上索布语":"hsb","汤加语(赞比亚)":"toi","图瓦卢语":"tvl","图瓦语":"tyv","瓦瑞语(菲律宾)":"war","沃拉普克语":"vo","乌德穆尔特语":"udm","西方国际语":"ie","现代希腊语":"el","新共同语言":"lfn","伊班语":"iba","伊洛卡诺语":"ilo"}');var r=n(5090),s=n(32293),a=n(75069),i=n(88705);const{MD5:c,HmacSHA1:l,enc:u}=i;async function d(e,t,n){s(t,{FormatType:"text",SourceLanguage:"auto",Scene:"general"});const o="/api/translate/web/"+("general"===t.Scene?"general":"ecommerce"),i=JSON.stringify(t),d=function(e,t,n,o){const r=c(e).toString(u.Base64),s="application/json",i="application/json;charset=UTF-8",d=(new Date).toUTCString(),p=r,h=(0,a.Ak)(),m=l(n+"\n"+s+"\n"+p+"\n"+i+"\n"+d+"\nx-acs-signature-method:HMAC-SHA1\nx-acs-signature-nonce:"+h+"\nx-acs-version:2019-01-02\n"+o,t.key).toString(u.Base64);return{Accept:s,Authorization:"acs "+t.id+":"+m,"Content-Type":i,"Content-MD5":p,Date:d,"x-acs-signature-nonce":h,"x-acs-signature-method":"HMAC-SHA1","x-acs-version":"2019-01-02"}}(i,e,"POST",o),p=n?.region?`https://mt.${n.region}.aliyuncs.com`:"https://mt.aliyuncs.com";n?.requestBefore&&await n.requestBefore(d.Date),!1===n?.includeDate&&delete d.Date;return(await(0,r.Z5)(p+o,{method:"POST",headers:d,body:i}).finally((()=>{n?.requestAfter?.()}))).json()}var p=n(34047),h=n(72431),m=n(29842),g=n(20843);const y=!0,w={id:h.VI.ALi,name:"阿里翻译",points:!0,package:!0,secretKeys:{get:()=>chrome.storage.local.get({aLiApiKey:[]}).then((({aLiApiKey:e})=>Array.isArray(e)?e:[e])),set:e=>chrome.storage.local.set({aLiApiKey:e}),isComplete:e=>(0,g.hP)(e,["id"])},pointsEnable:{get:()=>chrome.storage.local.get({aliPoints:y}).then((({aliPoints:e})=>e)),set:e=>chrome.storage.local.set({aliPoints:e})}},f=!0,x={id:h.VI.ALiPro,name:"阿里翻译（专业版）",package:!0,points:!0,getDomain:()=>chrome.storage.local.get("aliDomain").then((({aliDomain:e})=>e)),secretKeys:w.secretKeys,pointsEnable:{get:()=>chrome.storage.local.get({aliProPoints:f}).then((({aliProPoints:e})=>e)),set:e=>chrome.storage.local.set({aliProPoints:e})}};class v extends p.c{constructor(e){super(e,{standardMap:o,retry:!0})}isSuccessResponse(e){return function(e){return"200"===e.Code}(e)}throwErrorResponse(e){throw new m.Fw(`${this.service.name}报错了，错误码：${e.Code}，错误消息："${e.Message}"`,{type:m.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:this.service.getDomain?"https://hcfy.ai/docs/services/ali-pro-api#troubleshooting":"https://hcfy.ai/docs/services/ali-api#troubleshooting"}})}isSameLang(e,t){return n=e,o=t.text,n.Data.Translated===o;var n,o}async callByPackage(e){const t=await(0,r.Z5)("https://hs-api.limingkai.cn/v2/services/ali",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({SourceText:e.text,TargetLanguage:e.destination,SourceLanguage:e.source||void 0,Scene:e.domain||void 0})}),n=await t.json();return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}async callBySecretKey(e,t){const n=await d(e,{SourceText:t.text,TargetLanguage:t.destination,SourceLanguage:t.source||void 0,Scene:t.domain||void 0},{includeDate:!1,requestBefore:e=>chrome.declarativeNetRequest.updateSessionRules({addRules:[{id:9986,priority:1,action:{type:chrome.declarativeNetRequest.RuleActionType.MODIFY_HEADERS,requestHeaders:[{header:"Date",operation:chrome.declarativeNetRequest.HeaderOperation.SET,value:e}]},condition:{urlFilter:"https://mt.aliyuncs.com/api/translate/web/*"}}]}),requestAfter:()=>{chrome.declarativeNetRequest.updateSessionRules({removeRuleIds:[9986]})}});return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],r={text:n,link:`https://translate.alibaba.com/#hcfy_text=${encodeURIComponent(n)}&hcfy_from=auto&hcfy_to=${o}`,from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};if(t)try{r.result=t.Data.Translated.split("\n")}catch(e){}return r}}new v(w),new v(x)},34200:(e,t,n)=>{"use strict";n.d(t,{J:()=>l});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(5090);var c=n(29842);const l={id:r.VI.BaiChuan,name:"百川智能（百小应）",free:!1,points:!1,secretKeys:{get:()=>chrome.storage.local.get({baiChuanKey:[]}).then((({baiChuanKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({baiChuanKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class u extends o.c{constructor(){super(l)}async translateInner(e,t){const n=await chrome.storage.local.get({baiChuanPrompt:s.g2.baiChuanPrompt});if(n.baiChuanPrompt&&!n.baiChuanPrompt.includes("{{text}}"))throw new c.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:c.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({baiChuanPrompt:s.g2.baiChuanPrompt,baiChuanEndpoint:s.g2.baiChuanEndpoint,baiChuanModel:s.g2.baiChuanModel}),o=(n.baiChuanPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n="https://api.baichuan-ai.com/v1/chat/completions"){const o=await(0,i.Z5)(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});return await o.json()}(e.key,{model:n.baiChuanModel,messages:[{role:"user",content:o.replaceAll("\n","\n\n")}]},n.baiChuanEndpoint||void 0)}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://www.baichuan-ai.com/",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.choices[0].message.content.trim()).split("\n")),s}}new u},38251:(e,t,n)=>{"use strict";n.d(t,{Me:()=>w,RO:()=>g,p4:()=>m,cG:()=>y});var o=n(30457),r=n(34047),s=n(72431),a=n(5090),i=n(32293),c=n(88705);const{MD5:l,enc:u}=c;function d(e,t,n){const o=Date.now(),r={appid:t.id,salt:o,sign:l(t.id+e+o+(n||"")+t.key).toString(u.Hex)};return n&&(r.domain=n),r}var p=n(29842),h=n(20843);const m=!0,g={id:s.VI.BaiDu,name:"百度翻译",package:!0,points:!0,secretKeys:{get:()=>chrome.storage.local.get({baiDuAppKey:[]}).then((({baiDuAppKey:e})=>Array.isArray(e)?e:[e])),set:e=>chrome.storage.local.set({baiDuAppKey:e}),isComplete:e=>(0,h.hP)(e,["id"])},pointsEnable:{get:()=>chrome.storage.local.get({bdPoints:m}).then((({bdPoints:e})=>e)),set:e=>chrome.storage.local.set({bdPoints:e})}},y=!0,w={id:s.VI.BaiDuPro,name:"百度翻译（专业版）",package:!0,points:!0,getDomain:()=>chrome.storage.local.get("baiduDomain").then((({baiduDomain:e})=>e)),secretKeys:g.secretKeys,pointsEnable:{get:()=>chrome.storage.local.get({bdProPoints:y}).then((({bdProPoints:e})=>e)),set:e=>chrome.storage.local.set({bdProPoints:e})}};class f extends r.c{constructor(e){super(e,{standardMap:o,retry:!0})}isSuccessResponse(e){return function(e){return!("error_code"in e)}(e)}throwErrorResponse(e){throw new p.Fw(`${this.service.name}报错了，错误码：${e.error_code}。`,{type:p.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:this.service.getDomain?"https://hcfy.ai/docs/services/baidu-pro-api#troubleshooting":"https://hcfy.ai/docs/services/baidu-api#troubleshooting"}})}isSameLang(e){return(t=e).from===t.to;var t}async callByPackage(e){const t=await(0,a.Z5)("https://hs-api.limingkai.cn/v2/services/baidu-fanyi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({q:e.text,to:e.destination,from:e.source||void 0,domain:e.domain||void 0})}),n=await t.json();return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}async callBySecretKey(e,t){const n=async o=>{const r=await async function(e,t){return i(t,{from:"auto"}),(await(0,a.Z5)(t.domain?"https://fanyi-api.baidu.com/api/trans/vip/fieldtranslate":"https://fanyi-api.baidu.com/api/trans/vip/translate",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,a.qs)({...d(t.q,e,t.domain),...t})})).json()}(e,{q:t.text,to:t.destination,from:t.source||void 0,domain:t.domain||void 0});if(!this.isSuccessResponse(r)){if(!o&&"54003"===r.error_code)return new Promise(((e,t)=>{setTimeout((()=>{n(!0).then(e,t)}),800)}));this.throwErrorResponse(r)}return r};return n()}transform(e,t){const n=e.text,o=t?.from,r=t?.to,s={text:n,link:`https://fanyi.baidu.com/#${o||"auto"}/${r||"zh"}/${encodeURIComponent(n)}`,from:o&&this.convertToStandard(o),to:r&&this.convertToStandard(r)};if(t)try{s.result=t.trans_result.map((e=>e.dst))}catch(e){}return s}}new f(g),new f(w)},32019:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});var o=n(34047),r=n(5090),s=n(45760),a=n(67116);const i={id:n(72431).VI.BingDict,name:"必应词典",free:!0};class c extends o.c{constructor(){super(i,{standardMap:{"中文(简体)":"中文(简体)",英语:"英语"},retry:!0})}async callByFree(e){return async function(e){const[t]=await Promise.all([(0,r.Z5)("https://www.bing.com/dict/search?q="+encodeURIComponent(e)+"&cc=cn").then((e=>e.text())),(0,s.g)()]);return(0,a._)({action:"dom: bing dict",html:t})}(e.text)}transform(e,t){const{text:n}=e,o={text:n,link:"https://www.bing.com/dict/search?q="+encodeURIComponent(n)+"&cc=cn"};return t?(t.text=o.text,t.link=o.link,t):o}}new c},19235:(e,t,n)=>{"use strict";n.d(t,{$H:()=>l,n8:()=>c});var o=n(34047),r=n(5090),s=n(46343);var a=n(72431),i=n(20843);const c=!0,l={id:a.VI.CaiYun,name:"彩云小译",package:!0,points:!0,secretKeys:{get:()=>chrome.storage.local.get({cyApiToken:[]}).then((({cyApiToken:e})=>e?(Array.isArray(e)?e:[e]).map((e=>({key:e}))):[])),set:e=>chrome.storage.local.set({cyApiToken:e.map((e=>e.key))}),isComplete:e=>(0,i.hP)(e)},pointsEnable:{get:()=>chrome.storage.local.get({cyPoints:c}).then((({cyPoints:e})=>e)),set:e=>chrome.storage.local.set({cyPoints:e})}};class u extends o.c{constructor(){super(l,{standardMap:{"中文(简体)":"zh",英语:"en",日语:"ja"},retry:!0})}isSameLang(e,t){return n=e,o=[t.text],s(n.target,o);var n,o}async callByPackage(e){return(await(0,r.Z5)("https://hs-api.limingkai.cn/v2/services/caiyun",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:e.text.split("\n"),trans_type:`${e.source||"auto"}2${e.destination}`,detect:!0})})).json()}async callBySecretKey(e,t){return async function(e,t){return(await(0,r.Z5)("https://api.interpreter.caiyunai.com/v1/translator",{method:"POST",headers:{"Content-Type":"application/json","X-Authorization":`token ${e}`},body:JSON.stringify(t)})).json()}(e.key,{source:t.text.split("\n"),trans_type:`${t.source||"auto"}2${t.destination}`,detect:!0})}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],r={text:n,link:"https://fanyi.caiyunapp.com/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(r.result=t.target),r}}new u},92676:(e,t,n)=>{"use strict";n.d(t,{d:()=>d});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(5090);var c=n(27429);c.b;async function l(e,t,n){return async function(e,t,n){const o=await(0,i.Z5)(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(t.stream){if(!o.body)throw new Error("Response body is empty.");return o.body}return o.json()}(e,t,n||"https://api.openai.com/v1/chat/completions")}var u=n(29842);const d={id:r.VI.ChatGPT,name:"ChatGPT",free:!1,package:!0,secretKeys:{get:()=>chrome.storage.local.get({chatGPTKey:[]}).then((({chatGPTKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({chatGPTKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class p extends o.c{constructor(){super(d)}async translateInner(e,t){const n=await chrome.storage.local.get({chatGPTPrompt:s.g2.chatGPTPrompt});if(n.chatGPTPrompt&&!n.chatGPTPrompt.includes("{{text}}"))throw new u.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:u.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({chatGPTPrompt:s.g2.chatGPTPrompt,chatGPTEndpoint:s.g2.chatGPTEndpoint,chatGPTModel:s.g2.chatGPTModel}),o=(n.chatGPTPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return l(e.key,{model:n.chatGPTModel,messages:[{role:"user",content:o}]},n.chatGPTEndpoint)}async callByPackage(e){const t=await chrome.storage.local.get({chatGPTPrompt:s.g2.chatGPTPrompt,chatGPTModel:s.g2.chatGPTModel}),n=(t.chatGPTPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",e.text).replace("{{target}}",e.destination),o=await(0,i.Z5)("https://hs-api.limingkai.cn/call/translate/openai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t.chatGPTModel,messages:[{role:"user",content:n}]})}),r=await o.json();if("isError"in r)throw new Error(r.message);return r}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://chat.openai.com/",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.choices[0].message.content.trim()).split("\n")),s}}new p},37523:(e,t,n)=>{"use strict";n.d(t,{S:()=>u});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(32293),c=n(5090);var l=n(29842);const u={id:r.VI.Claude,name:"Claude",free:!1,package:!0,secretKeys:{get:()=>chrome.storage.local.get({claudeKey:[]}).then((({claudeKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({claudeKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class d extends o.c{constructor(){super(u)}async translateInner(e,t){const n=await chrome.storage.local.get({claudePrompt:s.g2.claudePrompt});if(n.claudePrompt&&!n.claudePrompt.includes("{{text}}"))throw new l.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:l.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({claudePrompt:s.g2.claudePrompt,claudeEndpoint:s.g2.claudeEndpoint,claudeModel:s.g2.claudeModel}),o=(n.claudePrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n){i(t,{max_tokens:4096});const o=await(0,c.Z5)(n||"https://api.anthropic.com/v1/messages",{method:"POST",headers:{"content-type":"application/json","x-api-key":e,"anthropic-version":"2023-06-01"},body:JSON.stringify(t)});if(t.system){if(!o.body)throw new Error("Response body is empty");return o.body}return o.json()}(e.key,{model:n.claudeModel,messages:[{role:"user",content:o}]},n.claudeEndpoint)}async callByPackage(e){const t=await chrome.storage.local.get({claudePrompt:s.g2.claudePrompt,claudeModel:s.g2.claudeModel}),n=(t.claudePrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",e.text).replace("{{target}}",e.destination),o=await(0,c.Z5)("https://hs-api.limingkai.cn/call/translate/openai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t.claudeModel,messages:[{role:"user",content:n}]})}),r=await o.json();if("isError"in r)throw new Error(r.message);return{id:r.id,type:"message",role:"assistant",content:[{text:r.choices[0].message.content,type:"text"}],model:r.model,stop_reason:r.choices[0].finish_reason,stop_sequence:null,usage:{input_tokens:r.usage.prompt_tokens,output_tokens:r.usage.completion_tokens}}}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://claude.ai/",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.content[0].text.trim()).split("\n")),s}}new d},91357:(e,t,n)=>{"use strict";n.d(t,{d:()=>c});var o=n(34047),r=n(72431),s=n(67116),a=n(45760);const i={"中文(简体)":"zh",英语:"en",德语:"de",法语:"fr",西班牙语:"es",葡萄牙语:"pt",意大利语:"it",荷兰语:"nl",波兰语:"pl",俄语:"ru",日语:"ja",爱沙尼亚语:"et",保加利亚语:"bg",丹麦语:"da",芬兰语:"fi",捷克语:"cs",拉脱维亚语:"lv",立陶宛语:"lt",罗马尼亚语:"ro",瑞典语:"sv",斯洛伐克语:"sk",斯洛文尼亚语:"sl",希腊语:"el",匈牙利语:"hu",乌克兰语:"uk",印尼语:"id",书面挪威语:"nb",韩语:"ko",土耳其语:"tr"},c={id:r.VI.DeepL,name:"DeepL（内置）",free:!0,points:!1};class l extends o.c{constructor(){super(c,{standardMap:i})}isSameLang(e,t){return e.from?e.from===t.destinations[t.destIndex]:t.text===e.result}async callByFree(e){return await(0,a.g)(),(0,s._)({action:"dom: deepl",params:e})}transform(e,t){const n={text:e.text,from:t?.from&&this.convertToStandard(t.from.toLowerCase()),link:`https://www.deepl.com/translator#${t?.from?.toLowerCase()||e.source||"auto"}/${e.destinations[e.destIndex]}/${encodeURIComponent(e.text.replaceAll("/","\\/"))}`};if(t){const e=t.result.split("\n");t.otherResults.length?n.dict=[{terms:e},...t.otherResults.map((e=>({terms:[e]})))]:n.result=e}return n}}new l},7634:(e,t,n)=>{"use strict";n.d(t,{Q9:()=>l,rc:()=>c});var o=n(34047),r=n(72431),s=n(20843),a=n(5090);const i={"中文(简体)":"zh",英语:"en",德语:"de",法语:"fr",西班牙语:"es",葡萄牙语:"pt",意大利语:"it",荷兰语:"nl",波兰语:"pl",俄语:"ru",日语:"ja",爱沙尼亚语:"et",保加利亚语:"bg",丹麦语:"da",芬兰语:"fi",捷克语:"cs",拉脱维亚语:"lv",立陶宛语:"lt",罗马尼亚语:"ro",瑞典语:"sv",斯洛伐克语:"sk",斯洛文尼亚语:"sl",希腊语:"el",匈牙利语:"hu",乌克兰语:"uk",印尼语:"id",书面挪威语:"nb",韩语:"ko",土耳其语:"tr"},c=!0,l={id:r.VI.DeepLOfficial,name:"DeepL",free:!1,package:!0,secretKeys:{get:()=>chrome.storage.local.get({deeplKey:[]}).then((({deeplKey:e})=>e)),set:e=>chrome.storage.local.set({deeplKey:e}),isComplete:e=>(0,s.hP)(e,["deeplPro"])},pointsEnable:{get:()=>chrome.storage.local.get({deeplPoints:c}).then((({deeplPoints:e})=>e)),set:e=>chrome.storage.local.set({deeplPoints:e})}};class u extends o.c{constructor(){super(l,{standardMap:i,retry:{secretKey:!0}})}isSameLang(e,t){return e.translations[0].detected_source_language.toLowerCase()===t.destinations[t.destIndex]}async callBySecretKey(e,t){const{deeplEndpoint:n}=await chrome.storage.local.get("deeplEndpoint");return async function(e,t,n){return(await(0,a.Z5)(n||`https://api${e.endsWith(":fx")?"-free":""}.deepl.com/v2/translate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`DeepL-Auth-Key ${e}`},body:JSON.stringify(t)})).json()}(e.key,{text:[t.text],target_lang:t.destination.toUpperCase(),source_lang:t.source?.toUpperCase()},n)}async callByPackage(e){const t=await(0,a.Z5)("https://hs-api.limingkai.cn/call/translate/deepl",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:[e.text],target_lang:e.destination.toUpperCase(),source_lang:e.source?.toUpperCase()})}),n=await t.json();if("isError"in n)throw new Error(n.message);return n}transform(e,t){const n=t?.translations[0].detected_source_language.toLowerCase(),o={text:e.text,from:n&&this.convertToStandard(n),link:`https://www.deepl.com/translator#${n||e.source||"auto"}/${e.destinations[e.destIndex]}/${encodeURIComponent(e.text.replaceAll("/","\\/"))}`};return t&&(o.result=t.translations[0].text.split("\n")),o}}new u},12416:(e,t,n)=>{"use strict";n.d(t,{m:()=>l});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(5090);var c=n(29842);const l={id:r.VI.DeepSeek,name:"DeepSeek",free:!1,points:!1,secretKeys:{get:()=>chrome.storage.local.get({deepSeekKey:[]}).then((({deepSeekKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({deepSeekKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class u extends o.c{constructor(){super(l)}async translateInner(e,t){const n=await chrome.storage.local.get({deepSeekPrompt:s.g2.deepSeekPrompt});if(n.deepSeekPrompt&&!n.deepSeekPrompt.includes("{{text}}"))throw new c.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:c.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({deepSeekPrompt:s.g2.deepSeekPrompt,deepSeekEndpoint:s.g2.deepSeekEndpoint,deepSeekModel:s.g2.deepSeekModel}),o=(n.deepSeekPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n="https://api.deepseek.com/chat/completions"){const o=await(0,i.Z5)(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});return await o.json()}(e.key,{model:n.deepSeekModel,messages:[{role:"user",content:o.replaceAll("\n","\n\n")}]},n.deepSeekEndpoint||void 0)}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://chat.deepseek.com/",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.choices[0].message.content.trim()).split("\n")),s}}new u},715:(e,t,n)=>{"use strict";n.d(t,{e:()=>l});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(5090);var c=n(29842);const l={id:r.VI.DouBao,name:"豆包",free:!1,points:!1,secretKeys:{get:()=>chrome.storage.local.get({douBaoKey:[]}).then((({douBaoKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({douBaoKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class u extends o.c{constructor(){super(l)}async translateInner(e,t){const n=await chrome.storage.local.get({douBaoPrompt:s.g2.douBaoPrompt});if(n.douBaoPrompt&&!n.douBaoPrompt.includes("{{text}}"))throw new c.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:c.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({douBaoPrompt:s.g2.douBaoPrompt,douBaoEndpoint:s.g2.douBaoEndpoint,douBaoModel:s.g2.douBaoModel}),o=(n.douBaoPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n="https://ark.cn-beijing.volces.com/api/v3/chat/completions"){const o=await(0,i.Z5)(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});return await o.json()}(e.key,{model:n.douBaoModel,messages:[{role:"user",content:o.replaceAll("\n","\n\n")}]},n.douBaoEndpoint||void 0)}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://www.doubao.com/chat/",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.choices[0].message.content.trim()).split("\n")),s}}new u},87503:(e,t,n)=>{"use strict";n.d(t,{V:()=>u});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(29842),c=n(5090);function l(e,t){return`https://generativelanguage.googleapis.com/v1/models/${e}:${t?"streamGenerateContent":"generateContent"}`}const u={id:r.VI.Gemini,name:"Gemini",free:!1,points:!1,package:!0,secretKeys:{get:()=>chrome.storage.local.get({geminiKey:[]}).then((({geminiKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({geminiKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class d extends o.c{constructor(){super(u)}async translateInner(e,t){const n=await chrome.storage.local.get({geminiPrompt:s.g2.geminiPrompt});if(n.geminiPrompt&&!n.geminiPrompt.includes("{{text}}"))throw new i.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:i.VC.OTHER});return super.translateInner(e,t)}throwErrorResponse(e){throw new i.Fw(`${this.service.name}报错了，错误码：${e.code}，错误消息：${e.message}。`,{type:i.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:"https://hcfy.ai/docs/services/gemini#troubleshooting"}})}async callBySecretKey(e,t){const n=await chrome.storage.local.get({geminiPrompt:s.g2.geminiPrompt,geminiEndpoint:s.g2.geminiEndpoint,geminiModel:s.g2.geminiModel}),o=(n.geminiPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n,o){const r=(o?.endpoint||l)(t,o?.stream),s=await(0,c.Z5)(r+`?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(o?.stream){if(!s.body)throw new Error("Response body is empty");return s.body}return s.json()}(e.key,n.geminiModel,{contents:[{parts:[{text:o.replaceAll("\n","\n\n")}]}],safetySettings:[{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_NONE"}]},{endpoint:n.geminiEndpoint?e=>n.geminiEndpoint.replace("{model}",e):void 0}).catch((async e=>{if(e.response){let t;try{t=await e.response.json()}catch(e){}throw null!=t&&"object"==typeof t&&"error"in t&&t.error&&this.throwErrorResponse(t.error),new i.Fw(`${this.service.name}报错了，错误消息：${e.message}`,{type:i.VC.API_SERVER_ERROR,context:e})}throw new i.Fw(`${this.service.name}报错了，错误消息：${e.message}`,{type:i.VC.NETWORK_ERROR,context:e})}))}async callByPackage(e){const t=await chrome.storage.local.get({geminiPrompt:s.g2.geminiPrompt,geminiModel:s.g2.geminiModel}),n=(t.geminiPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",e.text).replace("{{target}}",e.destination);return(0,c.Z5)("https://hs-api.limingkai.cn/call/translate/openai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t.geminiModel,messages:[{role:"user",content:n.replaceAll("\n","\n\n")}]})}).then((async e=>{const t=await e.json();if("isError"in t)return Promise.reject(new Error(t.message));return{candidates:[{content:{parts:t.choices.map((e=>({text:e.message.content})))}}]}}),(async e=>{if(e.response){let t;try{t=await e.response.json()}catch(e){}throw null!=t&&"object"==typeof t&&"error"in t&&t.error&&this.throwErrorResponse(t.error),new i.Fw(`${this.service.name}报错了，错误消息：${e.message}`,{type:i.VC.API_SERVER_ERROR,context:e})}throw new i.Fw(`${this.service.name}报错了，错误消息：${e.message}`,{type:i.VC.NETWORK_ERROR,context:e})}))}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://gemini.google.com/app",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.candidates[0].content.parts[0].text.trim()).split("\n")),s}}new d},96161:(e,t,n)=>{"use strict";n.d(t,{G:()=>A});var o=n(34047);const r=JSON.parse('{"中文(简体)":"zh-CN","英语":"en","日语":"ja","泰语":"th","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","波兰语":"pl","芬兰语":"fi","捷克语":"cs","保加利亚语":"bg","丹麦语":"da","爱沙尼亚语":"et","匈牙利语":"hu","罗马尼亚语":"ro","斯洛文尼亚语":"sl","瑞典语":"sv","越南语":"vi","中文(繁体)":"zh-TW","南非荷兰语":"af","阿尔巴尼亚语":"sq","阿姆哈拉语":"am","亚美尼亚语":"hy","阿塞拜疆语":"az","巴斯克语":"eu","白俄罗斯语":"be","孟加拉语":"bn","波斯尼亚语":"bs","缅甸语":"my","加泰罗尼亚语":"ca","宿务语":"ceb","克罗地亚语":"hr","世界语":"eo","菲律宾语":"tl","加利西亚语":"gl","格鲁吉亚语":"ka","古吉拉特语":"gu","豪萨语":"ha","希伯来语":"iw","印地语":"hi","冰岛语":"is","伊博语":"ig","印尼语":"id","爱尔兰语":"ga","卡纳达语":"kn","哈萨克语":"kk","库尔德语":"ku","老挝语":"lo","拉丁语":"la","拉脱维亚语":"lv","立陶宛语":"lt","卢森堡语":"lb","马其顿语":"mk","马尔加什语":"mg","马来语":"ms","马拉雅拉姆语":"ml","马耳他语":"mt","马拉地语":"mr","尼泊尔语":"ne","波斯语":"fa","塞尔维亚语":"sr","僧伽罗语":"si","斯洛伐克语":"sk","索马里语":"so","斯瓦希里语":"sw","塔吉克语":"tg","泰米尔语":"ta","鞑靼语":"tt","泰卢固语":"te","土耳其语":"tr","土库曼语":"tk","乌克兰语":"uk","乌尔都语":"ur","乌兹别克语":"uz","吉尔吉斯语":"ky","普什图语":"ps","高棉语":"km","海地克里奥尔语":"ht","旁遮普语":"pa","齐切瓦语":"ny","科西嘉语":"co","夏威夷语":"haw","爪哇语":"jw","卢旺达语":"rw","毛利语":"mi","挪威语":"no","奥里亚语":"or","萨摩亚语":"sm","修纳语":"sn","信德语":"sd","威尔士语":"cy","意第绪语":"yi","约鲁巴语":"yo","祖鲁语":"zu","弗里西语":"fy","蒙古语":"mn","苗语":"hmn","南非科萨语":"xh","塞索托语":"st","苏格兰盖尔语":"gd","维吾尔语":"ug","印尼巽他语":"su"}');var s=n(29842),a=n(72431),i=function(e,t){for(var n=0;n<t.length-2;n+=3){var o=t[n+2];o="a"<=o?o.charCodeAt(0)-87:Number(o),o="+"==t[n+1]?e>>>o:e<<o,e="+"==t[n]?e+o&4294967295:e^o}return e},c=function(e){for(var t=[],n=0,o=0;n<e.length;++n){var r=e.charCodeAt(n);128>r?t[o++]=r:(2048>r?t[o++]=r>>6|192:(t[o++]=r>>12|224,t[o++]=r>>6&63|128),t[o++]=63&r|128)}var s=0;for(o=0;o<t.length;o++)s+=t[o],s=i(s,"+-a^+6");return 0>(s=i(s,"+-3^+b+-f"))&&(s=2147483648+(2147483647&s)),(s%=1e6).toString()+"."+(0^s).toString()};const l={名词:"n.",动词:"v.",形容词:"adj.",副词:"adv.",介词:"prep.",缩写:"缩写",连词:"conj.",代词:"pron.",感叹词:"int.",冠词:"art.",数词:"num.",助动词:"v. aux."};function u(e){const t={raw:e,from:e.src,result:e.sentences.map((e=>"trans"in e?e.trans:"")).join("")};let n;return e.dict&&(t.dict=e.dict.map((e=>({pos:e.pos&&(l[e.pos]||e.pos),terms:e.terms||e.entry?.map((e=>e.word))||[]})))),e.sentences.some((e=>{if("src_translit"in e)return n=e.src_translit,!0})),n&&(t.phonetic=[{value:n}]),t}var d=n(5090);function p(e){return e?(t=e).endsWith("/")?t.slice(0,-1):t:"https://translate.googleapis.com";var t}var h=n(4645);function m(e,t,n="auto",o,r){return async function(e,t,n="auto",o,r){const s=`${p(r)}/translate_a/single?`+(0,d.qs)({client:"gtx",sl:n,tl:t,dj:"1",dt:["t","bd","qc","rm","ex","at","ss","rw","ld"],q:e,tk:c(e)});return fetch(s,o).then((e=>{if(!e.ok)throw new h.A(e,{...o,url:s});return e.json()}),(e=>{throw new h.A(e,{...o,url:s})}))}(e,t,n,o,r).then(u)}function g(e,t){let n,o="",r=function(e,t){for(let n,o=0;o<t.length-2;o+=3)n="a"<=(n=t.charAt(o+2))?n.charCodeAt(0)-87:Number(n),n="+"===t.charAt(o+1)?e>>>n:e<<n,e="+"===t.charAt(o)?e+n&4294967295:e^n;return e},s=(n=""!==o?o:(o=t||"")||"").split(".");n=Number(s[0])||0;let a=[],i=0,c=0;for(;c<e.length;c++){let t=e.charCodeAt(c);128>t?a[i++]=t:(2048>t?a[i++]=t>>6|192:(55296==(64512&t)&&c+1<e.length&&56320==(64512&e.charCodeAt(c+1))?(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++c)),a[i++]=t>>18|240,a[i++]=t>>12&63|128):a[i++]=t>>12|224,a[i++]=t>>6&63|128),a[i++]=63&t|128)}for(e=n,i=0;i<a.length;i++)e=r(e+=a[i],"+-a^+6");return e=r(e,"+-3^+b+-f"),0>(e^=Number(s[1])||0)&&(e=2147483648+(2147483647&e)),(e%=1e6).toString()+"."+(e^n)}let y=null;async function w(e,t,n="auto",o,r){const s=y||(y=await async function(e,t){const n=`${p(t)}/translate_a/element.js`,o=(await fetch(n,e).then((t=>{if(!t.ok)throw new h.A(t,{...e,url:n});return t.text()}),(t=>{throw new h.A(t,{...e,url:n})}))).match(/_ctkk='(\d+\.\d+)'/);if(o)return o[1];throw new Error("Can not found token.")}(o,r)),a=`${p(r)}/translate_a/single?${(0,d.qs)({client:"webapp",sl:n,tl:t,dj:"1",ie:"UTF-8",oe:"UTF-8",source:"icon",dt:["t","bd","qc","rm","ex","at","ss","rw","ld"],q:e,tk:g(e,s)})}`;return fetch(a,o).then((e=>{if(!e.ok)throw new h.A(e,{...o,url:a});return e.json()}),(e=>{throw new h.A(e,{...o,url:a})})).catch((e=>(y=null,Promise.reject(e))))}n(69375);const f=n(20124)("@hcfyapp/google-unofficial:GoogleSiteIntercept"),x={1:"名词",2:"动词",3:"形容词",4:"副词",5:"介词",6:"缩写",7:"连词",8:"代词",9:"感叹词",13:"冠词",15:"数词"};n(61412),n(91883),n(70286);function v(e,t,n="com"){let o,r;const s=new Promise(((e,t)=>{o=e,r=t})),a={urls:[`https://translate.google.${n}/_/TranslateWebserverUi/data/batchexecute?*`],tabId:e};let i;const c=t.replaceAll("\\","\\\\\\\\").replaceAll("\n","\\\\n").replaceAll('"','\\\\\\"'),l=e=>{const t=function(e){if(e){if(e.formData)return e.formData;if(e.raw?.[0]?.bytes){const t=new TextDecoder("utf-8").decode(e.raw[0].bytes),n=new URLSearchParams(t),o={};return n.forEach(((e,t)=>{Array.isArray(o[t])?o[t].push(e):o[t]=[e]})),o}}}(e.requestBody),n=t?.["f.req"][0];n?.includes(c)&&(f("已监听到翻译请求。"),f("此次请求的详情：%O",e),f("此次请求的 formData：%O",t),f("开始监听此次请求的 Request Headers……"),i=t,chrome.webRequest.onBeforeRequest.removeListener(l))},u=e=>{if(!i)return;f("已监听到翻译请求的 Request Headers。");const t={url:e.url,requestBody:i,googleHeader:e.requestHeaders?.find((e=>"x-goog-batchexecute-bgr"===e.name.toLowerCase()))};f("此次请求的详情：%O",e),f("最终获取到的信息：%O",t),o(t),chrome.webRequest.onBeforeSendHeaders.removeListener(u)};return f("开始监听翻译请求……"),chrome.webRequest.onBeforeRequest.addListener(l,a,["requestBody"]),chrome.webRequest.onBeforeSendHeaders.addListener(u,a,["requestHeaders"]),{promise:s,cancel(){chrome.webRequest.onBeforeRequest.removeListener(l),chrome.webRequest.onBeforeSendHeaders.removeListener(u),r(new Error("谷歌翻译的此次查询已被取消。"))}}}let S=1;function k(e){return(0,d.fm)((async()=>{try{return await new Promise(((t,n)=>{chrome.windows.create({url:e,focused:!1,type:"popup",width:S,height:S},(e=>{chrome.runtime.lastError?n(chrome.runtime.lastError):e?t(e):n(new Error("没有成功创建 window"))}))}))}catch(e){throw S+=50,e}}),{interval:0,timeout:0,count:6})}function P(e){return new Promise(((t,n)=>{let o,r,s;const a=()=>{o&&(o.id&&chrome.windows.remove(o.id),o=void 0)},i=(e=!1)=>{e||clearTimeout(c),s?.(),r?.(),a()},c=setTimeout((()=>{i(!0),n(new Error("响应超时：谷歌翻译 10 秒内没有返回翻译结果。"))}),1e4);k(`https://translate.google.${e.region}/?sl=${e.source||"auto"}&tl=${e.to}&text=${encodeURIComponent(e.text)}&op=translate`).then((t=>{const n=t.tabs?.[0]?.id;if(null==n)return Promise.reject(new Error("创建的浏览器窗口没有 tabId"));o=t;const{promise:r,cancel:a}=v(n,e.text,e.region);return s=a,r})).then((e=>{a();const{promise:t,cancel:n}=function(e){const t=new AbortController,{url:n,requestBody:o,googleHeader:r}=e;return{promise:fetch(n,{method:"POST",signal:t.signal,body:o?(0,d.qs)(o):null,headers:{"Content-Type":"application/x-www-form-urlencoded",...r&&r.value?{[r.name]:r.value}:void 0}}).then((e=>e.text())),cancel(){t.abort()}}}(e);return r=n,t})).then((e=>function(e){f("获取到的谷歌翻译结果，开始转换为标准的 Web 版格式。"),f("纯字符串形式的结果为：\n%s",e);try{const t=e.split(/\n+/).find((e=>e.startsWith("[["))),n=JSON.parse(JSON.parse(t)[0][2]),o={src:n[2],sentences:[{src_translit:n[0][0]},{trans:n[1][0][0][5].map((e=>{const t=e[0];return(e[2]?" ":"")+t})).join("")}]},r=n[3]?.[5]?.[0];if(r){const e=[];r.forEach((t=>{const n=x[t[4]];e.push({pos:n&&(l[n]||n),terms:t[1].map((e=>e[0]))})})),o.dict=e}return f("解析完毕的标准 Web 版格式为：%O",o),o}catch(e){throw new Error("解析谷歌翻译结果时出现错误："+e.message)}}(e))).then((e=>{i(),t(u(e))}),(e=>{i(),n(e)}))}))}var T=n(17368),b=n(1783),C=n(34426);const R={401:"登录状态已失效，请重新登录。"};function E(e){if((0,h.N)(e)){const t=function(e){let t;try{t=new URL(e)}catch(e){return"远程服务器"}const{host:n}=t;return"https://hs-api.limingkai.cn/"?.includes(n)?"划词翻译服务器":"远程服务器"}(e.request.url),n="划词翻译服务器"===t;if(e.response){const o=e.response.status;return new T.F(n?R[o]||`划词翻译服务器内部产生了一个错误，请稍后重试。HTTP 响应码：${o}。`:`${t}返回了错误的 HTTP 响应码：${o}。`,{type:b.V.API_SERVER_ERROR})}return e.request?new T.F(`${t}没有响应。`,{type:b.V.NETWORK_ERROR,link:{name:"查看解决方案",url:"划词翻译服务器"===t?"https://hcfy.ai/docs/faqs/server-no-response":"https://hcfy.ai/docs/faqs/why-services-always-loading"}}):new T.F(`向${t}发起请求时发生了一个错误：“${e.message}”`,{type:null})}return(0,C.H)(e)}const A={id:a.VI.Google,name:"谷歌翻译",free:!0};class O extends o.c{constructor(){super(A,{standardMap:r,retry:{secretKey:!0}}),this.region="cn",this.type="fast",this.mirror=""}isSameLang(e,t){return e.from===t.destinations[t.destIndex]}async callByFree(e){const{text:t,destination:n,source:o="auto"}=e;let r;if("fast"!==this.type)r=await P({text:t,to:n,source:o,region:this.region});else try{r=await m(t,n,o,{signal:(0,d._)(8e3)},this.mirror)}catch(e){try{r=await function(e,t,n="auto",o,r){return w(e,t,n,o,r).then(u)}(t,n,o,{signal:(0,d._)(8e3)},this.mirror)}catch(e){throw E(e)}}return r}transform(e,t){const{text:n}=e,o=e.destinations[e.destIndex],r=t?.from,s={text:n,from:r&&this.convertToStandard(r),to:o&&this.convertToStandard(o),link:`https://translate.google.${this.region}/?sl=${r||"auto"}&tl=${o}&text=${encodeURIComponent(n)}&op=translate`};if(t){s.result=t.result.split("\n"),t.dict&&(s.dict=t.dict),t.phonetic&&(s.phonetic=t.phonetic.map((e=>({name:e.name,value:e.value,ttsURI:s.from&&this.getTTS(n,s.from)}))));try{!s.phonetic&&s.from&&(s.ttsURI=this.getTTS(n,s.from))}catch(e){}}return s}getTTS(e,t){const n=this.convertToCustom(t);if(!n)throw new s.Fw(`${this.service.name}不支持朗读${t}。`,{type:s.VC.UNSUPPORTED_LANGUAGE});return`https://translate.googleapis.com/translate_tts?client=gtx&tl=${n}&ie=UTF-8&q=${encodeURIComponent(e)}`}}new O},98564:(e,t,n)=>{"use strict";n.d(t,{s:()=>p});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(5090),c=(n(61412),n(91883),n(70286),n(88705)),l=n(70156);function u(e,t){const n=new URL(t.url),o=n.hostname,r=o.slice(0,o.indexOf(".")),s=t.method,a="content-type;host",i=s+"\n/\n"+("POST"===s?"":n.search.slice(1))+"\n"+("content-type:"+t.contentType+"\nhost:"+o+"\n")+"\n"+a+"\n"+(0,c.SHA256)(t.bodyString).toString(c.enc.Hex).toLowerCase(),u="TC3-HMAC-SHA256",d=new Date,p=Math.floor(d.getTime()/1e3),h=d.getUTCFullYear()+"-"+l(String(d.getUTCMonth()+1),2,"0")+"-"+l(String(d.getUTCDate()),2,"0"),m=`${h}/${r}/tc3_request`,g=u+"\n"+p+"\n"+m+"\n"+(0,c.SHA256)(i).toString(c.enc.Hex).toLowerCase(),y=e.id,w=e.key,f=(0,c.HmacSHA256)(h,"TC3"+w),x=(0,c.HmacSHA256)(r,f),v=(0,c.HmacSHA256)("tc3_request",x);return{Authorization:u+" Credential="+y+"/"+m+", SignedHeaders="+a+", Signature="+(0,c.HmacSHA256)(g,v).toString(c.enc.Hex),"Content-Type":t.contentType,"X-TC-Timestamp":String(p)}}var d=n(29842);const p={id:r.VI.HunYuan,name:"混元大模型",free:!1,points:!1,secretKeys:{get:()=>chrome.storage.local.get({hunYuanKey:[]}).then((e=>e.hunYuanKey)),set:e=>chrome.storage.local.set({hunYuanKey:e}),isComplete:e=>(0,a.hP)(e)}};class h extends o.c{constructor(){super(p)}async translateInner(e,t){const n=await chrome.storage.local.get({hunYuanPrompt:s.g2.hunYuanPrompt});if(n.hunYuanPrompt&&!n.hunYuanPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({hunYuanPrompt:s.g2.hunYuanPrompt,hunYuanEndpoint:s.g2.hunYuanEndpoint,hunYuanModel:s.g2.hunYuanModel}),o=(n.hunYuanPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n="https://hunyuan.tencentcloudapi.com"){const o={method:"POST",url:n,contentType:"application/json",bodyString:JSON.stringify(t)},r=await(0,i.Z5)(o.url,{method:o.method,headers:{"X-TC-Action":"ChatCompletions","X-TC-Version":"2023-09-01",...u(e,o)},body:o.bodyString});return await r.json()}(e,{Model:n.hunYuanModel,Messages:[{Role:"user",Content:o.replaceAll("\n","\n\n")}]},n.hunYuanEndpoint||void 0)}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://yuanbao.tencent.com/chat",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.Response.Choices[0].Message.Content.trim()).split("\n")),s}}new h},37721:(e,t,n)=>{"use strict";n.d(t,{Gs:()=>p,W9:()=>h});var o=n(5090),r=(n(61412),n(91883),n(70286),n(88705)),s=n(70156);async function a(e,t){const n="https://translate.volcengineapi.com/?Action=TranslateText&Version=2020-06-01",a=JSON.stringify(t),i=function(e,t){const n=new URL(t.url),o=n.hostname,a=o.slice(0,o.indexOf(".")),i="content-type;host",c=t.method+"\n/\n"+n.search.slice(1)+"\ncontent-type:application/json\nhost:"+o+"\n\n"+i+"\n"+(0,r.SHA256)(t.bodyString).toString(r.enc.Hex).toLowerCase(),l="HMAC-SHA256",u=new Date,d=u.getUTCFullYear()+s(String(u.getUTCMonth()+1),2,"0")+s(String(u.getUTCDate()),2,"0"),p=d+"T"+s(String(u.getUTCHours()),2,"0")+s(String(u.getUTCMinutes()),2,"0")+s(String(u.getUTCSeconds()),2,"0")+"Z",h=`${d}/${t.region}/${a}/request`,m=l+"\n"+p+"\n"+h+"\n"+(0,r.SHA256)(c).toString(r.enc.Hex).toLowerCase(),g=e.key,y=(0,r.HmacSHA256)(d,g),w=(0,r.HmacSHA256)(t.region,y),f=(0,r.HmacSHA256)(a,w),x=(0,r.HmacSHA256)("request",f),v=(0,r.HmacSHA256)(m,x).toString(r.enc.Hex);return{Authorization:l+" Credential="+e.id+"/"+h+", SignedHeaders="+i+", Signature="+v,"Content-Type":"application/json","X-Date":p}}(e,{method:"POST",url:n,bodyString:a,region:"cn-north-1"});return(await(0,o.Z5)(n,{method:"POST",headers:i,body:a})).json()}var i=n(34047),c=n(72431),l=n(29842),u=n(20843);const d={"中文(简体)":"zh","中文(繁体)":"zh-Hant",英语:"en",越南语:"vi",伊努克提图特语:"iu",意大利语:"it",印尼语:"id",印地语:"hi",希伯来语:"he",西班牙语:"es",现代希腊语:"el",乌克兰语:"uk",乌尔都语:"ur",土库曼语:"tk",土耳其语:"tr",提格利尼亚语:"ti",塔希提语:"ty",他加禄语:"tl",汤加语:"to",泰语:"th",泰米尔语:"ta",泰卢固语:"te",斯洛文尼亚语:"sl",斯洛伐克语:"sk",世界语:"eo",萨摩亚语:"sm",桑戈语:"sg",塞索托语:"st",瑞典语:"sv",日语:"ja",契维语:"tw",克丘亚语:"qu",葡萄牙语:"pt",旁遮普语:"pa",挪威语:"no",新挪威语:"nb",南恩德贝莱语:"nr",缅甸语:"my",孟加拉语:"bn",蒙古语:"mn",马绍尔语:"mh",马其顿语:"mk",马拉雅拉姆语:"ml",马拉地语:"mr",马来语:"ms",罗马尼亚语:"ro",立陶宛语:"lt",拉脱维亚语:"lv",老挝语:"lo",克罗地亚语:"hr",卡纳达语:"kn",捷克语:"cs",加泰隆语:"ca",荷兰语:"nl",韩语:"ko",海地克里奥尔语:"ht",古吉拉特语:"gu",格鲁吉亚语:"ka",格陵兰语:"kl",高棉语:"km",卢干达语:"lg",刚果语:"kg",芬兰语:"fi",斐济语:"fj",法语:"fr",俄语:"ru",德语:"de",鞑靼语:"tt",丹麦语:"da",聪加语:"ts",楚瓦什语:"cv",波斯语:"fa",波斯尼亚语:"bs",波兰语:"pl",比斯拉马语:"bi",巴什基尔语:"ba",保加利亚语:"bg",阿塞拜疆语:"az",阿拉伯语:"ar",南非荷兰语:"af",阿尔巴尼亚语:"sq",阿布哈兹语:"ab",奥塞梯语:"os",埃维语:"ee",爱沙尼亚语:"et",艾马拉语:"ay","中文(文言文)":"lzh",阿姆哈拉语:"am",中库尔德语:"ckb",威尔士语:"cy",加利西亚语:"gl",豪萨语:"ha",亚美尼亚语:"hy",伊博语:"ig",林加拉语:"ln",北索托语:"nso",齐切瓦语:"ny",奥罗莫语:"om",修纳语:"sn",索马里语:"so",塞尔维亚语:"sr",斯瓦希里语:"sw",科萨语:"xh",约鲁巴语:"yo",祖鲁语:"zu",匈牙利语:"hu"},p=!1,h={id:c.VI.HuoShan,name:"火山翻译",points:!1,secretKeys:{get:()=>chrome.storage.local.get({hsApiKey:[]}).then((({hsApiKey:e})=>Array.isArray(e)?e:[e])),set:e=>chrome.storage.local.set({hsApiKey:e}),isComplete:e=>(0,u.hP)(e,["id"])}};class m extends i.c{constructor(){super(h,{standardMap:d,retry:!0})}isSuccessResponse(e){return function(e){return!("Error"in e.ResponseMetaData)}(e)}throwErrorResponse(e){const t=e.ResponseMetaData.Error;throw new l.Fw(`${this.service.name}报错了，错误码：${t.Code}，错误消息：${t.Message}。`,{type:l.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:"https://hcfy.ai/docs/services/hs-api#troubleshooting"}})}isSameLang(e,t){return n=e,o=t.destinations[t.destIndex],n.TranslationList[0].DetectedSourceLanguage===o;var n,o}async callBySecretKey(e,t){const n=await a(e,{TextList:[t.text],TargetLanguage:t.destination,SourceLanguage:t.source});return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}transform(e,t){const n=e.text,o=t&&this.convertToStandard(t.TranslationList[0].DetectedSourceLanguage),r={text:n,link:`https://translate.volcengine.com/translate?category=&home_language=zh&source_language=${e.source||"detect"}&target_language=${e.destinations[e.destIndex]}&text=${encodeURIComponent(n)}`,from:o};if(t)try{r.result=t.TranslationList[0].Translation.split("\n")}catch(e){}return r}}new m},97027:(e,t,n)=>{"use strict";n.d(t,{C:()=>l});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(5090);var c=n(29842);const l={id:r.VI.LingYi,name:"零一万物",free:!1,points:!1,secretKeys:{get:()=>chrome.storage.local.get({lingYiKey:[]}).then((({lingYiKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({lingYiKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class u extends o.c{constructor(){super(l)}async translateInner(e,t){const n=await chrome.storage.local.get({lingYiPrompt:s.g2.lingYiPrompt});if(n.lingYiPrompt&&!n.lingYiPrompt.includes("{{text}}"))throw new c.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:c.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({lingYiPrompt:s.g2.lingYiPrompt,lingYiEndpoint:s.g2.lingYiEndpoint,lingYiModel:s.g2.lingYiModel}),o=(n.lingYiPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n="https://api.lingyiwanwu.com/v1/chat/completions"){const o=await(0,i.Z5)(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});return await o.json()}(e.key,{model:n.lingYiModel,messages:[{role:"user",content:o.replaceAll("\n","\n\n")}]},n.lingYiEndpoint||void 0)}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://www.wanzhi.com/",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.choices[0].message.content.trim()).split("\n")),s}}new u},89582:(e,t,n)=>{"use strict";n.d(t,{D:()=>l});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(5090);var c=n(29842);const l={id:r.VI.MiniMax,name:"MiniMax",free:!1,points:!1,secretKeys:{get:()=>chrome.storage.local.get({miniMaxKey:[]}).then((({miniMaxKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({miniMaxKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class u extends o.c{constructor(){super(l)}async translateInner(e,t){const n=await chrome.storage.local.get({miniMaxPrompt:s.g2.miniMaxPrompt});if(n.miniMaxPrompt&&!n.miniMaxPrompt.includes("{{text}}"))throw new c.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:c.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({miniMaxPrompt:s.g2.miniMaxPrompt,miniMaxEndpoint:s.g2.miniMaxEndpoint,miniMaxModel:s.g2.miniMaxModel}),o=(n.miniMaxPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n="https://api.minimax.chat/v1/text/chatcompletion_v2"){const o=await(0,i.Z5)(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});return await o.json()}(e.key,{model:n.miniMaxModel,messages:[{role:"user",content:o.replaceAll("\n","\n\n")}]},n.miniMaxEndpoint||void 0)}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://hailuoai.com/",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.choices[0].message.content.trim()).split("\n")),s}}new u},44723:(e,t,n)=>{"use strict";n.d(t,{h:()=>l});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(5090);var c=n(29842);const l={id:r.VI.Moonshot,name:"Moonshot (Kimi)",free:!1,points:!1,secretKeys:{get:()=>chrome.storage.local.get({moonshotKey:[]}).then((({moonshotKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({moonshotKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class u extends o.c{constructor(){super(l)}async translateInner(e,t){const n=await chrome.storage.local.get({moonshotPrompt:s.g2.moonshotPrompt});if(n.moonshotPrompt&&!n.moonshotPrompt.includes("{{text}}"))throw new c.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:c.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({moonshotPrompt:s.g2.moonshotPrompt,moonshotEndpoint:s.g2.moonshotEndpoint,moonshotModel:s.g2.moonshotModel}),o=(n.moonshotPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n="https://api.moonshot.cn/v1/chat/completions"){const o=await(0,i.Z5)(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});return await o.json()}(e.key,{model:n.moonshotModel,messages:[{role:"user",content:o}]},n.moonshotEndpoint||void 0)}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://kimi.moonshot.cn/",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.choices[0].message.content.trim()).split("\n")),s}}new u},88501:(e,t,n)=>{"use strict";n.d(t,{b:()=>l});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(29842),c=n(5090);const l={id:r.VI.SiliConflow,name:"硅基流动",free:!1,points:!1,secretKeys:{get:()=>chrome.storage.local.get({siliConflowKey:[]}).then((({siliConflowKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({siliConflowKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class u extends o.c{constructor(){super(l)}async translateInner(e,t){const n=await chrome.storage.local.get({siliConflowPrompt:s.g2.siliConflowPrompt});if(n.siliConflowPrompt&&!n.siliConflowPrompt.includes("{{text}}"))throw new i.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:i.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({siliConflowPrompt:s.g2.siliConflowPrompt,siliConflowEndpoint:s.g2.siliConflowEndpoint,siliConflowModel:s.g2.siliConflowModel}),o=(n.siliConflowPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n="https://api.siliconflow.cn/v1/chat/completions"){const o=await(0,c.Z5)(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});return await o.json()}(e.key,{model:n.siliConflowModel,messages:[{role:"user",content:o}]},n.siliConflowEndpoint||void 0)}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://cloud.siliconflow.cn/models/text/chat?referrer=clyjj1zam002kv1izq1862nxz",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.choices[0].message.content.trim()).split("\n")),s}}new u},55260:(e,t,n)=>{"use strict";n.d(t,{m:()=>a});var o=n(34047),r=n(72431),s=n(29842);const a={id:r.VI.SouGou,name:"搜狗翻译"};class i extends o.c{constructor(){super(a)}translate(){return Promise.resolve({text:"",error:{type:s.VC.OTHER,message:"搜狗翻译已下线。",link:{name:"查看公告",url:"https://hcfy.ai/blog/2021/11/23/sougou-off"}}})}transform(){throw new Error("Method not implemented.")}}new i},49726:(e,t,n)=>{"use strict";n.d(t,{fH:()=>y,pl:()=>w});const o=JSON.parse('{"中文(简体)":"zh","英语":"en","日语":"ja","泰语":"th","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","越南语":"vi","中文(繁体)":"zh-TW","印地语":"hi","印尼语":"id","马来语":"ms","土耳其语":"tr"}');var r=n(5090),s=(n(61412),n(91883),n(70286),n(70156)),a=n(88705);const{enc:i,HmacSHA256:c,SHA256:l}=a;var u=n(32293);async function d(e,t,n){u(t,{Source:"auto",ProjectId:0});const o=n?.region||"ap-shanghai",a=`https://tmt${n?.regionInHost?"."+o:""}.tencentcloudapi.com`,d=JSON.stringify(t),p=function(e,t){const n=new URL(t.url),o=n.hostname,r=o.slice(0,o.indexOf(".")),a=t.method,u="content-type;host",d=a+"\n/\n"+("POST"===a?"":n.search.slice(1))+"\ncontent-type:application/json\nhost:"+o+"\n\n"+u+"\n"+l(t.bodyString).toString(i.Hex).toLowerCase(),p="TC3-HMAC-SHA256",h=new Date,m=Math.floor(h.getTime()/1e3),g=h.getUTCFullYear()+"-"+s(String(h.getUTCMonth()+1),2,"0")+"-"+s(String(h.getUTCDate()),2,"0"),y=`${g}/${r}/tc3_request`,w=p+"\n"+m+"\n"+y+"\n"+l(d).toString(i.Hex).toLowerCase(),f=e.id,x=e.key,v=c(g,"TC3"+x),S=c(r,v),k=c("tc3_request",S);return{Authorization:p+" Credential="+f+"/"+y+", SignedHeaders="+u+", Signature="+c(w,k).toString(i.Hex),"Content-Type":"application/json","X-TC-Timestamp":String(m)}}(e,{method:"POST",url:a,bodyString:d});return(await(0,r.Z5)(a,{method:"POST",headers:{"X-TC-Action":"TextTranslate","X-TC-Version":"2018-03-21","X-TC-Region":"ap-shanghai",...p},body:d})).json()}var p=n(34047),h=n(72431),m=n(29842),g=n(20843);const y=!0,w={id:h.VI.QQ,name:"腾讯翻译君",package:!0,points:!0,secretKeys:{get:()=>chrome.storage.local.get({qqApiKey:[]}).then((({qqApiKey:e})=>Array.isArray(e)?e:[e])),set:e=>chrome.storage.local.set({qqApiKey:e}),isComplete:e=>(0,g.hP)(e,["id"])},pointsEnable:{get:()=>chrome.storage.local.get({qqPoints:y}).then((({qqPoints:e})=>e)),set:e=>chrome.storage.local.set({qqPoints:e})}};class f extends p.c{constructor(){super(w,{standardMap:o,retry:!0})}isSuccessResponse(e){return function(e){return!("Error"in e.Response)}(e)}throwErrorResponse(e){const t=e.Response.Error;throw new m.Fw(`${this.service.name}报错了，错误码：${t.Code}，错误消息：${t.Message}。`,{type:m.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:"https://hcfy.ai/docs/services/qq-api#troubleshooting"}})}isSameLang(e){return(t=e).Response.Source===t.Response.Target;var t}async callByPackage(e){const t=await(0,r.Z5)("https://hs-api.limingkai.cn/v2/services/tencent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({SourceText:e.text,Target:e.destination,Source:e.source||void 0})}),n=await t.json();return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}async callBySecretKey(e,t){const n=await d(e,{SourceText:t.text,Target:t.destination,Source:t.source||void 0});return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}transform(e,t){const n=e.text,o=t&&this.convertToStandard(t.Response.Source),r=t&&this.convertToStandard(t.Response.Target),s={text:n,link:`https://fanyi.qq.com/#hcfy_text=${encodeURIComponent(n)}&hcfy_from=${o||""}&hcfy_to=${r||""}`,from:o,to:r};if(t)try{s.result=t.Response.TargetText.split("\n")}catch(e){}return s}}new f},74517:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(5090);var c=n(29842);const l={id:r.VI.TongYi,name:"通义千问",free:!1,points:!1,secretKeys:{get:()=>chrome.storage.local.get({tongYiKey:[]}).then((({tongYiKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({tongYiKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class u extends o.c{constructor(){super(l)}async translateInner(e,t){const n=await chrome.storage.local.get({tongYiPrompt:s.g2.tongYiPrompt});if(n.tongYiPrompt&&!n.tongYiPrompt.includes("{{text}}"))throw new c.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:c.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({tongYiPrompt:s.g2.tongYiPrompt,tongYiEndpoint:s.g2.tongYiEndpoint,tongYiModel:s.g2.tongYiModel}),o=(n.tongYiPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n="https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions"){const o=await(0,i.Z5)(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});return await o.json()}(e.key,{model:n.tongYiModel,messages:[{role:"user",content:o.replaceAll("\n","\n\n")}]},n.tongYiEndpoint||void 0)}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://tongyi.aliyun.com/qianwen/",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.choices[0].message.content.trim()).split("\n")),s}}new u},75577:(e,t,n)=>{"use strict";n.d(t,{F:()=>u});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(5090);async function c(e,t,n,o="https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/{model}"){let r;r="string"==typeof e?e:await async function(e){const t=await(0,i.Z5)(`https://aip.baidubce.com/oauth/2.0/token?grant_type=${e.grant_type||"client_credentials"}&client_id=${e.client_id}&client_secret=${e.client_secret}`,{method:"POST",headers:{"Content-Type":"application/json"}}),n=await t.json();if(o=n,o?.error)throw new Error("获取百度智能云授权码时失败，请稍后重试。错误消息："+n.error+": "+n.error_description);var o;return n}(e).then((e=>e.access_token));const s=await(0,i.Z5)(o.replace("{model}",t)+"?access_token="+r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await s.json()}var l=n(29842);const u={id:r.VI.WenXin,name:"文心一言",free:!1,points:!1,secretKeys:{get:()=>chrome.storage.local.get({wenXinKey:[]}).then((e=>e.wenXinKey)),set:e=>chrome.storage.local.set({wenXinKey:e}),isComplete:e=>(0,a.hP)(e)}};class d extends o.c{constructor(){super(u)}async translateInner(e,t){const n=await chrome.storage.local.get({wenXinPrompt:s.g2.wenXinPrompt});if(n.wenXinPrompt&&!n.wenXinPrompt.includes("{{text}}"))throw new l.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:l.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({wenXinPrompt:s.g2.wenXinPrompt,wenXinEndpoint:s.g2.wenXinEndpoint,wenXinModel:s.g2.wenXinModel}),o=(n.wenXinPrompt||"将下面的文本翻译为{{target}}并保留段落格式：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return c({client_id:e.id,client_secret:e.key},n.wenXinModel,{messages:[{role:"user",content:o.replaceAll("\n","\n\n")}]},n.wenXinEndpoint||void 0)}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://yiyan.baidu.com/",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.result.trim()).split("\n")),s}}new d},17875:(e,t,n)=>{"use strict";n.d(t,{l:()=>h});var o=n(34047),r=n(72431),s=n(29842),a=n(5090),i=n(4645);const c=/sid:\s*'[^']+/;let l=null;const u=(0,a.$2)((async function(){if(l&&(e=l.date,!(Date.now()-e.getTime()>432e5)))return l.sid;var e;l=null;const t="https://translate.yandex.net/website-widget/v1/widget.js?widgetId=ytWidget&pageLang=en&widgetTheme=light&autoMode=false";let n;try{n=await fetch(t)}catch(e){throw new i.A(e,{url:t})}if(!n.ok)throw new i.A(n,{url:t});const o=await n.text(),r=o.match(c)?.[0]?.substring(6);if(r)return l={date:new Date,sid:r},r;throw new Error("Unable get token.")}));async function d(e,t,n){let o=n?.source;if(!o){const t=await async function(e,t){const n=`https://translate.yandex.net/api/v1/tr.json/detect?srv=tr-url-widget&id=${await u()}-0-0${(Array.isArray(e)?e:[e]).map((e=>`&text=${encodeURIComponent(e)}`)).join("")}`;let o;try{o=await fetch(n,t)}catch(e){throw new i.A(e,{...t,url:n})}if(!o.ok)throw new i.A(o,{...t,url:n});return o.json()}(e);if(200!==t.code)throw new Error("Error when detect language: "+t.message);o=t.lang}const r=`https://translate.yandex.net/api/v1/tr.json/translate?srv=tr-url-widget&id=${await u()}-0-0&format=${n?.format||"text"}&lang=${o}-${t}${(Array.isArray(e)?e:[e]).map((e=>`&text=${encodeURIComponent(e)}`)).join("")}`;let s;try{s=await fetch(r,n?.fetchConfig)}catch(e){throw new i.A(e,{...n?.fetchConfig,url:r})}if(!s.ok)throw new i.A(s,{...n?.fetchConfig,url:r});return await s.json()}const p={"中文(简体)":"zh",英语:"en",阿塞拜疆语:"az",马拉雅拉姆语:"ml",阿尔巴尼亚语:"sq",马耳他语:"mt",阿姆哈拉语:"am",马其顿语:"mk",毛利语:"mi",阿拉伯语:"ar",马拉地语:"mr",亚美尼亚语:"hy","马里语（俄罗斯）":"mhr",南非荷兰语:"af",蒙古语:"mn",巴斯克语:"eu",德语:"de",巴什基尔语:"ba",尼泊尔语:"ne",白俄罗斯语:"be",挪威语:"no",孟加拉语:"bn",旁遮普语:"pa",缅甸语:"my",帕皮阿门托语:"pap",保加利亚语:"bg",波斯语:"fa",波斯尼亚语:"bs",波兰语:"pl",威尔士语:"cy",葡萄牙语:"pt",匈牙利语:"hu",罗马尼亚语:"ro",越南语:"vi",俄语:"ru",海地克里奥尔语:"ht",宿务语:"ceb",加利西亚语:"gl",塞尔维亚语:"sr",荷兰语:"nl",僧伽罗语:"si",斯洛伐克语:"sk",希腊语:"el",斯洛文尼亚语:"sl",格鲁吉亚语:"ka",斯瓦希里语:"sw",古吉拉特语:"gu",印尼巽他语:"su",丹麦语:"da",塔吉克语:"tg",希伯来语:"he",泰语:"th",意第绪语:"yi",他加禄语:"tl",印尼语:"id",泰米尔语:"ta",爱尔兰语:"ga",鞑靼语:"tt",意大利语:"it",泰卢固语:"te",冰岛语:"is",土耳其语:"tr",西班牙语:"es",乌德穆尔特语:"udm",哈萨克语:"kk",乌兹别克语:"uz",卡纳达语:"kn",乌克兰语:"uk",加泰罗尼亚语:"ca",乌尔都语:"ur",吉尔吉斯语:"ky",芬兰语:"fi",法语:"fr",韩语:"ko",印地语:"hi",科萨语:"xh",克罗地亚语:"hr",高棉语:"km",捷克语:"cs",老挝语:"lo",瑞典语:"sv",拉丁语:"la",苏格兰语:"gd",拉脱维亚语:"lv",爱沙尼亚语:"et",立陶宛语:"lt",世界语:"eo",卢森堡语:"lb",爪哇语:"jv",马尔加什语:"mg",日语:"ja",马来语:"ms"},h={id:r.VI.Yandex,name:"Yandex 翻译",free:!0};class m extends o.c{constructor(){super(h,{standardMap:p,retry:!0})}isSuccessResponse(e){return function(e){return 200===e.code}(e)}throwErrorResponse(e){const t=e;throw new s.Fw(`${this.service.name}报错了，错误码：${t.code}，错误消息：${t.message}。`,{type:s.VC.API_SERVER_ERROR})}async callByFree(e){const t=await d(e.text,e.destination,{source:e.source});return this.isSuccessResponse(t)||this.throwErrorResponse(t),t}transform(e,t){const n=e.text;let o,r,s=e.source,a=e.destinations[e.destIndex];if(t){const[e,n]=t.lang.split("-");s=e,a=n,o=this.convertToStandard(e),r=this.convertToStandard(n)}const i={text:n,link:`https://translate.yandex.com/?source_lang=${s}&target_lang=${a}&text=${encodeURIComponent(n)}`,from:o,to:r};if(t)try{i.result=t.text[0].split("\n")}catch(e){}return i}}new m},20551:(e,t,n)=>{"use strict";n.d(t,{Gu:()=>h,Xh:()=>m});n(69375);const o=JSON.parse('{"中文(简体)":"zh-CHS","英语":"en","日语":"ja","泰语":"th","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","波兰语":"pl","芬兰语":"fi","捷克语":"cs","保加利亚语":"bg","丹麦语":"da","爱沙尼亚语":"et","匈牙利语":"hu","罗马尼亚语":"ro","斯洛文尼亚语":"sl","瑞典语":"sv","越南语":"vi","中文(粤语)":"yue","南非荷兰语":"af","阿尔巴尼亚语":"sq","阿姆哈拉语":"am","亚美尼亚语":"hy","阿塞拜疆语":"az","巴斯克语":"eu","白俄罗斯语":"be","孟加拉语":"bn","波斯尼亚语":"bs","缅甸语":"my","加泰罗尼亚语":"ca","宿务语":"ceb","克罗地亚语":"hr","世界语":"eo","菲律宾语":"tl","加利西亚语":"gl","格鲁吉亚语":"ka","古吉拉特语":"gu","豪萨语":"ha","希伯来语":"he","印地语":"hi","冰岛语":"is","伊博语":"ig","印尼语":"id","爱尔兰语":"ga","卡纳达语":"kn","哈萨克语":"kk","克林贡语":"tlh","库尔德语":"ku","老挝语":"lo","拉丁语":"la","拉脱维亚语":"lv","立陶宛语":"lt","卢森堡语":"lb","马其顿语":"mk","马尔加什语":"mg","马来语":"ms","马拉雅拉姆语":"ml","马耳他语":"mt","马拉地语":"mr","尼泊尔语":"ne","波斯语":"fa","僧伽罗语":"si","斯洛伐克语":"sk","索马里语":"so","斯瓦希里语":"sw","塔吉克语":"tg","泰米尔语":"ta","泰卢固语":"te","土耳其语":"tr","乌克兰语":"uk","乌尔都语":"ur","乌兹别克语":"uz","吉尔吉斯语":"ky","普什图语":"ps","高棉语":"km","海地克里奥尔语":"ht","旁遮普语":"pa","齐切瓦语":"ny","科西嘉语":"co","夏威夷语":"haw","爪哇语":"jw","毛利语":"mi","挪威语":"no","萨摩亚语":"sm","修纳语":"sn","信德语":"sd","威尔士语":"cy","意第绪语":"yi","约鲁巴语":"yo","祖鲁语":"zu","弗里西语":"fy","蒙古语":"mn","南非科萨语":"xh","塞索托语":"st","苏格兰盖尔语":"gd","印尼巽他语":"su","白苗语":"mww","斐济语":"fj","克雷塔罗奥托米语":"otq","塞尔维亚语(拉丁文)":"sr-Latn","塞尔维亚语(西里尔文)":"sr-Cyrl","汤加语":"to","塔希提语":"ty","尤卡坦玛雅语":"yua"}');var r=n(5090),s=n(32293);n(3647),n(89358),n(15114);async function a(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}function i(e){const t=e.length;return t<=20?e:e.substring(0,10)+t+e.substring(t-10,t)}async function c(e,t){s(t,await async function(e,t){const n=Date.now(),o=Math.round(n/1e3);return{appKey:t.id,salt:n,sign:await a(t.id+i(e)+n+o+t.key),signType:"v3",curtime:o}}(t.q,e),{from:"auto"});return(await(0,r.Z5)("https://openapi.youdao.com/api",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,r.qs)(t)})).json()}var l=n(34047),u=n(72431),d=n(29842),p=n(20843);const h=!0,m={id:u.VI.YouDao,name:"有道翻译",package:!0,points:!0,secretKeys:{get:()=>chrome.storage.local.get({youDaoAppKey:[]}).then((({youDaoAppKey:e})=>Array.isArray(e)?e:[e])),set:e=>chrome.storage.local.set({youDaoAppKey:e}),isComplete:e=>(0,p.hP)(e,["id"])},pointsEnable:{get:()=>chrome.storage.local.get({ydPoints:h}).then((({ydPoints:e})=>e)),set:e=>chrome.storage.local.set({ydPoints:e})}};class g extends l.c{constructor(){super(m,{standardMap:o,retry:!0})}isSuccessResponse(e){return function(e){return"0"==e.errorCode}(e)}throwErrorResponse(e){throw new d.Fw(`${this.service.name}报错了，错误码：${e.errorCode}。`,{type:d.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:"https://hcfy.ai/docs/services/youdao-api#troubleshooting"}})}isSameLang(e){return function(e){const[t,n]=e.l.split("2");return t===n}(e)}async callByPackage(e){const t=await(0,r.Z5)("https://hs-api.limingkai.cn/v2/services/youdao",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({q:e.text,to:e.destination,from:e.source||void 0})}),n=await t.json();return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}async callBySecretKey(e,t){const n=await c(e,{q:t.text,to:t.destination,from:t.source||void 0});return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}transform(e,t){const n=e.text,[o,r]=(t?.l||"").split("2"),s={text:n,from:this.convertToStandard(o),to:this.convertToStandard(r),ttsURI:t?.speakUrl,link:t?.basic?`https://dict.youdao.com/search?q=${encodeURIComponent(n)}`:`http://fanyi.youdao.com/translate?i=${encodeURIComponent(n)}`,result:t?.translation[0]?.split("\n")};if(t?.basic){s.dict=t.basic.explains.map((e=>{const t=e.match(/^([a-z]+\.)\s+/);return{pos:t?t[1]:void 0,terms:[t?e.slice(t[0].length):e]}}));const e=[];t.basic["us-phonetic"]&&e.push({name:"美",value:t.basic["us-phonetic"],ttsURI:t.basic["us-speech"]}),t.basic["uk-phonetic"]&&e.push({name:"英",value:t.basic["uk-phonetic"],ttsURI:t.basic["uk-speech"]}),!e.length&&t.basic.phonetic&&e.push({value:t.basic.phonetic,ttsURI:t.speakUrl}),e.length&&(s.phonetic=e)}return s}}new g},1709:(e,t,n)=>{"use strict";n.d(t,{_:()=>l});var o=n(34047),r=n(72431),s=n(16224),a=n(20843),i=n(5090);var c=n(29842);const l={id:r.VI.ZhiPu,name:"智谱 AI",free:!1,points:!1,secretKeys:{get:()=>chrome.storage.local.get({zhiPuKey:[]}).then((({zhiPuKey:e})=>e.map((e=>({key:e}))))),set:e=>chrome.storage.local.set({zhiPuKey:e.map((e=>e.key))}),isComplete:e=>(0,a.hP)(e)}};class u extends o.c{constructor(){super(l)}async translateInner(e,t){const n=await chrome.storage.local.get({zhiPuPrompt:s.g2.zhiPuPrompt});if(n.zhiPuPrompt&&!n.zhiPuPrompt.includes("{{text}}"))throw new c.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:c.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await chrome.storage.local.get({zhiPuPrompt:s.g2.zhiPuPrompt,zhiPuEndpoint:s.g2.zhiPuEndpoint,zhiPuModel:s.g2.zhiPuModel}),o=(n.zhiPuPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return async function(e,t,n="https://open.bigmodel.cn/api/paas/v4/chat/completions"){const o=await(0,i.Z5)(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});return await o.json()}(e.key,{model:n.zhiPuModel,messages:[{role:"user",content:o.replaceAll("\n","\n\n")}]},n.zhiPuEndpoint||void 0)}transform(e,t){const n=e.text,r=e.destinations[e.destIndex],s={text:n,link:"https://www.zhipuai.cn/",from:e.source&&this.convertToStandard(e.source),to:r&&this.convertToStandard(r)};return t&&(s.result=(0,o.f)(t.choices[0].message.content.trim()).split("\n")),s}}new u},20843:(e,t,n)=>{"use strict";function o(e){return e.points&&!e.free&&!e.secretKeys&&!e.package}function r(e){return e.free&&!e.points&&!e.secretKeys&&!e.package}function s(e){return e.secretKeys&&!e.free&&!e.points&&!e.package}function a(e){return e.package&&!e.free&&!e.points&&!e.secretKeys}function i(e,t){return!!e.key&&!(t?.includes("id")&&!e.id)}n.d(t,{U4:()=>s,hP:()=>i,tk:()=>r,u6:()=>o,zr:()=>a})},45760:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});const o="offscreen.html",r=chrome.runtime.getURL(o),s="getContexts"in chrome.runtime?async()=>!!(await chrome.runtime.getContexts({contextTypes:[chrome.runtime.ContextType.OFFSCREEN_DOCUMENT],documentUrls:[r]})).length:async()=>(await clients.matchAll()).some((e=>e.url.startsWith(r)));let a=null;async function i(){await s()||(a?await a:(a=chrome.offscreen.createDocument({url:o,reasons:[chrome.offscreen.Reason.CLIPBOARD],justification:"用于语音朗读、获取 / 复制翻译结果、截图翻译所需的图片转文字能力、深色模式等功能。"}),await a,a=null))}},17368:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});var o=n(1783),r=n(23298);class s extends Error{constructor(e,t){super(e),null!==t?.type&&(this.type=t?.type||o.V.OTHER),this.link=t?.link,this.context=t?.context,this.errors=t?.errors,this.noRetry=t?.noRetry}toJSON(){return{type:this.type,message:this.message,link:this.link,errors:this.errors?.map((e=>(0,r.x)(e).toJSON()))}}clone(){return new s(this.message,{context:this.context,type:this.type,link:this.link,errors:this.errors,noRetry:this.noRetry})}}},23298:(e,t,n)=>{"use strict";n.d(t,{x:()=>c});n(61412),n(91883),n(70286);var o=n(17368),r=n(1783),s=n(34426),a=n(5090);const i={401:"登录状态已失效，请重新登录。"};function c(e){if((0,a.NF)(e)){const t=function(e={}){const{url:t,baseURL:n}=e;let o;try{o=new URL(t||"",n)}catch(e){return"远程服务器"}const{host:r}=o;return"https://hs-api.limingkai.cn/"?.includes(r)?"划词翻译服务器":"远程服务器"}({url:e.url}),n="划词翻译服务器"===t;if(e.response){const s=e.response.status;return new o.F(n?i[s]||`划词翻译服务器内部产生了一个错误，请稍后重试。HTTP 响应码：${s}。`:`${t}返回了错误的 HTTP 响应码：${s}。`,{type:r.V.API_SERVER_ERROR})}return new o.F(`${t}没有响应。`,{type:r.V.NETWORK_ERROR,link:{name:"查看解决方案",url:"划词翻译服务器"===t?"https://hcfy.ai/docs/faqs/server-no-response":"https://hcfy.ai/docs/faqs/why-services-always-loading"}})}return(0,s.H)(e)}},69675:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});n(69375);var o=n(3514),r=n.n(o),s=n(20124);const a=n.n(s)()("utils/watchStorage");const i=[];function c(e,t,n,o="local"){return chrome.storage[o].get(e).then((e=>{(n||t)(e,!0)})).then((()=>{const n=Object.keys(e);i.push({defaultOptions:e,onChange:t,area:o,keys:n})})),()=>{const n=i.findIndex((n=>n.onChange===t&&n.area===o&&n.defaultOptions===e));return n>=0&&(i.splice(n,1),!0)}}chrome.storage.onChanged.addListener(((e,t)=>{a("storage.onChanged 事件调用了",e,t),i.forEach((n=>{if(n.area!==t)return;const o=function(e,t){const n={};for(const o in e)e.hasOwnProperty(o)&&t.includes(o)&&(n[o]=e[o].newValue);return n}(e,n.keys);r()(o)||n.onChange(o)}))}))},25156:()=>{},34975:(e,t,n)=>{"use strict";n.d(t,{l:()=>r,E:()=>s});var o=n(5090);async function r(e,t,n){let r;if("string"==typeof e)r=e;else{const t=await async function(e){return(await(0,o.Z5)(`https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&client_id=${e.id}&client_secret=${e.key}`,{method:"POST"})).json()}(e);if(!("access_token"in t))throw new Error(`生成 access token 时出错，错误信息：“${t.error_description}”`);r=t.access_token,n?.onAccess?.(t)}return(await(0,o.Z5)("https://aip.baidubce.com/rest/2.0/ocr/v1/accurate_basic?access_token="+r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,o.qs)(t)})).json()}function s(e){return!("error_msg"in e)}},47781:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var o=n(22025);const r=n(20124)("@hcfyapp/messaging:sendMessage");function s(e,t,n){let s;return r("准备发送消息：%o",e),s="number"==typeof t?chrome.tabs.sendMessage(t,e,n):null==t?chrome.runtime.sendMessage(e,n):chrome.runtime.sendMessage(t,e,n),s.then((e=>{if(r("收到的 raw response： %o",e),void 0!==e){if(!(0,o.v)(e))throw new Error("必须使用 @hcfyapp/messaging 的 onMessage 方法来处理消息。",{cause:e});if("__messaging_reject"in e)throw e.__messaging_reject;return e.__messaging_resolve}}),(e=>{throw r("发送消息失败",e),e}))}},4645:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,N:()=>r});class o extends Error{request;response;constructor(e,t){const n=e instanceof Response;var o;super(n?`Request failed with status code ${e.status}.`:(o=e)instanceof Error?o.message:"Unknown error. See `error.cause` for detail."),this.request=t,this.name="FetchError",n?this.response=e:this.cause=e}}function r(e){return e instanceof o}},73109:(e,t,n)=>{"use strict";function o(e){let t=null;return function(){return t||(t=e().finally((()=>{t=null})),t)}}n.d(t,{$:()=>o})},64347:(e,t,n)=>{"use strict";function o(e,t){return new Promise(((n,o)=>{const r=Object.assign({timeout:1e3,interval:50,count:0},t);let s,a,i;r.timeout>0&&(i=setTimeout((()=>{a&&clearTimeout(a),o(s)}),r.timeout));let c=0;(async function t(){let n;c+=1;try{n=await e()}catch(e){if(c===r.count)throw i&&clearTimeout(i),e;return s=e,new Promise(((e,n)=>{a=setTimeout((()=>{t().then(e,n)}),r.interval)}))}return i&&clearTimeout(i),n})().then(n,o)}))}n.d(t,{f:()=>o})},23810:(e,t,n)=>{"use strict";n(69375);function o(e){const t=document.createElement(e);return"div"===e&&(t.contentEditable="true"),t.style.position="absolute",t.style.top="-99999px",document.body.appendChild(t),t}function r(e){return"TEXTAREA"===e.tagName}new class{#e;#t;#n(e){return"textarea"===e?this.#t||(this.#t=o("textarea")):this.#e||(this.#e=o("div"))}read(e="text"){const t="text"===e?this.#n("textarea"):this.#n("div");if(r(t)?t.value="":t.textContent="",t.focus(),!document.execCommand("paste"))throw new Error('document.execCommand("paste") returns false.');if(r(t))return t.value;if("html"===e)return t.innerHTML;if("dom"===e)return t.cloneNode(!0);if("images"===e){const e=t.getElementsByTagName("img"),n=[];for(const t of e)n.push(t.src);return n}}write(e){const t=this.#n("textarea");if(t.value=e,t.focus(),t.select(),!document.execCommand("copy"))throw new Error('document.execCommand("copy") returns false.')}clear(){this.#t&&(document.removeChild(this.#t),this.#t=void 0),this.#e&&(document.removeChild(this.#e),this.#e=void 0)}}},1729:(e,t,n)=>{"use strict";n(14041)},60807:(e,t,n)=>{"use strict";n(14041),n(38232)},30457:e=>{"use strict";e.exports=JSON.parse('{"中文(简体)":"zh","英语":"en","日语":"jp","泰语":"th","西班牙语":"spa","阿拉伯语":"ara","法语":"fra","韩语":"kor","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","波兰语":"pl","芬兰语":"fin","捷克语":"cs","保加利亚语":"bul","丹麦语":"dan","爱沙尼亚语":"est","匈牙利语":"hu","罗马尼亚语":"rom","斯洛文尼亚语":"slo","瑞典语":"swe","越南语":"vie","中文(粤语)":"yue","中文(繁体)":"cht","中文(文言文)":"wyw","南非荷兰语":"afr","阿尔巴尼亚语":"alb","阿姆哈拉语":"amh","亚美尼亚语":"arm","阿萨姆语":"asm","阿斯图里亚斯语":"ast","阿塞拜疆语":"aze","巴斯克语":"baq","白俄罗斯语":"bel","孟加拉语":"ben","波斯尼亚语":"bos","缅甸语":"bur","加泰罗尼亚语":"cat","宿务语":"ceb","克罗地亚语":"hrv","世界语":"epo","法罗语":"fao","菲律宾语":"fil","加利西亚语":"glg","格鲁吉亚语":"geo","古吉拉特语":"guj","豪萨语":"hau","希伯来语":"heb","印地语":"hi","冰岛语":"ice","伊博语":"ibo","印尼语":"id","爱尔兰语":"gle","卡纳达语":"kan","哈萨克语":"kaz","克林贡语":"kli","库尔德语":"kur","老挝语":"lao","拉丁语":"lat","拉脱维亚语":"lav","立陶宛语":"lit","卢森堡语":"ltz","马其顿语":"mac","马尔加什语":"mg","马来语":"may","马拉雅拉姆语":"mal","马耳他语":"mlt","马拉地语":"mar","尼泊尔语":"nep","新挪威语":"nno","波斯语":"per","萨丁尼亚语":"srd","塞尔维亚语":"srp","僧伽罗语":"sin","斯洛伐克语":"sk","索马里语":"som","斯瓦希里语":"swa","他加禄语":"tgl","塔吉克语":"tgk","泰米尔语":"tam","鞑靼语":"tat","泰卢固语":"tel","土耳其语":"tr","土库曼语":"tuk","乌克兰语":"ukr","乌尔都语":"urd","乌兹别克语":"uzb","奥克语":"oci","吉尔吉斯语":"kir","普什图语":"pus","高棉语":"hkm","海地克里奥尔语":"ht","书面挪威语":"nob","旁遮普语":"pan","阿尔及利亚阿拉伯语":"arq","比斯拉马语":"bis","加拿大法语":"frn","哈卡钦语":"hak","胡帕语":"hup","印古什语":"ing","拉特加莱语":"lag","毛里求斯克里奥尔语":"mau","黑山语":"mot","巴西葡萄牙语":"pot","卢森尼亚语":"ruy","塞尔维亚-克罗地亚语":"sec","西里西亚语":"sil","突尼斯阿拉伯语":"tua","亚齐语":"ach","阿肯语":"aka","阿拉贡语":"arg","艾马拉语":"aym","俾路支语":"bal","巴什基尔语":"bak","本巴语":"bem","柏柏尔语":"ber","博杰普尔语":"bho","比林语":"bli","布列塔尼语":"bre","切罗基语":"chr","齐切瓦语":"nya","楚瓦什语":"chv","康瓦尔语":"cor","科西嘉语":"cos","克里克语":"cre","克里米亚鞑靼语":"cri","迪维希语":"div","古英语":"eno","中古法语":"frm","弗留利语":"fri","富拉尼语":"ful","盖尔语":"gla","卢干达语":"lug","古希腊语":"gra","瓜拉尼语":"grn","夏威夷语":"haw","希利盖农语":"hil","伊多语":"ido","因特语":"ina","伊努克提图特语":"iku","爪哇语":"jav","卡拜尔语":"kab","格陵兰语":"kal","卡努里语":"kau","克什米尔语":"kas","卡舒比语":"kah","卢旺达语":"kin","刚果语":"kon","孔卡尼语":"kok","林堡语":"lim","林加拉语":"lin","逻辑语":"loj","低地德语":"log","下索布语":"los","迈蒂利语":"mai","曼克斯语":"glv","毛利语":"mao","马绍尔语":"mah","南恩德贝莱语":"nbl","那不勒斯语":"nea","西非书面语":"nqo","北方萨米语":"sme","挪威语":"nor","奥杰布瓦语":"oji","奥里亚语":"ori","奥罗莫语":"orm","奥塞梯语":"oss","邦板牙语":"pam","帕皮阿门托语":"pap","北索托语":"ped","克丘亚语":"que","罗曼什语":"roh","罗姆语":"ro","萨摩亚语":"sm","梵语":"san","苏格兰语":"sco","掸语":"sha","修纳语":"sna","信德语":"snd","桑海语":"sol","南索托语":"sot","叙利亚语":"syr","德顿语":"tet","提格利尼亚语":"tir","聪加语":"tso","契维语":"twi","高地索布语":"ups","文达语":"ven","瓦隆语":"wln","威尔士语":"wel","西弗里斯语":"fry","沃洛夫语":"wol","科萨语":"xho","意第绪语":"yid","约鲁巴语":"yor","扎扎其语":"zaz","祖鲁语":"zul"}')}}]);