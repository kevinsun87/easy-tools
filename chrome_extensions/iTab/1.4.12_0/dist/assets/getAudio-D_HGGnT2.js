import{l as e,d as t}from"./localforage-BVRgvwJc.js";const a=document.body.clientWidth<568,o=!!("ontouchstart"in window),n=()=>window.location.protocol.includes("http"),r=()=>"chrome-extension:"===window.location.protocol||"moz-extension:"===window.location.protocol,s=()=>{var e=window.navigator.userAgent.toLowerCase();return e.indexOf("firefox")>0?"firefox":e.indexOf("edg")>0?"edge":e.indexOf("chrome/")>0?"chrome":e.indexOf("safari/")>0?"safari":"other"},i=Object.freeze(Object.defineProperty({__proto__:null,browserName:s,isExt:r,isMobile:a,isTouch:o,isWeb:n},Symbol.toStringTag,{value:"Module"})),l=e=>{const t=new BroadcastChannel(e);return t.id="background",t};async function c(e,t){t.postMessage({id:t.id,msg:e})}var d=e.createInstance({name:"wallpaper"});const u={set(e="",a="",o){if(o){let n={exp:t().valueOf()+o,data:a};return d.setItem(e,n)}return d.setItem(e,a)},async get(e=null,a=!0){let o=await d.getItem(e);return o&&o.exp&&a?t().valueOf()>o.exp?(d.removeItem(e),null):o.data:o&&o.exp&&!a?o.data:o},keys:async()=>await d.keys(),remove:async(e=null)=>await d.removeItem(e),async getItem(e=null){let a=await d.getItem(e);return a&&a.exp?{data:a.data,isExp:t().valueOf()>a.exp}:{data:a,isExp:!0}}},f=Object.freeze(Object.defineProperty({__proto__:null,default:u},Symbol.toStringTag,{value:"Module"})),m=async(e="hailang")=>{const t=`app-tomato-blob-${e}`;let a=`https://files.codelife.cc/itab/widget/tomato/${e}_128.m4a`,o=await u.getItem(t);return o.isExp?(fetch(a).then((e=>e.blob())).then((e=>{u.set(t,e,e)})),a):(a=window.URL.createObjectURL(o.data),a)};export{o as a,n as b,s as c,l as d,u as e,r as f,m as g,i as h,a as i,c as s,f as w};
