import{m as e,a,b0 as r,c as t,w as l,o as n,aW as u,p as i,q as s,v as o,u as m,z as d,bF as c,A as p,I as b,H as v,G as f,J as N,bH as y,i as x}from"./index-CyyLRP8W.js";import{E as g}from"./index-BPnMED6p.js";import{ElIcon as V}from"./index-D4GlTUBi.js";import{K as h,Q as I,R as S,S as j}from"./todo-nv2WtoEp.js";import{b as w,u as E}from"./index-B3sKL47p.js";import{a as A}from"./use-global-config-DcVlDyFX.js";import{g as F,m as K,k as _}from"./types-Ci7ev57k.js";import{u as k}from"./index-kxe6IHwf.js";import{C as B,I as z,U as C}from"./event-BwRzfsZt.js";import{_ as M,w as O}from"./plugin-vue_export-helper-O3gUY6pX.js";import{u as $}from"./index-CXKOYI6o.js";import{u as P,a as T,c as H}from"./use-form-item-CUGNa-4i.js";import{t as L,d as D}from"./scroll-3JEGyj3w.js";import{u as G}from"./index-DjlyN6je.js";import{v as J}from"./index-Cdhz-ASE.js";const R=w({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:A,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||F(e)||["min","max"].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...k(["ariaLabel"])}),U={[B]:(e,a)=>a!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[z]:e=>F(e)||K(e),[C]:e=>F(e)||K(e)},Y=["aria-label","onKeydown"],q=["aria-label","onKeydown"],Q=e({name:"ElInputNumber"});const W=O(M(e({...Q,props:R,emits:U,setup(e,{expose:w,emit:A}){const k=e,{t:M}=$(),O=E("input-number"),R=a(),U=r({currentValue:k.modelValue,userInput:null}),{formItem:Q}=P(),W=t((()=>F(k.modelValue)&&k.modelValue<=k.min)),X=t((()=>F(k.modelValue)&&k.modelValue>=k.max)),Z=t((()=>{const e=ne(k.step);return _(k.precision)?Math.max(ne(k.modelValue),e):(k.precision,k.precision)})),ee=t((()=>k.controls&&"right"===k.controlsPosition)),ae=T(),re=H(),te=t((()=>{if(null!==U.userInput)return U.userInput;let e=U.currentValue;if(K(e))return"";if(F(e)){if(Number.isNaN(e))return"";_(k.precision)||(e=e.toFixed(k.precision))}return e})),le=(e,a)=>{if(_(a)&&(a=Z.value),0===a)return Math.round(e);let r=String(e);const t=r.indexOf(".");if(-1===t)return e;if(!r.replace(".","").split("")[t+a])return e;const l=r.length;return"5"===r.charAt(l-1)&&(r=`${r.slice(0,Math.max(0,l-1))}6`),Number.parseFloat(Number(r).toFixed(a))},ne=e=>{if(K(e))return 0;const a=e.toString(),r=a.indexOf(".");let t=0;return-1!==r&&(t=a.length-r-1),t},ue=(e,a=1)=>F(e)?le(e+k.step*a):U.currentValue,ie=()=>{if(k.readonly||re.value||X.value)return;const e=Number(te.value)||0,a=ue(e);me(a),A(z,U.currentValue),ve()},se=()=>{if(k.readonly||re.value||W.value)return;const e=Number(te.value)||0,a=ue(e,-1);me(a),A(z,U.currentValue),ve()},oe=(e,a)=>{const{max:r,min:t,step:l,precision:n,stepStrictly:u,valueOnClear:i}=k;r<t&&L("InputNumber","min should not be greater than max.");let s=Number(e);if(K(e)||Number.isNaN(s))return null;if(""===e){if(null===i)return null;s=x(i)?{min:t,max:r}[i]:i}return u&&(s=le(Math.round(s/l)*l,n)),_(n)||(s=le(s,n)),(s>r||s<t)&&(s=s>r?r:t,a&&A(C,s)),s},me=(e,a=!0)=>{var r;const t=U.currentValue,l=oe(e);a?t===l&&e||(U.userInput=null,A(C,l),t!==l&&A(B,l,t),k.validateEvent&&(null==(r=null==Q?void 0:Q.validate)||r.call(Q,"change").catch((e=>D()))),U.currentValue=l):A(C,l)},de=e=>{U.userInput=e;const a=""===e?null:Number(e);A(z,a),me(a,!1)},ce=e=>{const a=""!==e?Number(e):"";(F(a)&&!Number.isNaN(a)||""===e)&&me(a),ve(),U.userInput=null},pe=e=>{A("focus",e)},be=e=>{var a;U.userInput=null,A("blur",e),k.validateEvent&&(null==(a=null==Q?void 0:Q.validate)||a.call(Q,"blur").catch((e=>D())))},ve=()=>{U.currentValue!==k.modelValue&&(U.currentValue=k.modelValue)},fe=e=>{document.activeElement===e.target&&e.preventDefault()};return l((()=>k.modelValue),((e,a)=>{const r=oe(e,!0);null===U.userInput&&r!==a&&(U.currentValue=r)}),{immediate:!0}),n((()=>{var e;const{min:a,max:r,modelValue:t}=k,l=null==(e=R.value)?void 0:e.input;if(l.setAttribute("role","spinbutton"),Number.isFinite(r)?l.setAttribute("aria-valuemax",String(r)):l.removeAttribute("aria-valuemax"),Number.isFinite(a)?l.setAttribute("aria-valuemin",String(a)):l.removeAttribute("aria-valuemin"),l.setAttribute("aria-valuenow",U.currentValue||0===U.currentValue?String(U.currentValue):""),l.setAttribute("aria-disabled",String(re.value)),!F(t)&&null!=t){let e=Number(t);Number.isNaN(e)&&(e=null),A(C,e)}l.addEventListener("wheel",fe,{passive:!1})})),u((()=>{var e,a;const r=null==(e=R.value)?void 0:e.input;null==r||r.setAttribute("aria-valuenow",`${null!=(a=U.currentValue)?a:""}`)})),G({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input-number",ref:"https://element-plus.org/en-US/component/input-number.html"},t((()=>!!k.label))),w({focus:()=>{var e,a;null==(a=null==(e=R.value)?void 0:e.focus)||a.call(e)},blur:()=>{var e,a;null==(a=null==(e=R.value)?void 0:e.blur)||a.call(e)}}),(e,a)=>(i(),s("div",{class:d([m(O).b(),m(O).m(m(ae)),m(O).is("disabled",m(re)),m(O).is("without-controls",!e.controls),m(O).is("controls-right",m(ee))]),onDragstart:a[0]||(a[0]=y((()=>{}),["prevent"]))},[e.controls?o((i(),s("span",{key:0,role:"button","aria-label":m(M)("el.inputNumber.decrease"),class:d([m(O).e("decrease"),m(O).is("disabled",m(W))]),onKeydown:c(se,["enter"])},[p(e.$slots,"decrease-icon",{},(()=>[b(m(V),null,{default:v((()=>[m(ee)?(i(),f(m(h),{key:0})):(i(),f(m(I),{key:1}))])),_:1})]))],42,Y)),[[m(J),se]]):N("v-if",!0),e.controls?o((i(),s("span",{key:1,role:"button","aria-label":m(M)("el.inputNumber.increase"),class:d([m(O).e("increase"),m(O).is("disabled",m(X))]),onKeydown:c(ie,["enter"])},[p(e.$slots,"increase-icon",{},(()=>[b(m(V),null,{default:v((()=>[m(ee)?(i(),f(m(S),{key:0})):(i(),f(m(j),{key:1}))])),_:1})]))],42,q)),[[m(J),ie]]):N("v-if",!0),b(m(g),{id:e.id,ref_key:"input",ref:R,type:"number",step:e.step,"model-value":m(te),placeholder:e.placeholder,readonly:e.readonly,disabled:m(re),size:m(ae),max:e.max,min:e.min,name:e.name,"aria-label":e.label||e.ariaLabel,"validate-event":!1,onKeydown:[c(y(ie,["prevent"]),["up"]),c(y(se,["prevent"]),["down"])],onBlur:be,onFocus:pe,onInput:de,onChange:ce},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],34))}}),[["__file","input-number.vue"]]));export{W as E};
