import{E as e}from"./el-input-number-BQjjWXj_.js";import{b as a,E as t}from"./index-D1OyjWme.js";import{b as l,d as i,u as o}from"./index-B3sKL47p.js";import{a as n}from"./use-global-config-DcVlDyFX.js";import{u as r}from"./index-kxe6IHwf.js";import{g as s}from"./types-Ci7ev57k.js";import{k as u,a as d,o as m,n as v,c as p,s as c,aB as g,w as f,m as b,b0 as y,bj as h,p as V,q as w,I as x,H as S,t as k,B,u as C,z as E,C as L,i as j,h as z,aY as N,G as P,J as T,F as M,y as D}from"./index-CyyLRP8W.js";import{U as I,I as F,C as X}from"./event-BwRzfsZt.js";import{_ as Y,w as _}from"./plugin-vue_export-helper-O3gUY6pX.js";import{E as A}from"./aria-BUADUvnR.js";import{d as U}from"./debounce-Dd9nEzpy.js";import{u as K}from"./index-CXKOYI6o.js";import{u as W,b as R,a as $}from"./use-form-item-CUGNa-4i.js";import{t as O,d as H}from"./scroll-3JEGyj3w.js";import{u as G}from"./index-BrMlOSMZ.js";import{u as J}from"./index-DjlyN6je.js";const q=Symbol("sliderContextKey"),Q=l({modelValue:{type:i([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:n,inputSize:n,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:i(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:i(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:a,default:"top"},marks:{type:i(Object)},validateEvent:{type:Boolean,default:!0},...r(["ariaLabel"])}),Z=e=>s(e)||u(e)&&e.every(s),ee={[I]:Z,[F]:Z,[X]:Z},ae=(e,a,t)=>{const{form:l,formItem:i}=W(),o=c(),n=d(),r=d(),s={firstButton:n,secondButton:r},u=p((()=>e.disabled||(null==l?void 0:l.disabled)||!1)),m=p((()=>Math.min(a.firstValue,a.secondValue))),g=p((()=>Math.max(a.firstValue,a.secondValue))),f=p((()=>e.range?100*(g.value-m.value)/(e.max-e.min)+"%":100*(a.firstValue-e.min)/(e.max-e.min)+"%")),b=p((()=>e.range?100*(m.value-e.min)/(e.max-e.min)+"%":"0%")),y=p((()=>e.vertical?{height:e.height}:{})),h=p((()=>e.vertical?{height:f.value,bottom:b.value}:{width:f.value,left:b.value})),V=()=>{o.value&&(a.sliderSize=o.value["client"+(e.vertical?"Height":"Width")])},w=t=>{const l=(t=>{const l=e.min+t*(e.max-e.min)/100;if(!e.range)return n;let i;return i=Math.abs(m.value-l)<Math.abs(g.value-l)?a.firstValue<a.secondValue?"firstButton":"secondButton":a.firstValue>a.secondValue?"firstButton":"secondButton",s[i]})(t);return l.value.setPosition(t),l},x=e=>{t(I,e),t(F,e)},S=async()=>{await v(),t(X,e.range?[m.value,g.value]:e.modelValue)},k=t=>{var l,i,n,r,s,d;if(u.value||a.dragging)return;V();let m=0;if(e.vertical){const e=null!=(n=null==(i=null==(l=t.touches)?void 0:l.item(0))?void 0:i.clientY)?n:t.clientY;m=(o.value.getBoundingClientRect().bottom-e)/a.sliderSize*100}else{m=((null!=(d=null==(s=null==(r=t.touches)?void 0:r.item(0))?void 0:s.clientX)?d:t.clientX)-o.value.getBoundingClientRect().left)/a.sliderSize*100}return m<0||m>100?void 0:w(m)};return{elFormItem:i,slider:o,firstButton:n,secondButton:r,sliderDisabled:u,minValue:m,maxValue:g,runwayStyle:y,barStyle:h,resetSize:V,setPosition:w,emitChange:S,onSliderWrapperPrevent:e=>{var a,t;((null==(a=s.firstButton.value)?void 0:a.dragging)||(null==(t=s.secondButton.value)?void 0:t.dragging))&&e.preventDefault()},onSliderClick:e=>{k(e)&&S()},onSliderDown:async e=>{const a=k(e);a&&(await v(),a.value.onButtonDown(e))},setFirstValue:t=>{a.firstValue=t,x(e.range?[m.value,g.value]:t)},setSecondValue:t=>{a.secondValue=t,e.range&&x([m.value,g.value])}}},{left:te,down:le,right:ie,up:oe,home:ne,end:re,pageUp:se,pageDown:ue}=A,de=(e,a,t)=>{const{disabled:l,min:i,max:o,step:n,showTooltip:r,precision:s,sliderSize:u,formatTooltip:m,emitChange:c,resetSize:b,updateDragging:y}=g(q),{tooltip:h,tooltipVisible:V,formatValue:w,displayTooltip:x,hideTooltip:S}=((e,a,t)=>{const l=d(),i=d(!1),o=p((()=>a.value instanceof Function)),n=p((()=>o.value&&a.value(e.modelValue)||e.modelValue)),r=U((()=>{t.value&&(i.value=!0)}),50),s=U((()=>{t.value&&(i.value=!1)}),50);return{tooltip:l,tooltipVisible:i,formatValue:n,displayTooltip:r,hideTooltip:s}})(e,m,r),k=d(),B=p((()=>(e.modelValue-i.value)/(o.value-i.value)*100+"%")),C=p((()=>e.vertical?{bottom:B.value}:{left:B.value})),E=e=>{l.value||(a.newPosition=Number.parseFloat(B.value)+e/(o.value-i.value)*100,P(a.newPosition),c())},L=e=>{let a,t;return e.type.startsWith("touch")?(t=e.touches[0].clientY,a=e.touches[0].clientX):(t=e.clientY,a=e.clientX),{clientX:a,clientY:t}},j=t=>{a.dragging=!0,a.isClick=!0;const{clientX:l,clientY:i}=L(t);e.vertical?a.startY=i:a.startX=l,a.startPosition=Number.parseFloat(B.value),a.newPosition=a.startPosition},z=t=>{if(a.dragging){let l;a.isClick=!1,x(),b();const{clientX:i,clientY:o}=L(t);e.vertical?(a.currentY=o,l=(a.startY-a.currentY)/u.value*100):(a.currentX=i,l=(a.currentX-a.startX)/u.value*100),a.newPosition=a.startPosition+l,P(a.newPosition)}},N=()=>{a.dragging&&(setTimeout((()=>{a.dragging=!1,a.hovering||S(),a.isClick||P(a.newPosition),c()}),0),window.removeEventListener("mousemove",z),window.removeEventListener("touchmove",z),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N),window.removeEventListener("contextmenu",N))},P=async l=>{if(null===l||Number.isNaN(+l))return;l<0?l=0:l>100&&(l=100);const r=100/((o.value-i.value)/n.value);let u=Math.round(l/r)*r*(o.value-i.value)*.01+i.value;u=Number.parseFloat(u.toFixed(s.value)),u!==e.modelValue&&t(I,u),a.dragging||e.modelValue===a.oldValue||(a.oldValue=e.modelValue),await v(),a.dragging&&x(),h.value.updatePopper()};return f((()=>a.dragging),(e=>{y(e)})),{disabled:l,button:k,tooltip:h,tooltipVisible:V,showTooltip:r,wrapperStyle:C,formatValue:w,handleMouseEnter:()=>{a.hovering=!0,x()},handleMouseLeave:()=>{a.hovering=!1,a.dragging||S()},onButtonDown:e=>{l.value||(e.preventDefault(),j(e),window.addEventListener("mousemove",z),window.addEventListener("touchmove",z),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),window.addEventListener("contextmenu",N),k.value.focus())},onKeyDown:e=>{let a=!0;[te,le].includes(e.key)?E(-n.value):[ie,oe].includes(e.key)?E(n.value):e.key===ne?l.value||(P(0),c()):e.key===re?l.value||(P(100),c()):e.key===ue?E(4*-n.value):e.key===se?E(4*n.value):a=!1,a&&e.preventDefault()},setPosition:P}},me=l({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:a,default:"top"}}),ve={[I]:e=>s(e)},pe=["tabindex"],ce=b({name:"ElSliderButton"});var ge=Y(b({...ce,props:me,emits:ve,setup(e,{expose:a,emit:l}){const i=e,n=o("slider"),r=y({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),{disabled:s,button:u,tooltip:d,showTooltip:m,tooltipVisible:v,wrapperStyle:p,formatValue:c,handleMouseEnter:g,handleMouseLeave:f,onButtonDown:b,onKeyDown:j,setPosition:z}=de(i,r,l),{hovering:N,dragging:P}=h(r);return a({onButtonDown:b,onKeyDown:j,setPosition:z,hovering:N,dragging:P}),(e,a)=>(V(),w("div",{ref_key:"button",ref:u,class:E([C(n).e("button-wrapper"),{hover:C(N),dragging:C(P)}]),style:L(C(p)),tabindex:C(s)?-1:0,onMouseenter:a[0]||(a[0]=(...e)=>C(g)&&C(g)(...e)),onMouseleave:a[1]||(a[1]=(...e)=>C(f)&&C(f)(...e)),onMousedown:a[2]||(a[2]=(...e)=>C(b)&&C(b)(...e)),onTouchstart:a[3]||(a[3]=(...e)=>C(b)&&C(b)(...e)),onFocus:a[4]||(a[4]=(...e)=>C(g)&&C(g)(...e)),onBlur:a[5]||(a[5]=(...e)=>C(f)&&C(f)(...e)),onKeydown:a[6]||(a[6]=(...e)=>C(j)&&C(j)(...e))},[x(C(t),{ref_key:"tooltip",ref:d,visible:C(v),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!C(m),persistent:""},{content:S((()=>[k("span",null,B(C(c)),1)])),default:S((()=>[k("div",{class:E([C(n).e("button"),{hover:C(N),dragging:C(P)}])},null,2)])),_:1},8,["visible","placement","popper-class","disabled"])],46,pe))}}),[["__file","button.vue"]]);var fe=b({name:"ElSliderMarker",props:l({mark:{type:i([String,Object]),default:void 0}}),setup(e){const a=o("slider"),t=p((()=>j(e.mark)?e.mark:e.mark.label)),l=p((()=>j(e.mark)?void 0:e.mark.style));return()=>z("div",{class:a.e("marks-text"),style:l.value},t.value)}});const be=["id","role","aria-label","aria-labelledby"],ye={key:1},he=b({name:"ElSlider"});const Ve=_(Y(b({...he,props:Q,emits:ee,setup(a,{expose:t,emit:l}){const i=a,n=o("slider"),{t:r}=K(),s=y({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:u,slider:c,firstButton:g,secondButton:b,sliderDisabled:S,minValue:B,maxValue:j,runwayStyle:z,barStyle:X,resetSize:Y,emitChange:_,onSliderWrapperPrevent:A,onSliderClick:U,onSliderDown:W,setFirstValue:Q,setSecondValue:Z}=ae(i,s,l),{stops:ee,getStopStyle:te}=((e,a,t,l)=>({stops:p((()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const i=(e.max-e.min)/e.step,o=100*e.step/(e.max-e.min),n=Array.from({length:i-1}).map(((e,a)=>(a+1)*o));return e.range?n.filter((a=>a<100*(t.value-e.min)/(e.max-e.min)||a>100*(l.value-e.min)/(e.max-e.min))):n.filter((t=>t>100*(a.firstValue-e.min)/(e.max-e.min)))})),getStopStyle:a=>e.vertical?{bottom:`${a}%`}:{left:`${a}%`}}))(i,s,B,j),{inputId:le,isLabeledByFormItem:ie}=R(i,{formItemContext:u}),oe=$(),ne=p((()=>i.inputSize||oe.value)),re=p((()=>i.label||i.ariaLabel||r("el.slider.defaultLabel",{min:i.min,max:i.max}))),se=p((()=>i.range?i.rangeStartLabel||r("el.slider.defaultRangeStartLabel"):re.value)),ue=p((()=>i.formatValueText?i.formatValueText(Ve.value):`${Ve.value}`)),de=p((()=>i.rangeEndLabel||r("el.slider.defaultRangeEndLabel"))),me=p((()=>i.formatValueText?i.formatValueText(we.value):`${we.value}`)),ve=p((()=>[n.b(),n.m(oe.value),n.is("vertical",i.vertical),{[n.m("with-input")]:i.showInput}])),pe=(e=>p((()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort(((e,a)=>e-a)).filter((a=>a<=e.max&&a>=e.min)).map((a=>({point:a,position:100*(a-e.min)/(e.max-e.min),mark:e.marks[a]}))):[])))(i);((e,a,t,l,i,o)=>{const n=e=>{i(I,e),i(F,e)},r=()=>e.range?![t.value,l.value].every(((e,t)=>e===a.oldValue[t])):e.modelValue!==a.oldValue,s=()=>{var t,l;e.min>e.max&&O("Slider","min should not be greater than max.");const i=e.modelValue;e.range&&Array.isArray(i)?i[1]<e.min?n([e.min,e.min]):i[0]>e.max?n([e.max,e.max]):i[0]<e.min?n([e.min,i[1]]):i[1]>e.max?n([i[0],e.max]):(a.firstValue=i[0],a.secondValue=i[1],r()&&(e.validateEvent&&(null==(t=null==o?void 0:o.validate)||t.call(o,"change").catch((e=>H()))),a.oldValue=i.slice())):e.range||"number"!=typeof i||Number.isNaN(i)||(i<e.min?n(e.min):i>e.max?n(e.max):(a.firstValue=i,r()&&(e.validateEvent&&(null==(l=null==o?void 0:o.validate)||l.call(o,"change").catch((e=>H()))),a.oldValue=i)))};s(),f((()=>a.dragging),(e=>{e||s()})),f((()=>e.modelValue),((e,t)=>{a.dragging||Array.isArray(e)&&Array.isArray(t)&&e.every(((e,a)=>e===t[a]))&&a.firstValue===e[0]&&a.secondValue===e[1]||s()}),{deep:!0}),f((()=>[e.min,e.max]),(()=>{s()}))})(i,s,B,j,l,u);const ce=p((()=>{const e=[i.min,i.max,i.step].map((e=>{const a=`${e}`.split(".")[1];return a?a.length:0}));return Math.max.apply(null,e)})),{sliderWrapper:he}=((e,a,t)=>{const l=d();return m((async()=>{e.range?(Array.isArray(e.modelValue)?(a.firstValue=Math.max(e.min,e.modelValue[0]),a.secondValue=Math.min(e.max,e.modelValue[1])):(a.firstValue=e.min,a.secondValue=e.max),a.oldValue=[a.firstValue,a.secondValue]):("number"!=typeof e.modelValue||Number.isNaN(e.modelValue)?a.firstValue=e.min:a.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),a.oldValue=a.firstValue),G(window,"resize",t),await v(),t()})),{sliderWrapper:l}})(i,s,Y),{firstValue:Ve,secondValue:we,sliderSize:xe}=h(s);return N(q,{...h(i),sliderSize:xe,disabled:S,precision:ce,emitChange:_,resetSize:Y,updateDragging:e=>{s.dragging=e}}),J({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-slider",ref:"https://element-plus.org/en-US/component/slider.html"},p((()=>!!i.label))),t({onSliderClick:U}),(a,t)=>{var l,i;return V(),w("div",{id:a.range?C(le):void 0,ref_key:"sliderWrapper",ref:he,class:E(C(ve)),role:a.range?"group":void 0,"aria-label":a.range&&!C(ie)?C(re):void 0,"aria-labelledby":a.range&&C(ie)?null==(l=C(u))?void 0:l.labelId:void 0,onTouchstart:t[2]||(t[2]=(...e)=>C(A)&&C(A)(...e)),onTouchmove:t[3]||(t[3]=(...e)=>C(A)&&C(A)(...e))},[k("div",{ref_key:"slider",ref:c,class:E([C(n).e("runway"),{"show-input":a.showInput&&!a.range},C(n).is("disabled",C(S))]),style:L(C(z)),onMousedown:t[0]||(t[0]=(...e)=>C(W)&&C(W)(...e)),onTouchstart:t[1]||(t[1]=(...e)=>C(W)&&C(W)(...e))},[k("div",{class:E(C(n).e("bar")),style:L(C(X))},null,6),x(ge,{id:a.range?void 0:C(le),ref_key:"firstButton",ref:g,"model-value":C(Ve),vertical:a.vertical,"tooltip-class":a.tooltipClass,placement:a.placement,role:"slider","aria-label":a.range||!C(ie)?C(se):void 0,"aria-labelledby":!a.range&&C(ie)?null==(i=C(u))?void 0:i.labelId:void 0,"aria-valuemin":a.min,"aria-valuemax":a.range?C(we):a.max,"aria-valuenow":C(Ve),"aria-valuetext":C(ue),"aria-orientation":a.vertical?"vertical":"horizontal","aria-disabled":C(S),"onUpdate:modelValue":C(Q)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),a.range?(V(),P(ge,{key:0,ref_key:"secondButton",ref:b,"model-value":C(we),vertical:a.vertical,"tooltip-class":a.tooltipClass,placement:a.placement,role:"slider","aria-label":C(de),"aria-valuemin":C(Ve),"aria-valuemax":a.max,"aria-valuenow":C(we),"aria-valuetext":C(me),"aria-orientation":a.vertical?"vertical":"horizontal","aria-disabled":C(S),"onUpdate:modelValue":C(Z)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):T("v-if",!0),a.showStops?(V(),w("div",ye,[(V(!0),w(M,null,D(C(ee),((e,a)=>(V(),w("div",{key:a,class:E(C(n).e("stop")),style:L(C(te)(e))},null,6)))),128))])):T("v-if",!0),C(pe).length>0?(V(),w(M,{key:2},[k("div",null,[(V(!0),w(M,null,D(C(pe),((e,a)=>(V(),w("div",{key:a,style:L(C(te)(e.position)),class:E([C(n).e("stop"),C(n).e("marks-stop")])},null,6)))),128))]),k("div",{class:E(C(n).e("marks"))},[(V(!0),w(M,null,D(C(pe),((e,a)=>(V(),P(C(fe),{key:a,mark:e.mark,style:L(C(te)(e.position))},null,8,["mark","style"])))),128))],2)],64)):T("v-if",!0)],38),a.showInput&&!a.range?(V(),P(C(e),{key:0,ref:"input","model-value":C(Ve),class:E(C(n).e("input")),step:a.step,disabled:C(S),controls:a.showInputControls,min:a.min,max:a.max,debounce:a.debounce,size:C(ne),"onUpdate:modelValue":C(Q),onChange:C(_)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):T("v-if",!0)],42,be)}}}),[["__file","slider.vue"]]));export{Ve as E};
