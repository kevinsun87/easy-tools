import{u as e,a}from"./index-BrMlOSMZ.js";import{m as l,aB as t,a as s,c as r,j as o,bi as i,p as n,G as u,H as v,v as c,t as m,z as f,u as d,C as p,x as y,a1 as h,q as b,I as g,F as w,w as S,n as z,aY as x,b0 as _,o as E,aW as L,A as j,b5 as T,J as B,bJ as H}from"./index-CyyLRP8W.js";import{b as k,u as C,d as R}from"./index-B3sKL47p.js";import{_ as A,w as N}from"./plugin-vue_export-helper-O3gUY6pX.js";import{t as W}from"./scroll-3JEGyj3w.js";import{c as M,g as $}from"./types-Ci7ev57k.js";import{u as O}from"./index-kxe6IHwf.js";import{a as q}from"./style-BBQwFGbP.js";const P={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Y=Symbol("scrollbarContextKey"),G=k({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean});var I=A(l({__name:"thumb",props:G,setup(a){const l=a,b=t(Y),g=C("scrollbar");b||W("Thumb","can not inject scrollbar context");const w=s(),S=s(),z=s({}),x=s(!1);let _=!1,E=!1,L=M?document.onselectstart:null;const j=r((()=>P[l.vertical?"vertical":"horizontal"])),T=r((()=>(({move:e,size:a,bar:l})=>({[l.size]:a,transform:`translate${l.axis}(${e}%)`}))({size:l.size,move:l.move,bar:j.value}))),B=r((()=>w.value[j.value.offset]**2/b.wrapElement[j.value.scrollSize]/l.ratio/S.value[j.value.offset])),H=e=>{var a;if(e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;null==(a=window.getSelection())||a.removeAllRanges(),R(e);const l=e.currentTarget;l&&(z.value[j.value.axis]=l[j.value.offset]-(e[j.value.client]-l.getBoundingClientRect()[j.value.direction]))},k=e=>{if(!S.value||!w.value||!b.wrapElement)return;const a=100*(Math.abs(e.target.getBoundingClientRect()[j.value.direction]-e[j.value.client])-S.value[j.value.offset]/2)*B.value/w.value[j.value.offset];b.wrapElement[j.value.scroll]=a*b.wrapElement[j.value.scrollSize]/100},R=e=>{e.stopImmediatePropagation(),_=!0,document.addEventListener("mousemove",A),document.addEventListener("mouseup",N),L=document.onselectstart,document.onselectstart=()=>!1},A=e=>{if(!w.value||!S.value)return;if(!1===_)return;const a=z.value[j.value.axis];if(!a)return;const l=100*(-1*(w.value.getBoundingClientRect()[j.value.direction]-e[j.value.client])-(S.value[j.value.offset]-a))*B.value/w.value[j.value.offset];b.wrapElement[j.value.scroll]=l*b.wrapElement[j.value.scrollSize]/100},N=()=>{_=!1,z.value[j.value.axis]=0,document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",N),$(),E&&(x.value=!1)};o((()=>{$(),document.removeEventListener("mouseup",N)}));const $=()=>{document.onselectstart!==L&&(document.onselectstart=L)};return e(i(b,"scrollbarElement"),"mousemove",(()=>{E=!1,x.value=!!l.size})),e(i(b,"scrollbarElement"),"mouseleave",(()=>{E=!0,x.value=_})),(e,a)=>(n(),u(h,{name:d(g).b("fade"),persisted:""},{default:v((()=>[c(m("div",{ref_key:"instance",ref:w,class:f([d(g).e("bar"),d(g).is(d(j).key)]),onMousedown:k},[m("div",{ref_key:"thumb",ref:S,class:f(d(g).e("thumb")),style:p(d(T)),onMousedown:H},null,38)],34),[[y,e.always||x.value]])])),_:1},8,["name"]))}}),[["__file","thumb.vue"]]);var J=A(l({__name:"bar",props:k({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),setup(e,{expose:a}){const l=e,r=t(Y),o=s(0),i=s(0),u=s(""),v=s(""),c=s(1),m=s(1);return a({handleScroll:e=>{if(e){const a=e.offsetHeight-4,l=e.offsetWidth-4;i.value=100*e.scrollTop/a*c.value,o.value=100*e.scrollLeft/l*m.value}},update:()=>{const e=null==r?void 0:r.wrapElement;if(!e)return;const a=e.offsetHeight-4,t=e.offsetWidth-4,s=a**2/e.scrollHeight,o=t**2/e.scrollWidth,i=Math.max(s,l.minSize),n=Math.max(o,l.minSize);c.value=s/(a-s)/(i/(a-i)),m.value=o/(t-o)/(n/(t-n)),v.value=i+4<a?`${i}px`:"",u.value=n+4<t?`${n}px`:""}}),(e,a)=>(n(),b(w,null,[g(I,{move:o.value,ratio:m.value,size:u.value,always:e.always},null,8,["move","ratio","size","always"]),g(I,{move:i.value,ratio:c.value,size:v.value,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64))}}),[["__file","bar.vue"]]);const K=k({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:R([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...O(["ariaLabel","ariaOrientation"])}),X={scroll:({scrollTop:e,scrollLeft:a})=>[e,a].every($)},D=l({name:"ElScrollbar"});const F=N(A(l({...D,props:K,emits:X,setup(l,{expose:t,emit:o}){const i=l,c=C("scrollbar");let y,h;const g=s(),w=s(),k=s(),R=s(),A=r((()=>{const e={};return i.height&&(e.height=q(i.height)),i.maxHeight&&(e.maxHeight=q(i.maxHeight)),[i.wrapStyle,e]})),N=r((()=>[i.wrapClass,c.e("wrap"),{[c.em("wrap","hidden-default")]:!i.native}])),W=r((()=>[c.e("view"),i.viewClass])),M=()=>{var e;w.value&&(null==(e=R.value)||e.handleScroll(w.value),o("scroll",{scrollTop:w.value.scrollTop,scrollLeft:w.value.scrollLeft}))};const O=()=>{var e;null==(e=R.value)||e.update()};return S((()=>i.noresize),(l=>{l?(null==y||y(),null==h||h()):(({stop:y}=a(k,O)),h=e("resize",O))}),{immediate:!0}),S((()=>[i.maxHeight,i.height]),(()=>{i.native||z((()=>{var e;O(),w.value&&(null==(e=R.value)||e.handleScroll(w.value))}))})),x(Y,_({scrollbarElement:g,wrapElement:w})),E((()=>{i.native||z((()=>{O()}))})),L((()=>O())),t({wrapRef:w,update:O,scrollTo:function(e,a){H(e)?w.value.scrollTo(e):$(e)&&$(a)&&w.value.scrollTo(e,a)},setScrollTop:e=>{$(e)&&(w.value.scrollTop=e)},setScrollLeft:e=>{$(e)&&(w.value.scrollLeft=e)},handleScroll:M}),(e,a)=>(n(),b("div",{ref_key:"scrollbarRef",ref:g,class:f(d(c).b())},[m("div",{ref_key:"wrapRef",ref:w,class:f(d(N)),style:p(d(A)),onScroll:M},[(n(),u(T(e.tag),{id:e.id,ref_key:"resizeRef",ref:k,class:f(d(W)),style:p(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:v((()=>[j(e.$slots,"default")])),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),e.native?B("v-if",!0):(n(),u(J,{key:0,ref_key:"barRef",ref:R,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}}),[["__file","scrollbar.vue"]]));export{F as E};
