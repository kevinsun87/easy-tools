import{m as e,a as t,c as o,o as s,p as n,G as i,H as a,v as l,t as r,z as p,u,C as c,b5 as f,J as d,B as m,A as v,q as y,F as g,x as b,bH as x,I as h,a1 as C,l as j,i as k,r as I}from"./index-CyyLRP8W.js";import{u as _}from"./index-BrMlOSMZ.js";import{ElIcon as S}from"./index-D4GlTUBi.js";import{b as H,d as T}from"./index-B3sKL47p.js";import{i as B,a as E,C as L}from"./icon-Dsqoi_oS.js";import{_ as z,a as M}from"./plugin-vue_export-helper-O3gUY6pX.js";import{d as N}from"./use-global-config-DcVlDyFX.js";import{E as w}from"./aria-BUADUvnR.js";import{u as A,c as F,j as $}from"./types-Ci7ev57k.js";import"./style-BBQwFGbP.js";import"./todo-nv2WtoEp.js";import"./index-CXKOYI6o.js";import"./_baseGet-DEcaJYAt.js";import"./isSymbol-Bt1TyP4H.js";import"./index-CB1eEFAV.js";const q=["success","info","warning","error"],G=H({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:B},id:{type:String,default:""},message:{type:T([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:T(Function),default:()=>{}},onClose:{type:T(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...q,""],default:""},zIndex:Number}),O={destroy:()=>!0},D=["id"],J=["textContent"],U={key:0},W=["innerHTML"],Z=e({name:"ElNotification"});var R=z(e({...Z,props:G,emits:O,setup(e,{expose:j}){const k=e,{ns:I,zIndex:H}=N("notification"),{nextZIndex:T,currentZIndex:B}=H,{Close:z}=L,M=t(!1);let F;const $=o((()=>{const e=k.type;return e&&E[k.type]?I.m(e):""})),q=o((()=>k.type&&E[k.type]||k.icon)),G=o((()=>k.position.endsWith("right")?"right":"left")),O=o((()=>k.position.startsWith("top")?"top":"bottom")),Z=o((()=>{var e;return{[O.value]:`${k.offset}px`,zIndex:null!=(e=k.zIndex)?e:B.value}}));function R(){k.duration>0&&({stop:F}=A((()=>{M.value&&P()}),k.duration))}function K(){null==F||F()}function P(){M.value=!1}return s((()=>{R(),T(),M.value=!0})),_(document,"keydown",(function({code:e}){e===w.delete||e===w.backspace?K():e===w.esc?M.value&&P():R()})),j({visible:M,close:P}),(e,t)=>(n(),i(C,{name:u(I).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[1]||(t[1]=t=>e.$emit("destroy")),persisted:""},{default:a((()=>[l(r("div",{id:e.id,class:p([u(I).b(),e.customClass,u(G)]),style:c(u(Z)),role:"alert",onMouseenter:K,onMouseleave:R,onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},[u(q)?(n(),i(u(S),{key:0,class:p([u(I).e("icon"),u($)])},{default:a((()=>[(n(),i(f(u(q))))])),_:1},8,["class"])):d("v-if",!0),r("div",{class:p(u(I).e("group"))},[r("h2",{class:p(u(I).e("title")),textContent:m(e.title)},null,10,J),l(r("div",{class:p(u(I).e("content")),style:c(e.title?void 0:{margin:0})},[v(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(n(),y(g,{key:1},[d(" Caution here, message could've been compromised, never use user's input as message "),r("p",{innerHTML:e.message},null,8,W)],2112)):(n(),y("p",U,m(e.message),1))]))],6),[[b,e.message]]),e.showClose?(n(),i(u(S),{key:0,class:p(u(I).e("closeBtn")),onClick:x(P,["stop"])},{default:a((()=>[h(u(z))])),_:1},8,["class","onClick"])):d("v-if",!0)],2)],46,D),[[b,M.value]])])),_:3},8,["name","onBeforeLeave"]))}}),[["__file","notification.vue"]]);const K={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]};let P=1;const Q=function(e={},t=null){if(!F)return{close:()=>{}};("string"==typeof e||j(e))&&(e={message:e});const o=e.position||"top-right";let s=e.offset||0;K[o].forEach((({vm:e})=>{var t;s+=((null==(t=e.el)?void 0:t.offsetHeight)||0)+16})),s+=16;const n="notification_"+P++,i=e.onClose,a={...e,offset:s,id:n,onClose:()=>{!function(e,t,o){const s=K[t],n=s.findIndex((({vm:t})=>{var o;return(null==(o=t.component)?void 0:o.props.id)===e}));if(-1===n)return;const{vm:i}=s[n];if(!i)return;null==o||o(i);const a=i.el.offsetHeight,l=t.split("-")[0];s.splice(n,1);const r=s.length;if(r<1)return;for(let p=n;p<r;p++){const{el:e,component:t}=s[p].vm,o=Number.parseInt(e.style[l],10)-a-16;t.props.offset=o}}(n,o,i)}};let l=document.body;$(e.appendTo)?l=e.appendTo:k(e.appendTo)&&(l=document.querySelector(e.appendTo)),$(l)||(l=document.body);const r=document.createElement("div"),p=h(R,a,j(a.message)?{default:()=>a.message}:null);return p.appContext=null!=t?t:Q._context,p.props.onDestroy=()=>{I(null,r)},I(p,r),K[o].push({vm:p}),l.appendChild(r.firstElementChild),{close:()=>{p.component.exposed.visible.value=!1}}};q.forEach((e=>{Q[e]=(t={})=>(("string"==typeof t||j(t))&&(t={message:t}),Q({...t,type:e}))})),Q.closeAll=function(){for(const e of Object.values(K))e.forEach((({vm:e})=>{e.component.exposed.visible.value=!1}))},Q._context=null;const V=M(Q,"$notify");export{V as ElNotification,V as default,O as notificationEmits,G as notificationProps,q as notificationTypes};
