import{a as e,g as t,s as a,w as o,d as n,i as l,m as s,bn as i,bs as r,c as u,n as p,o as d,bi as c,p as f,q as m,J as v,F as x,z as g,u as b,A as y,t as h,G as w,H as S,b5 as z,K as k,I as j,bH as C,N as I,B as F,C as B,bJ as $}from"./index-CyyLRP8W.js";import{u as E,a as P}from"./index-BrMlOSMZ.js";import{ElIcon as N}from"./index-D4GlTUBi.js";import{a4 as _,a5 as R,d as V}from"./todo-nv2WtoEp.js";import{c as M,g as A,m as H}from"./types-Ci7ev57k.js";import{b as T,d as K,u as L}from"./index-B3sKL47p.js";import{a as O}from"./use-global-config-DcVlDyFX.js";import{i as W,V as J}from"./icon-Dsqoi_oS.js";import{m as G}from"./typescript-CRqm1_SZ.js";import{u as U}from"./index-kxe6IHwf.js";import{U as q}from"./event-BwRzfsZt.js";import{_ as D,w as Y}from"./plugin-vue_export-helper-O3gUY6pX.js";import{u as Q}from"./index-DsFsGggn.js";import{u as X,b as Z,a as ee,c as te}from"./use-form-item-CUGNa-4i.js";import{d as ae}from"./scroll-3JEGyj3w.js";import{u as oe}from"./index-DjlyN6je.js";const ne=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function le(l,{afterFocus:s,beforeBlur:i,afterBlur:r}={}){const u=t(),{emit:p}=u,d=a(),c=e(!1);return o(d,(e=>{e&&e.setAttribute("tabindex","-1")})),E(d,"click",(()=>{var e;null==(e=l.value)||e.focus()})),{wrapperRef:d,isFocused:c,handleFocus:e=>{c.value||(c.value=!0,p("focus",e),null==s||s())},handleBlur:e=>{var t;!!n(i)&&i(e)||e.relatedTarget&&(null==(t=d.value)?void 0:t.contains(e.relatedTarget))||(c.value=!1,p("blur",e),null==r||r())}}}let se;const ie=`\n  height:0 !important;\n  visibility:hidden !important;\n  ${M&&/firefox/i.test(window.navigator.userAgent)?"":"overflow:hidden !important;"}\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`,re=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function ue(e,t=1,a){var o;se||(se=document.createElement("textarea"),document.body.appendChild(se));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:i}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:re.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:a}}(e);se.setAttribute("style",`${i};${ie}`),se.value=e.value||e.placeholder||"";let r=se.scrollHeight;const u={};"border-box"===s?r+=l:"content-box"===s&&(r-=n),se.value="";const p=se.scrollHeight-n;if(A(t)){let e=p*t;"border-box"===s&&(e=e+n+l),r=Math.max(e,r),u.minHeight=`${e}px`}if(A(a)){let e=p*a;"border-box"===s&&(e=e+n+l),r=Math.min(e,r)}return u.height=`${r}px`,null==(o=se.parentNode)||o.removeChild(se),se=void 0,u}const pe=T({id:{type:String,default:void 0},size:O,disabled:Boolean,modelValue:{type:K([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:K([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:W},prefixIcon:{type:W},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:K([Object,Array,String]),default:()=>G({})},autofocus:{type:Boolean,default:!1},...U(["ariaLabel"])}),de={[q]:e=>l(e),input:e=>l(e),change:e=>l(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},ce=["role"],fe=["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],me=["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],ve=s({name:"ElInput",inheritAttrs:!1});const xe=Y(D(s({...ve,props:pe,emits:de,setup(t,{expose:n,emit:l}){const s=t,E=i(),A=r(),T=u((()=>{const e={};return"combobox"===s.containerRole&&(e["aria-haspopup"]=E["aria-haspopup"],e["aria-owns"]=E["aria-owns"],e["aria-expanded"]=E["aria-expanded"]),e})),K=u((()=>["textarea"===s.type?re.b():ie.b(),ie.m(Y.value),ie.is("disabled",se.value),ie.is("exceed",Ve.value),{[ie.b("group")]:A.prepend||A.append,[ie.m("prefix")]:A.prefix||s.prefixIcon,[ie.m("suffix")]:A.suffix||s.suffixIcon||s.clearable||s.showPassword,[ie.bm("suffix","password-clear")]:Pe.value&&Ne.value,[ie.b("hidden")]:"hidden"===s.type},E.class])),O=u((()=>[ie.e("wrapper"),ie.is("focus",Se.value)])),W=Q({excludeKeys:u((()=>Object.keys(T.value)))}),{form:G,formItem:U}=X(),{inputId:D}=Z(s,{formItemContext:U}),Y=ee(),se=te(),ie=L("input"),re=L("textarea"),pe=a(),de=a(),ve=e(!1),xe=e(!1),ge=e(!1),be=e(),ye=a(s.inputStyle),he=u((()=>pe.value||de.value)),{wrapperRef:we,isFocused:Se,handleFocus:ze,handleBlur:ke}=le(he,{afterBlur(){var e;s.validateEvent&&(null==(e=null==U?void 0:U.validate)||e.call(U,"blur").catch((e=>ae())))}}),je=u((()=>{var e;return null!=(e=null==G?void 0:G.statusIcon)&&e})),Ce=u((()=>(null==U?void 0:U.validateState)||"")),Ie=u((()=>Ce.value&&J[Ce.value])),Fe=u((()=>ge.value?_:R)),Be=u((()=>[E.style])),$e=u((()=>[s.inputStyle,ye.value,{resize:s.resize}])),Ee=u((()=>H(s.modelValue)?"":String(s.modelValue))),Pe=u((()=>s.clearable&&!se.value&&!s.readonly&&!!Ee.value&&(Se.value||ve.value))),Ne=u((()=>s.showPassword&&!se.value&&!s.readonly&&!!Ee.value&&(!!Ee.value||Se.value))),_e=u((()=>s.showWordLimit&&!!s.maxlength&&("text"===s.type||"textarea"===s.type)&&!se.value&&!s.readonly&&!s.showPassword)),Re=u((()=>Ee.value.length)),Ve=u((()=>!!_e.value&&Re.value>Number(s.maxlength))),Me=u((()=>!!A.suffix||!!s.suffixIcon||Pe.value||s.showPassword||_e.value||!!Ce.value&&je.value)),[Ae,He]=function(t){const a=e();return[function(){if(null==t.value)return;const{selectionStart:e,selectionEnd:o,value:n}=t.value;if(null==e||null==o)return;const l=n.slice(0,Math.max(0,e)),s=n.slice(Math.max(0,o));a.value={selectionStart:e,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==t.value||null==a.value)return;const{value:e}=t.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=a.value;if(null==o||null==n||null==l)return;let s=e.length;if(e.endsWith(n))s=e.length-n.length;else if(e.startsWith(o))s=o.length;else{const t=o[l-1],a=e.indexOf(t,l-1);-1!==a&&(s=a+1)}t.value.setSelectionRange(s,s)}]}(pe);P(de,(e=>{if(Ke(),!_e.value||"both"!==s.resize)return;const t=e[0],{width:a}=t.contentRect;be.value={right:`calc(100% - ${a+15+6}px)`}}));const Te=()=>{const{type:e,autosize:t}=s;if(M&&"textarea"===e&&de.value)if(t){const e=$(t)?t.minRows:void 0,a=$(t)?t.maxRows:void 0,o=ue(de.value,e,a);ye.value={overflowY:"hidden",...o},p((()=>{de.value.offsetHeight,ye.value=o}))}else ye.value={minHeight:ue(de.value).minHeight}},Ke=(e=>{let t=!1;return()=>{var a;if(t||!s.autosize)return;null===(null==(a=de.value)?void 0:a.offsetParent)||(e(),t=!0)}})(Te),Le=()=>{const e=he.value,t=s.formatter?s.formatter(Ee.value):Ee.value;e&&e.value!==t&&(e.value=t)},Oe=async e=>{Ae();let{value:t}=e.target;s.formatter&&(t=s.parser?s.parser(t):t),xe.value||(t!==Ee.value?(l(q,t),l("input",t),await p(),Le(),He()):Le())},We=e=>{l("change",e.target.value)},Je=e=>{l("compositionstart",e),xe.value=!0},Ge=e=>{var t;l("compositionupdate",e);const a=null==(t=e.target)?void 0:t.value,o=a[a.length-1]||"";xe.value=!ne(o)},Ue=e=>{l("compositionend",e),xe.value&&(xe.value=!1,Oe(e))},qe=()=>{ge.value=!ge.value,De()},De=async()=>{var e;await p(),null==(e=he.value)||e.focus()},Ye=e=>{ve.value=!1,l("mouseleave",e)},Qe=e=>{ve.value=!0,l("mouseenter",e)},Xe=e=>{l("keydown",e)},Ze=()=>{l(q,""),l("change",""),l("clear"),l("input","")};return o((()=>s.modelValue),(()=>{var e;p((()=>Te())),s.validateEvent&&(null==(e=null==U?void 0:U.validate)||e.call(U,"change").catch((e=>ae())))})),o(Ee,(()=>Le())),o((()=>s.type),(async()=>{await p(),Le(),Te()})),d((()=>{!s.formatter&&s.parser,Le(),p(Te)})),oe({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input",ref:"https://element-plus.org/en-US/component/input.html"},u((()=>!!s.label))),n({input:pe,textarea:de,ref:he,textareaStyle:$e,autosize:c(s,"autosize"),focus:De,blur:()=>{var e;return null==(e=he.value)?void 0:e.blur()},select:()=>{var e;null==(e=he.value)||e.select()},clear:Ze,resizeTextarea:Te}),(e,t)=>(f(),m("div",k(b(T),{class:[b(K),{[b(ie).bm("group","append")]:e.$slots.append,[b(ie).bm("group","prepend")]:e.$slots.prepend}],style:b(Be),role:e.containerRole,onMouseenter:Qe,onMouseleave:Ye}),[v(" input "),"textarea"!==e.type?(f(),m(x,{key:0},[v(" prepend slot "),e.$slots.prepend?(f(),m("div",{key:0,class:g(b(ie).be("group","prepend"))},[y(e.$slots,"prepend")],2)):v("v-if",!0),h("div",{ref_key:"wrapperRef",ref:we,class:g(b(O))},[v(" prefix slot "),e.$slots.prefix||e.prefixIcon?(f(),m("span",{key:0,class:g(b(ie).e("prefix"))},[h("span",{class:g(b(ie).e("prefix-inner"))},[y(e.$slots,"prefix"),e.prefixIcon?(f(),w(b(N),{key:0,class:g(b(ie).e("icon"))},{default:S((()=>[(f(),w(z(e.prefixIcon)))])),_:1},8,["class"])):v("v-if",!0)],2)],2)):v("v-if",!0),h("input",k({id:b(D),ref_key:"input",ref:pe,class:b(ie).e("inner")},b(W),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?ge.value?"text":"password":e.type,disabled:b(se),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label||e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,onCompositionstart:Je,onCompositionupdate:Ge,onCompositionend:Ue,onInput:Oe,onFocus:t[0]||(t[0]=(...e)=>b(ze)&&b(ze)(...e)),onBlur:t[1]||(t[1]=(...e)=>b(ke)&&b(ke)(...e)),onChange:We,onKeydown:Xe}),null,16,fe),v(" suffix slot "),b(Me)?(f(),m("span",{key:1,class:g(b(ie).e("suffix"))},[h("span",{class:g(b(ie).e("suffix-inner"))},[b(Pe)&&b(Ne)&&b(_e)?v("v-if",!0):(f(),m(x,{key:0},[y(e.$slots,"suffix"),e.suffixIcon?(f(),w(b(N),{key:0,class:g(b(ie).e("icon"))},{default:S((()=>[(f(),w(z(e.suffixIcon)))])),_:1},8,["class"])):v("v-if",!0)],64)),b(Pe)?(f(),w(b(N),{key:1,class:g([b(ie).e("icon"),b(ie).e("clear")]),onMousedown:C(b(I),["prevent"]),onClick:Ze},{default:S((()=>[j(b(V))])),_:1},8,["class","onMousedown"])):v("v-if",!0),b(Ne)?(f(),w(b(N),{key:2,class:g([b(ie).e("icon"),b(ie).e("password")]),onClick:qe},{default:S((()=>[(f(),w(z(b(Fe))))])),_:1},8,["class"])):v("v-if",!0),b(_e)?(f(),m("span",{key:3,class:g(b(ie).e("count"))},[h("span",{class:g(b(ie).e("count-inner"))},F(b(Re))+" / "+F(e.maxlength),3)],2)):v("v-if",!0),b(Ce)&&b(Ie)&&b(je)?(f(),w(b(N),{key:4,class:g([b(ie).e("icon"),b(ie).e("validateIcon"),b(ie).is("loading","validating"===b(Ce))])},{default:S((()=>[(f(),w(z(b(Ie))))])),_:1},8,["class"])):v("v-if",!0)],2)],2)):v("v-if",!0)],2),v(" append slot "),e.$slots.append?(f(),m("div",{key:1,class:g(b(ie).be("group","append"))},[y(e.$slots,"append")],2)):v("v-if",!0)],64)):(f(),m(x,{key:1},[v(" textarea "),h("textarea",k({id:b(D),ref_key:"textarea",ref:de,class:[b(re).e("inner"),b(ie).is("focus",b(Se))]},b(W),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:b(se),readonly:e.readonly,autocomplete:e.autocomplete,style:b($e),"aria-label":e.label||e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,onCompositionstart:Je,onCompositionupdate:Ge,onCompositionend:Ue,onInput:Oe,onFocus:t[2]||(t[2]=(...e)=>b(ze)&&b(ze)(...e)),onBlur:t[3]||(t[3]=(...e)=>b(ke)&&b(ke)(...e)),onChange:We,onKeydown:Xe}),null,16,me),b(_e)?(f(),m("span",{key:0,style:B(be.value),class:g(b(ie).e("count"))},F(b(Re))+" / "+F(e.maxlength),7)):v("v-if",!0)],64))],16,ce))}}),[["__file","input.vue"]]));export{xe as E,ne as i,le as u};
