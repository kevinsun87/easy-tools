/* empty css            */import{E as a}from"./el-skeleton-item-VIGPGOxG.js";import{E as e}from"./el-empty-DywJ4AhX.js";import{e as l}from"./getAudio-D_HGGnT2.js";import{_ as s,p as t,q as o,t as i,A as n,L as r,a_ as d,aX as m,bb as u,a as c,b4 as f,v as g,u as p,I as y,J as v,H as h,F as b,y as j,z as _,G as x,C as F}from"./index-CyyLRP8W.js";import w from"./d-button-COA-aPKt.js";import{b as C}from"./baseRequest-CU9cTnaC.js";const L={},S={class:"d-fieldset f13 text-center"},$={class:"d-legend"},k=(a=>(d("data-v-6f72ff4b"),a=a(),m(),a))((()=>i("div",null,null,-1)));const z=s(L,[["render",function(a,e){return t(),o("fieldset",S,[i("legend",$,[n(a.$slots,"default",{},(()=>[r("已经到底了")]),!0)]),k])}],["__scopeId","data-v-6f72ff4b"]]),B={key:0,class:"ac"},E={class:"ac mt5",style:{clear:"both"}},I=i("span",null,"已经到底了",-1),q={__name:"d-infinite-scroll",props:{url:String,height:String,customClass:String,params:{type:Object,default:{page:1,size:16}},method:{type:String,default:"get"},btnColor:String,moreBtn:{type:Boolean,default:!0}},setup(s,{expose:d}){const m=s,L=u({loading:!1,isFinally:!1,moreLoading:!1}),S=c([]);async function $(a){if(L.isFinally)return;a?m.params.page=1:m.params.page+=1;let e=`${m.url}?${Object.values(m.params).join("")}`,s=await l.getItem(e),t=s.data||[];S.value=a?t:[...S.value,...t],(m.params.name||s.isExp)&&(L.moreLoading=!0,a?L.loading=!0:L.moreLoading=!0,C({url:m.url,method:m.method||"get",params:m.params}).then((s=>{let t=s.data||[];!m.params.name&&t.length&&l.set(e,t,36e6),S.value=a?t:[...S.value,...t],L.isFinally=s.count==S.value.length})).finally((()=>{L.moreLoading=!1,L.loading=!1})))}return $(!0),d({reload:function(a){L.isFinally=!1,$(a)},delete:function(a){S.value.splice(a,1)}}),(l,d)=>{const u=f("infinite-scroll");return g((t(),o("div",{class:"wallScroll d-scrollbar",style:F([{"overflow-x":"hidden","overflow-y":"auto"},`height:${m.height}`]),"infinite-scroll-distance":"50","infinite-scroll-delay":"100","infinite-scroll-immediate":!1},[n(l.$slots,"header"),p(L).loading||S.value.length?v("",!0):(t(),o("div",B,[y(p(e),{"image-size":100})])),i("div",{class:_(s.customClass)},[y(p(a),{loading:p(L).loading,rows:3,count:1,animated:""},{default:h((()=>[(t(!0),o(b,null,j(S.value,((a,e)=>n(l.$slots,"default",{row:a,index:e}))),256))])),_:3},8,["loading"])],2),i("p",E,[p(L).isFinally?(t(),x(z,{key:0},{default:h((()=>[I])),_:1})):v("",!0),!p(L).isFinally&&m.moreBtn?(t(),x(w,{key:1,color:s.btnColor,loading:p(L).moreLoading,onClick:d[0]||(d[0]=a=>$())},{default:h((()=>[r("加载更多")])),_:1},8,["color","loading"])):v("",!0)])],4)),[[u,$]])}}};export{z as D,q as _};
