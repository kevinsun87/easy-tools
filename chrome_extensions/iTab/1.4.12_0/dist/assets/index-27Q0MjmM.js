import{_ as e}from"./d-dialog-Dp99XzOL.js";import{m as o,p as t,q as l,t as a,_ as s,s as i,a as r,b0 as n,E as d,w as u,f as c,c as m,b3 as p,I as f,u as v,F as h,y as x,bH as j,z as g,G as w,b5 as b,B as y,v as k,by as V,L as Y,H as C,J as _,C as L,bF as M,a_ as D,aX as z}from"./index-CyyLRP8W.js";/* empty css            *//* empty css                  *//* empty css                   *//* empty css                 */import{E as A}from"./el-date-picker-CbJ3Cqz5.js";import"./el-scrollbar-BVpSQI8U.js";/* empty css                  */import"./css-DsIEOZKU.js";/* empty css                   */import{E as R}from"./el-empty-DywJ4AhX.js";import{N as B,U as I,ao as T,aj as U,S as E,n as H,ap as F}from"./todo-nv2WtoEp.js";import{D as S}from"./d-color-BJTG3bLp.js";import{d as O}from"./localforage-BVRgvwJc.js";import q from"./indexdb-D6yYQ1E4.js";import{SAVE_CONFIG as W}from"./save_config-BtHImbsT.js";import{d as G}from"./debounce-Dd9nEzpy.js";import{o as $}from"./orderBy-D-0tUlp4.js";import{E as J}from"./index-BPnMED6p.js";import{D as K}from"./Delete16Regular-DgH01z7r.js";import{A as N}from"./Add16Filled-BRoijLYp.js";import{E as P}from"./index-Bpip5WJa.js";import{E as Q}from"./index-CMn5lzXr.js";import"./el-dialog-BoL22f5R.js";import"./index-CdRnR6wp.js";import"./index-B3sKL47p.js";import"./scroll-3JEGyj3w.js";import"./style-BBQwFGbP.js";import"./types-Ci7ev57k.js";import"./vnode-CwyaGvUL.js";import"./index-D4GlTUBi.js";import"./plugin-vue_export-helper-O3gUY6pX.js";import"./use-dialog-0gmd-idO.js";import"./icon-Dsqoi_oS.js";import"./event-BwRzfsZt.js";import"./index-CB1eEFAV.js";import"./_baseGet-DEcaJYAt.js";import"./isSymbol-Bt1TyP4H.js";import"./focus-trap-D8QWET1-.js";import"./aria-BUADUvnR.js";import"./use-global-config-DcVlDyFX.js";import"./index-CXKOYI6o.js";import"./isUndefined-DgmxjSXK.js";import"./index-hc1PwDik.js";import"./index-DjlyN6je.js";import"./main-DJB5iAKQ.js";import"./modulepreload-polyfill-Dqv5PPZA.js";import"./getAudio-D_HGGnT2.js";/* empty css                                                 */import"./panel-time-pick-BONONaLY.js";import"./index-BrMlOSMZ.js";import"./index-D1OyjWme.js";import"./index-kxe6IHwf.js";import"./hasIn-y6DbaUwA.js";import"./constants-Dnj8X3EN.js";import"./index-BFuAB0_P.js";import"./use-form-item-CUGNa-4i.js";import"./isEqual-DOZxeYFr.js";import"./_baseIsEqual-DN6o0BQy.js";import"./index-Cdhz-ASE.js";import"./index-BvBbK8nS.js";import"./index-DHV32PmZ.js";import"./vue.runtime.esm-bundler-Ds1RV6_Q.js";import"./position-C03YnYn2.js";import"./public-api-DxRCcbRs.js";import"./baseRequest-CU9cTnaC.js";import"./userInfo-CZAB7rZN.js";import"./version-DYnJBHiW.js";import"./website-CoEF8fmW.js";import"./index-DvjFJXYU.js";import"./eventBus-BB4cUTPt.js";import"./_baseOrderBy-D-jl3rCR.js";import"./_baseIteratee-BaNfRxc9.js";import"./_baseFor-BgUEIYfv.js";import"./typescript-CRqm1_SZ.js";import"./index-DsFsGggn.js";import"./aria-C-hsWcn7.js";import"./validator-DvohupZ1.js";const X={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Z=[a("g",{fill:"none"},[a("path",{d:"M3 5.75A2.75 2.75 0 0 1 5.75 3h12.5A2.75 2.75 0 0 1 21 5.75v12.5A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75zm9.75 13.75h5.5c.69 0 1.25-.56 1.25-1.25v-5.5h-6.75v6.75zm-1.5-6.75H4.5v5.5c0 .69.56 1.25 1.25 1.25h5.5v-6.75zm1.5-1.5h6.75v-5.5c0-.69-.56-1.25-1.25-1.25h-5.5v6.75zm-1.5-6.75h-5.5c-.69 0-1.25.56-1.25 1.25v5.5h6.75V4.5z",fill:"currentColor"})],-1)],ee=o({name:"BorderAll24Regular",render:function(e,o){return t(),l("svg",X,Z)}}),oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},te=[a("g",{fill:"none"},[a("path",{d:"M21 6.25A3.25 3.25 0 0 0 17.75 3H6.25A3.25 3.25 0 0 0 3 6.25v11.5A3.25 3.25 0 0 0 6.25 21h4v-1.5h-4a1.75 1.75 0 0 1-1.75-1.75V8.5h15v9.25a1.75 1.75 0 0 1-1.75 1.75h-4V21h4A3.25 3.25 0 0 0 21 17.75V6.25zM6.25 4.5h11.5c.966 0 1.75.784 1.75 1.75V7h-15v-.75c0-.966.784-1.75 1.75-1.75zm7 7.25a1.25 1.25 0 1 1-2.5 0a1.25 1.25 0 0 1 2.5 0zm.502 6.56a.75.75 0 0 0 .996-1.12l-2.25-2a.75.75 0 0 0-.996 0l-2.25 2a.75.75 0 0 0 .996 1.12l1.002-.89v3.83a.75.75 0 1 0 1.5 0v-3.83l1.002.89z",fill:"currentColor"})],-1)],le=o({name:"CalendarToday24Regular",render:function(e,o){return t(),l("svg",oe,te)}}),ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},se=[a("g",{fill:"none"},[a("path",{d:"M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5zm0 1.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .966.784 1.75 1.75 1.75h11.5a1.75 1.75 0 0 0 1.75-1.75V6.25a1.75 1.75 0 0 0-1.75-1.75zM7.75 7a.75.75 0 0 1 .743.648l.007.102v8.5a.75.75 0 0 1-1.493.102L7 16.25v-8.5A.75.75 0 0 1 7.75 7z",fill:"currentColor"})],-1)],ie=o({name:"CalendarWeekStart24Regular",render:function(e,o){return t(),l("svg",ae,se)}}),re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ne=[a("g",{fill:"none"},[a("path",{d:"M2.75 18h12.5a.75.75 0 0 1 .102 1.493l-.102.007H2.75a.75.75 0 0 1-.102-1.494L2.75 18h12.5h-12.5zm0-6.5h18.5a.75.75 0 0 1 .102 1.493L21.25 13H2.75a.75.75 0 0 1-.102-1.493l.102-.007h18.5h-18.5zm0-6.497h15.5a.75.75 0 0 1 .102 1.493l-.102.007H2.75a.75.75 0 0 1-.102-1.493l.102-.007h15.5h-15.5z",fill:"currentColor"})],-1)],de=o({name:"List24Regular",render:function(e,o){return t(),l("svg",re,ne)}}),ue={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},ce=[a("g",{fill:"none"},[a("path",{d:"M13.5 3C7.701 3 3 7.701 3 13.5S7.701 24 13.5 24c2.45 0 4.703-.839 6.489-2.244l6.878 6.878a1.25 1.25 0 1 0 1.768-1.768l-6.879-6.878A10.455 10.455 0 0 0 24 13.5C24 7.701 19.299 3 13.5 3zm-8 10.5a8 8 0 1 1 16 0a8 8 0 0 1-16 0z",fill:"currentColor"})],-1)],me=o({name:"Search32Filled",render:function(e,o){return t(),l("svg",ue,ce)}}),pe=""+new URL("../audio/complete.mp3",import.meta.url).href,fe=e=>(D("data-v-f7266df1"),e=e(),z(),e),ve={class:"todo-wrap d-layout select-text"},he={class:"d-layout h-full"},xe={class:"d-layout-aside d-left-tabs pt30 pl-2 pr-2 flex flex-col",style:{"background-color":"var(--bg-card)",width:"200px"}},je={class:"flex-1 folder-body"},ge=["onClick"],we={class:"flex items-center h-full"},be={class:"d-icon f18 flex mr-1"},ye={class:"h-full"},ke={class:"d-flex-y"},Ve={class:"f12 total"},Ye=fe((()=>a("p",{class:"bt mt-1 pb-1",style:{"border-color":"rgba(var(--alpha-color), 0.1)"}},null,-1))),Ce=["onClick"],_e={class:"flex items-center h-full"},Le={class:"d-icon f16 flex mr-1"},Me=["onDblclick"],De={key:0,class:"w-full"},ze=["id","autofocus","onUpdate:modelValue"],Ae={class:"folder-item-tool d-flex-y"},Re={class:"f12 total"},Be=["onClick"],Ie={class:"d-icon mr-1 f16"},Te={class:"d-layout-content todo-content pr10 h-full",style:{"background-color":"var(--bg-info)"}},Ue={class:"b f20 mb-3 d-flex-between",style:{width:"calc(100% - 80px)"}},Ee={class:"f12",style:{"font-weight":"normal"}},He={class:"d-pointer title-more-list"},Fe={class:"d-icon title-more"},Se={key:0,class:"f12 pl20"},Oe=["onClick"],qe={class:"d-cell d-hidden d-main"},We={style:{width:"50px",height:"34px"}},Ge={class:"todo-add"},$e=fe((()=>a("span",{class:"toto-add-line"},null,-1))),Je=[fe((()=>a("source",{src:pe},null,-1)))],Ke={components:{BorderAll24Regular:ee,CalendarToday24Regular:le,CalendarWeekStart24Regular:ie,List24Regular:de}},Ne=s(Object.assign(Ke,{__name:"Content",setup(e){const o=B(),s=i(""),D=i("in-all"),z=i(!0),X=i([{name:"所有",id:"in-all",icon:"BorderAll24Regular"},{name:"今天",id:"in-today",icon:"CalendarToday24Regular"},{name:"最近7天",id:"in-week",icon:"CalendarWeekStart24Regular"}]),Z=i(X.value[0]),ee=r([]);q.get("todoFolder").then((e=>{ee.value=e||[{name:"待办事项",id:"in-plan"}]}));const oe=r(null),te=n({searchValue:"",inputValue:"",todoList:[],sortTodo:[]});function le(e){if(!e)return;let o=O(`${e} 23:59:59`).valueOf();return!!e&&O().valueOf()>o}const ae=r(null);(async()=>{let e=await q.get("todo");e||(e=H.get("todo"),await q.set("todo",e)),te.todoList=e})();const se=G((async e=>{q.set("todo",d(e))}),500),ie=G((async()=>{q.set("todoFolder",d(ee.value)),W("todoFolder")}),500);async function re(e){D.value=e.id,te.searchValue="",Z.value=e}function ne(){let e={name:"待办事项",id:F()};ee.value.push(e)}u((()=>te.todoList),(e=>{let t=pe(D.value,!z.value),l=$(t,["ut","done"],["asc"]);te.sortTodo=l,o.value=te.sortTodo.slice(0,5),se(e),W("todo")}),{deep:!0}),c((()=>{let e=[];e=te.searchValue?te.todoList.filter((e=>e.content.includes(te.searchValue))):pe(D.value,!z.value);let o=$(e,["ut","done"],["asc"]);te.sortTodo=o})),u((()=>ee.value),(e=>{ie()}),{deep:!0});const ue=()=>{if(!te.inputValue)return;let e=D.value;["in-all","in-today","in-week"].includes(D.value)&&(e="");let o={folderId:e,content:te.inputValue,expire:"",color:"",done:!1,ct:O().valueOf()};te.todoList.unshift(o),te.inputValue="",te.searchValue="",oe.value.scrollTop=0};function ce(){Q.confirm("清理已完成的待办，是否清除?","清除已完成的待办",{center:!0,type:"warning",cancelButtonText:"取消",confirmButtonText:"确认删除"}).then((async e=>{D.value="in-all";let o=await q.get("todo");te.todoList=o.filter((e=>!e.done))}))}function pe(e,o=!0){if(o){if("in-all"===e)return te.todoList.filter((e=>!e.done));if("in-today"===e){const e=O().format("YYYYMMDD");return te.todoList.filter((o=>!o.done&&O(o.ct).format("YYYYMMDD")===e))}if("in-week"===e){const e=O().subtract(7,"day").format("YYYYMMDD");return te.todoList.filter((o=>!o.done&&O(o.ct).format("YYYYMMDD")>e))}return te.todoList.filter((o=>!o.done&&o.folderId===e))}if("in-all"===e)return te.todoList;if("in-today"===e){const e=O().format("YYYYMMDD");return te.todoList.filter((o=>O(o.ct).format("YYYYMMDD")===e))}if("in-week"===e){const e=O().subtract(7,"day").format("YYYYMMDD");return te.todoList.filter((o=>O(o.ct).format("YYYYMMDD")>e))}return te.todoList.filter((o=>o.folderId===e))}function fe(e){return pe(e.id).length}const Ke=m((()=>100*(te.todoList||[]).filter((e=>e.done)).length/te.todoList.length+"%"));return(e,o)=>{const i=p("el-icon");return t(),l("div",ve,[a("div",he,[a("div",xe,[f(v(J),{maxlength:"10",modelValue:te.searchValue,"onUpdate:modelValue":o[0]||(o[0]=e=>te.searchValue=e),clearable:"","suffix-icon":v(me),placeholder:"Search"},null,8,["modelValue","suffix-icon"]),a("ul",je,[(t(!0),l(h,null,x(X.value,(e=>(t(),l("li",{onClick:j((o=>re(e)),["stop"]),key:e.id,class:g(["folder-item flex items-center justify-between pl-2 pr-2",{active:e.id===D.value}])},[a("span",we,[a("i",be,[(t(),w(b(e.icon)))]),a("i",ye,y(e.name),1)]),a("p",ke,[a("span",Ve,y(fe(e)),1)])],10,ge)))),128)),Ye,(t(!0),l(h,null,x(ee.value,(e=>(t(),l("li",{onClick:o=>re(e),key:e.id,class:g(["folder-item flex items-center justify-between pl-2 pr-2",{active:e.id===D.value}])},[a("span",_e,[a("i",Le,[f(v(de))]),a("i",{class:"h-full",onDblclick:j((o=>function(e,o){s.value=o.id,setTimeout((()=>{e.target.focus()}))}(o,e)),["stop"])},[s.value!=e.id?(t(),l("div",De,y(e.name),1)):k((t(),l("input",{key:1,onBlur:o[1]||(o[1]=e=>s.value=""),class:g([{isEdit:s.value==e.id},"w-full box-border d-sub"]),id:`todoinputId${e.id}`,autofocus:s.value!=e.id,"onUpdate:modelValue":o=>e.name=o},null,42,ze)),[[V,e.name]])],40,Me)]),a("p",Ae,[a("span",Re,y(fe(e)),1),a("span",{class:"tool d-icon f16",onClick:o=>function(e){let o=ee.value.findIndex((o=>o.id===e.id));ee.value.splice(o,1)}(e)},[f(v(K))],8,Be)])],10,Ce)))),128))]),a("div",{class:"pb-3 d-main d-flex-y add-btn",onClick:ne},[a("i",Ie,[f(v(N))]),Y(" 新建列表 ")])]),a("div",Te,[a("h2",Ue,[Y(y(Z.value.name)+" ",1),a("div",Ee,[f(v(P),{placement:"bottom",width:100,trigger:"click"},{reference:C((()=>[a("i",Fe,[f(v(I))])])),default:C((()=>[a("ul",He,[a("li",{class:"mb10",onClick:o[2]||(o[2]=e=>z.value=!z.value)},y(z.value?"隐藏":"显示")+"已完成 ",1),a("li",{onClick:ce},"清理已完成")])])),_:1})])]),te.todoList.length?_("",!0):(t(),l("div",Se,[f(v(R),{description:"赶快添加您的第一条待办吧"})])),a("ul",{tag:"ul",name:"list-complete1",ref_key:"todoRef",ref:oe,class:"todo-content-ul d-sub"},[(t(!0),l(h,null,x(te.sortTodo,((e,o)=>(t(),l("li",{class:"todo-content-li",key:e},[a("button",{class:g(["todo-check",{done:e.done}]),style:L({borderColor:e.color}),onClick:j((o=>(e=>{e.done=!e.done,e.done&&(ae.value.load(),ae.value.play())})(e)),["prevent"])},[f(i,{class:"todo-icon-check"},{default:C((()=>[f(v(T))])),_:1})],14,Oe),a("div",qe,[f(v(J),{autosize:{minRows:1,maxRows:10},type:"textarea",size:"small",class:g(["todo-text",{done:e.done}]),modelValue:e.content,"onUpdate:modelValue":o=>e.content=o},null,8,["class","modelValue","onUpdate:modelValue"]),f(v(A),{onChange:o=>e.focus=!1,clearable:!0,class:g(["item-expire",{isExpire:le(e.expire)}]),"value-format":"YYYY-MM-DD",size:"small",modelValue:e.expire,"onUpdate:modelValue":o=>e.expire=o,type:"date",style:{"--el-input-hover-border-color":"transparent","--el-input-focus-border-color":"transparent"},placeholder:"-"},null,8,["onChange","class","modelValue","onUpdate:modelValue"])]),a("div",We,[e.done?_("",!0):(t(),w(v(P),{key:0,placement:"bottom-end",width:200,trigger:"hover"},{reference:C((()=>[f(i,null,{default:C((()=>[f(v(I))])),_:1})])),default:C((()=>[a("div",null,[f(S,{title:"优先级",custom:!1,modelValue:e.color,"onUpdate:modelValue":o=>e.color=o,colors:["#e03131","#ffb000","#4772fa","var(--d-sub)"]},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024)),f(i,{class:"ml10 mr10",title:"删除",onClick:o=>(e=>{let o=te.todoList.findIndex((o=>o===e));te.todoList.splice(o,1)})(e)},{default:C((()=>[f(v(U))])),_:2},1032,["onClick"])])])))),128))],512),a("div",Ge,[f(i,{size:16,class:"todo-add-icon d-sub"},{default:C((()=>[f(v(E))])),_:1}),k(a("input",{autofocus:"autofocus",class:"todo-add-input bb",maxlength:"200",type:"text",onKeyup:M(ue,["enter"]),placeholder:"添加任务","onUpdate:modelValue":o[3]||(o[3]=e=>te.inputValue=e)},null,544),[[V,te.inputValue,void 0,{trim:!0}]]),$e])])]),a("div",{class:"todo-progress",style:L({width:Ke.value})},[a("audio",{class:"d-hidden",ref_key:"refAudio",ref:ae},Je,512)],4)])}}}),[["__scopeId","data-v-f7266df1"]]),Pe={name:"appTodo"},Qe=Object.assign(Pe,{setup:o=>(o,l)=>(t(),w(e,{height:"600px"},{default:C((()=>[f(Ne)])),_:1}))});export{Qe as default};
