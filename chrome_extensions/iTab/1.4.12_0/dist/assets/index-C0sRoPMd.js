import{m as t,p as e,q as s,t as i,_ as o,s as l,b0 as a,w as n,G as r,H as d,L as p,F as m,y as c,z as u,u as f,a2 as j,B as v,I as x,v as y,x as g,J as w,a_ as b,aX as I}from"./index-CyyLRP8W.js";import{_}from"./d-dialog-Dp99XzOL.js";/* empty css            *//* empty css                 */import"./css-DsIEOZKU.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                   */import{O as h,n as k,r as B,S as Y,P as C,q as L}from"./todo-nv2WtoEp.js";import{SAVE_CONFIG as O}from"./save_config-BtHImbsT.js";import{d as z}from"./localforage-BVRgvwJc.js";import{t as D}from"./timeFormat-qtCApzlE.js";import H from"./indexdb-D6yYQ1E4.js";import{o as M}from"./orderBy-D-0tUlp4.js";import{d as E}from"./debounce-Dd9nEzpy.js";import{ElIcon as F}from"./index-D4GlTUBi.js";import{D as N}from"./Delete16Regular-DgH01z7r.js";import{E as V}from"./index-BPnMED6p.js";import{E as q}from"./index-Bpip5WJa.js";import{E as R}from"./index-CMn5lzXr.js";import"./el-dialog-BoL22f5R.js";import"./index-CdRnR6wp.js";import"./index-B3sKL47p.js";import"./scroll-3JEGyj3w.js";import"./style-BBQwFGbP.js";import"./types-Ci7ev57k.js";import"./vnode-CwyaGvUL.js";import"./use-dialog-0gmd-idO.js";import"./icon-Dsqoi_oS.js";import"./event-BwRzfsZt.js";import"./index-CB1eEFAV.js";import"./_baseGet-DEcaJYAt.js";import"./isSymbol-Bt1TyP4H.js";import"./focus-trap-D8QWET1-.js";import"./plugin-vue_export-helper-O3gUY6pX.js";import"./aria-BUADUvnR.js";import"./use-global-config-DcVlDyFX.js";import"./index-CXKOYI6o.js";import"./isUndefined-DgmxjSXK.js";import"./index-hc1PwDik.js";import"./index-DjlyN6je.js";import"./main-DJB5iAKQ.js";import"./modulepreload-polyfill-Dqv5PPZA.js";import"./getAudio-D_HGGnT2.js";/* empty css                                                 */import"./public-api-DxRCcbRs.js";import"./baseRequest-CU9cTnaC.js";import"./userInfo-CZAB7rZN.js";import"./version-DYnJBHiW.js";import"./website-CoEF8fmW.js";import"./index-DvjFJXYU.js";import"./eventBus-BB4cUTPt.js";import"./_baseOrderBy-D-jl3rCR.js";import"./_baseIteratee-BaNfRxc9.js";import"./_baseIsEqual-DN6o0BQy.js";import"./hasIn-y6DbaUwA.js";import"./_baseFor-BgUEIYfv.js";import"./index-BrMlOSMZ.js";import"./typescript-CRqm1_SZ.js";import"./index-kxe6IHwf.js";import"./index-DsFsGggn.js";import"./use-form-item-CUGNa-4i.js";import"./constants-Dnj8X3EN.js";import"./index-D1OyjWme.js";import"./index-BvBbK8nS.js";import"./aria-C-hsWcn7.js";import"./validator-DvohupZ1.js";const P={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},S=[i("g",{fill:"none"},[i("path",{d:"M10.059 2.445a1.5 1.5 0 0 0-2.386.354l-2.02 3.79l-2.811.937a.5.5 0 0 0-.196.828L4.793 10.5l-2.647 2.647L2 14l.854-.146L5.5 11.207l2.146 2.147a.5.5 0 0 0 .828-.196l.937-2.81l3.779-2.024a1.5 1.5 0 0 0 .354-2.38L10.06 2.444zm-1.504.824a.5.5 0 0 1 .796-.118l3.485 3.498a.5.5 0 0 1-.118.794L8.764 9.559a.5.5 0 0 0-.238.283l-.744 2.233l-3.856-3.856l2.232-.744a.5.5 0 0 0 .283-.24L8.555 3.27z",fill:"currentColor"})],-1)],G=t({name:"Pin16Regular",render:function(t,i){return e(),s("svg",P,S)}}),K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},U=[i("g",{fill:"none"},[i("path",{d:"M9.56 10.267l4.586 4.587a.5.5 0 0 0 .708-.708l-13-13a.5.5 0 1 0-.708.708l4.586 4.585l-.08.15l-2.81.937a.5.5 0 0 0-.196.828L4.793 10.5l-2.647 2.646L2 14l.854-.146L5.5 11.207l2.146 2.147a.5.5 0 0 0 .828-.196l.937-2.811l.15-.08zm-.739-.739l-.057.031a.5.5 0 0 0-.238.283l-.744 2.232L3.926 8.22l2.232-.745a.5.5 0 0 0 .283-.239l.03-.056l2.35 2.35zm3.897-2.085l-2.054 1.1l.738.738l1.788-.957a1.5 1.5 0 0 0 .354-2.381L10.06 2.445a1.5 1.5 0 0 0-2.386.353l-.957 1.796l.739.74l1.1-2.065a.5.5 0 0 1 .796-.118l3.485 3.498a.5.5 0 0 1-.118.794z",fill:"currentColor"})],-1)],A=t({name:"PinOff16Regular",render:function(t,i){return e(),s("svg",K,U)}}),J={class:"ac mt50 f14"};const T=o({},[["render",function(t,i){return e(),s("div",J,"暂无内容")}]]),X=t=>(b("data-v-ef391045"),t=t(),I(),t),$={class:"d-layout app-notes h-full"},Q={class:"d-layout-aside notes-tabs",width:"200px",style:{"background-color":"var(--bg-input)"}},W={class:"f18 bb pl20"},Z={class:"relative notes-sort fr pr10"},tt=["onClick"],et={class:"f14 b d-elip"},st={class:"f12 d-inline d-sub"},it=["onClick"],ot=["title","onClick"],lt={class:"d-layout-content h-full p10 d-bg-input"},at={key:0,class:"h-full"},nt={class:"d-flex-between f12 d-sub mt5"},rt=X((()=>i("img",{style:{width:"180px"},src:"https://files.codelife.cc/itab/app-jijian.png"},null,-1))),dt=X((()=>i("span",null,"在手机上使用备忘录",-1))),pt={name:"appNotes"},mt=o(Object.assign(pt,{props:{row:{type:Object,default:{}}},setup(t){var o;const b=h(),I=l(null),P=l(null),S=t,K=a({activeItem:b.value[0],activeId:null==(o=b.value[0])?void 0:o.id,sortBy:k.get("noteSortBy")||"desc",sortNotes:[]});function U(t){t&&(t.altKey||229==t.keyCode)||"Enter"===t.code&&P.value.focus()}n((()=>S.row.data),(t=>{t&&(K.activeId=S.row.data.id),X()}),{immediate:!0,deep:!0});let J=[];async function X(t){var e;J=await H.get("notes"),J||(J=b._rawValue,await H.set("notes",J));let s=M(J,["ut"],[K.sortBy]),i=B(s.slice(0,3));i.forEach((t=>{t.content&&(t.content=t.content.slice(0,40))})),b.value=i,K.sortNotes=s,"del"==t&&(K.activeId=null==(e=s[0])?void 0:e.id);let o=K.sortNotes.find((t=>t.id==K.activeId))||{};K.activeItem=o}function pt(){O("notes")}const mt=()=>{"desc"==K.sortBy?K.sortBy="asc":K.sortBy="desc",k.set("noteSortBy",K.sortBy),X()};const ct=E((async()=>{await H.set("notes",J),X()}),1e3),ut=async()=>{K.activeItem.ut=z().valueOf(),ct(),pt()};async function ft(){let t={id:L(),title:z().format("YYYY-MM-DD"),content:"",fixed:!1,ct:z().valueOf(),ut:z().valueOf()};K.activeId=t.id,J.push(t),await H.set("notes",J),X(),requestAnimationFrame((()=>{I.value.focus()})),pt()}return(t,o)=>(e(),r(_,null,{default:d((()=>[i("div",$,[i("div",Q,[i("h2",W,[p(" 备忘录 "),i("span",Z,[(e(),s(m,null,c(["asc","desc"],((t,e)=>i("i",{key:e,class:u([[{active:K.sortBy==t},t],"sort-caret"]),onClick:mt},null,2))),64))])]),f(b).length?(e(),r(j,{key:1,tag:"ul",name:"list-complete",class:"notes-tabs-body"},{default:d((()=>[(e(!0),s(m,null,c(K.sortNotes,((t,o)=>(e(),s("li",{onClick:e=>(K.activeItem=t,K.activeId=t.id),class:u([{active:K.activeId===t.id},"notes-tabs-item d-elip"]),key:t.id},[i("h4",et,v(t.title||t.content||"无标题"),1),i("time",st,v(f(D)(t.ut,"YYYY/M/D HH:mm")),1),i("span",{class:"notes-del",title:"删除备忘录",onClick:e=>function(t,e){R.confirm("删除这条备忘录?","提示",{center:!0,type:"warning"}).then((async()=>{let e=J.findIndex((e=>e.id==t.id));J.splice(e,1),await H.set("notes",J),await X("del"),pt()}))}(t)},[x(f(F),{size:18},{default:d((()=>[x(f(N))])),_:1})],8,it),i("span",{class:"notes-del fixed",title:""+(t.fixed?"取消固定":"固定到桌面"),onClick:e=>async function(t){if(t.fixed=!t.fixed,await H.set("notes",J),t.fixed)C.value.push(t);else{let e=C.value.findIndex((e=>e.id==t.id));C.value.splice(e,1)}pt()}(t)},[x(f(F),{size:18},{default:d((()=>[y(x(f(G),null,null,512),[[g,!t.fixed]]),y(x(f(A),null,null,512),[[g,t.fixed]])])),_:2},1024)],8,ot)],10,tt)))),128))])),_:1})):(e(),r(T,{key:0})),i("div",{class:"notes-add d-flex-center",onClick:ft,title:"新增备忘录"},[x(f(F),null,{default:d((()=>[x(f(Y))])),_:1})])]),i("div",lt,[f(b).length?(e(),s("div",at,[x(f(V),{ref_key:"refTitle",ref:I,class:"note-title",modelValue:K.activeItem.title,"onUpdate:modelValue":o[0]||(o[0]=t=>K.activeItem.title=t),style:{"--bg-input":"transparent"},onInput:ut,onKeydown:U,placeholder:"请输入笔记标题"},null,8,["modelValue"]),x(f(V),{onInput:ut,class:"note-content",type:"textarea",ref_key:"refContent",ref:P,modelValue:K.activeItem.content,"onUpdate:modelValue":o[1]||(o[1]=t=>K.activeItem.content=t),placeholder:"请输入笔记内容"},null,8,["modelValue"]),i("div",nt,[i("span",null," 最后编辑："+v(f(D)(K.activeItem.ut,"YYYY-M-D HH:mm:ss"))+", 创建："+v(f(D)(K.activeItem.ct,"YYYY-MM-DD HH:mm:ss")),1),x(f(q),{effect:"light",width:"210px",placement:"top-end"},{reference:d((()=>[dt])),default:d((()=>[rt])),_:1})])])):w("",!0)])])])),_:1}))}}),[["__scopeId","data-v-ef391045"]]);export{mt as default};
