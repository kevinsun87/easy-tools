import{ElIcon as e}from"./index-D4GlTUBi.js";import{a8 as a,a9 as t,a as l,S as s}from"./todo-nv2WtoEp.js";import{a as o,b as n,c as r}from"./index-BrMlOSMZ.js";import{b as i,d as u,u as d}from"./index-B3sKL47p.js";import{m as c}from"./typescript-CRqm1_SZ.js";import{_ as p,w as v,c as b}from"./plugin-vue_export-helper-O3gUY6pX.js";import{t as m}from"./scroll-3JEGyj3w.js";import{c as f}from"./strings-B8lWsWjR.js";import{m as y,g as h,aB as g,a as x,w as C,n as P,p as $,q as w,z as k,u as T,C as B,c as j,o as N,aW as S,I as R,aY as A,A as E,i as F,bs as _,b0 as q,aV as z,v as K,x as L,J as V}from"./index-CyyLRP8W.js";import{E as J}from"./aria-BUADUvnR.js";import{k as M,g as O,q as U}from"./types-Ci7ev57k.js";import{U as W}from"./event-BwRzfsZt.js";import{u as Y}from"./index-DBHOuH84.js";const G=Symbol("tabsRootContextKey"),H=i({tabs:{type:u(Array),default:()=>c([])}}),I="ElTabBar",X=y({name:I});var D=p(y({...X,props:H,setup(e,{expose:a}){const t=e,l=h(),s=g(G);s||m(I,"<el-tabs><el-tab-bar /></el-tabs>");const n=d("tabs"),r=x(),i=x(),u=()=>i.value=(()=>{let e=0,a=0;const o=["top","bottom"].includes(s.props.tabPosition)?"width":"height",n="width"===o?"x":"y",r="x"===n?"left":"top";return t.tabs.every((s=>{var n,i;const u=null==(i=null==(n=l.parent)?void 0:n.refs)?void 0:i[`tab-${s.uid}`];if(!u)return!1;if(!s.active)return!0;e=u[`offset${f(r)}`],a=u[`client${f(o)}`];const d=window.getComputedStyle(u);return"width"===o&&(t.tabs.length>1&&(a-=Number.parseFloat(d.paddingLeft)+Number.parseFloat(d.paddingRight)),e+=Number.parseFloat(d.paddingLeft)),!1})),{[o]:`${a}px`,transform:`translate${f(n)}(${e}px)`}})();return C((()=>t.tabs),(async()=>{await P(),u()}),{immediate:!0}),o(r,(()=>u())),a({ref:r,update:u}),(e,a)=>($(),w("div",{ref_key:"barRef",ref:r,class:k([T(n).e("active-bar"),T(n).is(T(s).props.tabPosition)]),style:B(i.value)},null,6))}}),[["__file","tab-bar.vue"]]);const Q=i({panes:{type:u(Array),default:()=>c([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Z="ElTabNav",ee=y({name:Z,props:Q,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(s,{expose:i,emit:u}){const c=h(),p=g(G);p||m(Z,"<el-tabs><tab-nav /></el-tabs>");const v=d("tabs"),b=n(),y=r(),$=x(),w=x(),k=x(),T=x(),B=x(!1),A=x(0),E=x(!1),F=x(!0),_=j((()=>["top","bottom"].includes(p.props.tabPosition)?"width":"height")),q=j((()=>({transform:`translate${"width"===_.value?"X":"Y"}(-${A.value}px)`}))),z=()=>{if(!$.value)return;const e=$.value[`offset${f(_.value)}`],a=A.value;if(!a)return;const t=a>e?a-e:0;A.value=t},K=()=>{if(!$.value||!w.value)return;const e=w.value[`offset${f(_.value)}`],a=$.value[`offset${f(_.value)}`],t=A.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;A.value=l},L=async()=>{const e=w.value;if(!(B.value&&k.value&&$.value&&e))return;await P();const a=k.value.querySelector(".is-active");if(!a)return;const t=$.value,l=["top","bottom"].includes(p.props.tabPosition),s=a.getBoundingClientRect(),o=t.getBoundingClientRect(),n=l?e.offsetWidth-o.width:e.offsetHeight-o.height,r=A.value;let i=r;l?(s.left<o.left&&(i=r-(o.left-s.left)),s.right>o.right&&(i=r+s.right-o.right)):(s.top<o.top&&(i=r-(o.top-s.top)),s.bottom>o.bottom&&(i=r+(s.bottom-o.bottom))),i=Math.max(i,0),A.value=Math.min(i,n)},V=()=>{var e;if(!w.value||!$.value)return;s.stretch&&(null==(e=T.value)||e.update());const a=w.value[`offset${f(_.value)}`],t=$.value[`offset${f(_.value)}`],l=A.value;t<a?(B.value=B.value||{},B.value.prev=l,B.value.next=l+t<a,a-l<t&&(A.value=a-t)):(B.value=!1,l>0&&(A.value=0))},M=e=>{const a=e.code,{up:t,down:l,left:s,right:o}=J;if(![t,l,s,o].includes(a))return;const n=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),r=n.indexOf(e.target);let i;i=a===s||a===t?0===r?n.length-1:r-1:r<n.length-1?r+1:0,n[i].focus({preventScroll:!0}),n[i].click(),O()},O=()=>{F.value&&(E.value=!0)},U=()=>E.value=!1;return C(b,(e=>{"hidden"===e?F.value=!1:"visible"===e&&setTimeout((()=>F.value=!0),50)})),C(y,(e=>{e?setTimeout((()=>F.value=!0),50):F.value=!1})),o(k,V),N((()=>setTimeout((()=>L()),0))),S((()=>V())),i({scrollToActiveTab:L,removeFocus:U}),C((()=>s.panes),(()=>c.update()),{flush:"post",deep:!0}),()=>{const o=B.value?[R("span",{class:[v.e("nav-prev"),v.is("disabled",!B.value.prev)],onClick:z},[R(e,null,{default:()=>[R(a,null,null)]})]),R("span",{class:[v.e("nav-next"),v.is("disabled",!B.value.next)],onClick:K},[R(e,null,{default:()=>[R(t,null,null)]})])]:null,n=s.panes.map(((a,t)=>{var o,n,r,i;const d=a.uid,c=a.props.disabled,b=null!=(n=null!=(o=a.props.name)?o:a.index)?n:`${t}`,m=!c&&(a.isClosable||s.editable);a.index=`${t}`;const f=m?R(e,{class:"is-icon-close",onClick:e=>u("tabRemove",a,e)},{default:()=>[R(l,null,null)]}):null,y=(null==(i=(r=a.slots).label)?void 0:i.call(r))||a.props.label,h=!c&&a.active?0:-1;return R("div",{ref:`tab-${d}`,class:[v.e("item"),v.is(p.props.tabPosition),v.is("active",a.active),v.is("disabled",c),v.is("closable",m),v.is("focus",E.value)],id:`tab-${b}`,key:`tab-${d}`,"aria-controls":`pane-${b}`,role:"tab","aria-selected":a.active,tabindex:h,onFocus:()=>O(),onBlur:()=>U(),onClick:e=>{U(),u("tabClick",a,b,e)},onKeydown:e=>{!m||e.code!==J.delete&&e.code!==J.backspace||u("tabRemove",a,e)}},[y,f])}));return R("div",{ref:k,class:[v.e("nav-wrap"),v.is("scrollable",!!B.value),v.is(p.props.tabPosition)]},[o,R("div",{class:v.e("nav-scroll"),ref:$},[R("div",{class:[v.e("nav"),v.is(p.props.tabPosition),v.is("stretch",s.stretch&&["top","bottom"].includes(p.props.tabPosition))],ref:w,style:q.value,role:"tablist",onKeydown:M},[s.type?null:R(D,{ref:T,tabs:[...s.panes]},null),n])])])}}}),ae=i({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:u(Function),default:()=>!0},stretch:Boolean}),te=e=>F(e)||O(e),le=y({name:"ElTabs",props:ae,emits:{[W]:e=>te(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>te(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>te(e),tabAdd:()=>!0},setup(a,{emit:t,slots:l,expose:o}){var n;const r=d("tabs"),{children:i,addChild:u,removeChild:c}=Y(h(),"ElTabPane"),p=x(),v=x(null!=(n=a.modelValue)?n:"0"),b=async(e,l=!1)=>{var s,o,n;if(v.value!==e&&!M(e))try{!1!==await(null==(s=a.beforeLeave)?void 0:s.call(a,e,v.value))&&(v.value=e,l&&(t(W,e),t("tabChange",e)),null==(n=null==(o=p.value)?void 0:o.removeFocus)||n.call(o))}catch(r){}},m=(e,a,l)=>{e.props.disabled||(b(a,!0),t("tabClick",e,l))},f=(e,a)=>{e.props.disabled||M(e.props.name)||(a.stopPropagation(),t("edit",e.props.name,"remove"),t("tabRemove",e.props.name))},y=()=>{t("edit",void 0,"add"),t("tabAdd")};return C((()=>a.modelValue),(e=>b(e))),C(v,(async()=>{var e;await P(),null==(e=p.value)||e.scrollToActiveTab()})),A(G,{props:a,currentName:v,registerPane:u,unregisterPane:c}),o({currentName:v}),()=>{const t=l["add-icon"],o=a.editable||a.addable?R("span",{class:r.e("new-tab"),tabindex:"0",onClick:y,onKeydown:e=>{e.code===J.enter&&y()}},[t?E(l,"add-icon"):R(e,{class:r.is("icon-plus")},{default:()=>[R(s,null,null)]})]):null,n=R("div",{class:[r.e("header"),r.is(a.tabPosition)]},[o,R(ee,{ref:p,currentName:v.value,editable:a.editable,type:a.type,panes:i.value,stretch:a.stretch,onTabClick:m,onTabRemove:f},null)]),u=R("div",{class:r.e("content")},[E(l,"default")]);return R("div",{class:[r.b(),r.m(a.tabPosition),{[r.m("card")]:"card"===a.type,[r.m("border-card")]:"border-card"===a.type}]},[..."bottom"!==a.tabPosition?[n,u]:[u,n]])}}}),se=i({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),oe=["id","aria-hidden","aria-labelledby"],ne="ElTabPane",re=y({name:ne});var ie=p(y({...re,props:se,setup(e){const a=e,t=h(),l=_(),s=g(G);s||m(ne,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const o=d("tab-pane"),n=x(),r=j((()=>a.closable||s.props.closable)),i=U((()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:n.value)})),u=x(i.value),c=j((()=>{var e;return null!=(e=a.name)?e:n.value})),p=U((()=>!a.lazy||u.value||i.value));C(i,(e=>{e&&(u.value=!0)}));const v=q({uid:t.uid,slots:l,props:a,paneName:c,active:i,index:n,isClosable:r});return N((()=>{s.registerPane(v)})),z((()=>{s.unregisterPane(v.uid)})),(e,a)=>T(p)?K(($(),w("div",{key:0,id:`pane-${T(c)}`,class:k(T(o).b()),role:"tabpanel","aria-hidden":!T(i),"aria-labelledby":`tab-${T(c)}`},[E(e.$slots,"default")],10,oe)),[[L,T(i)]]):V("v-if",!0)}}),[["__file","tab-pane.vue"]]);const ue=v(le,{TabPane:ie}),de=b(ie);export{ue as E,de as a};
