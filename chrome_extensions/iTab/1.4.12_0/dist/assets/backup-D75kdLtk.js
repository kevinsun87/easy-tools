const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./create_login-CUpbwega.js","./index-CyyLRP8W.js","./index-4Dsu8OkH.css","./el-dialog-BoL22f5R.js","./index-CdRnR6wp.js","./index-B3sKL47p.js","./scroll-3JEGyj3w.js","./style-BBQwFGbP.js","./types-Ci7ev57k.js","./vnode-CwyaGvUL.js","./index-D4GlTUBi.js","./plugin-vue_export-helper-O3gUY6pX.js","./use-dialog-0gmd-idO.js","./icon-Dsqoi_oS.js","./todo-nv2WtoEp.js","./todo-Dkv1bMMm.css","./event-BwRzfsZt.js","./index-CB1eEFAV.js","./_baseGet-DEcaJYAt.js","./isSymbol-Bt1TyP4H.js","./focus-trap-D8QWET1-.js","./aria-BUADUvnR.js","./use-global-config-DcVlDyFX.js","./index-CXKOYI6o.js","./isUndefined-DgmxjSXK.js","./index-hc1PwDik.js","./index-DjlyN6je.js","./el-dialog-BZbd8a1U.css","./d-button-COA-aPKt.js","./d-button-Bpdio_Za.css","./el-form-item-Bc1ZcHOk.js","./constants-Dnj8X3EN.js","./castArray-LUE-lsy0.js","./use-form-item-CUGNa-4i.js","./index-BrMlOSMZ.js","./el-form-item-DeFBUyhQ.css","./public-api-DxRCcbRs.js","./localforage-BVRgvwJc.js","./baseRequest-CU9cTnaC.js","./userInfo-CZAB7rZN.js","./version-DYnJBHiW.js","./website-CoEF8fmW.js","./index-DvjFJXYU.js","./index-1ymgXUpW.css","./css-BIm8ja1J.css","./indexdb-D6yYQ1E4.js","./eventBus-BB4cUTPt.js","./el-radio-vuBnWJsl.js","./index-kxe6IHwf.js","./hasIn-y6DbaUwA.js","./el-radio-BhMM_CnF.css","./save_config-BtHImbsT.js","./debounce-Dd9nEzpy.js","./index-BPnMED6p.js","./typescript-CRqm1_SZ.js","./index-DsFsGggn.js","./css-D3Kd0WPg.js","./css-DJhm0lbD.css","./getAudio-D_HGGnT2.js","./index-BvBbK8nS.js","./index-BU0epQJo.js","./config-provider-Bf5G9WCh.js","./index-BFuAB0_P.js","./el-image-viewer-BDwDTkkr.js","./throttle-1HGvzIm8.js","./position-C03YnYn2.js","./el-image-viewer-BHVceWjq.css","./css-DsIEOZKU.js","./css-Bhjm4rSq.css","./el-button-D43xa9mw.css","./el-input-_oO4j4uY.css","./el-overlay-DBZ27Rv4.css","./index-CMn5lzXr.js","./aria-C-hsWcn7.js","./validator-DvohupZ1.js","./create_login-PZD-rgSc.css"])))=>i.map(i=>d[i]);
import{n as s,_ as e,G as i}from"./todo-nv2WtoEp.js";import t from"./d-button-COA-aPKt.js";import{d as o}from"./index-DWjaLlRQ.js";import{d as a}from"./localforage-BVRgvwJc.js";import{u as l,A as r,w as p}from"./public-api-DxRCcbRs.js";import{t as m}from"./timeFormat-qtCApzlE.js";/* empty css            */import{E as n}from"./el-upload-b_dGYKOT.js";import"./el-progress-Cnh9MicU.js";import{a as u,E as c}from"./el-checkbox-group-D4p_N5Lq.js";/* empty css                  */import"./css-X-yl6Ffy.js";import{E as d}from"./el-dialog-BoL22f5R.js";/* empty css                   */import"./css-D3Kd0WPg.js";import{SAVE_CONFIG as j}from"./save_config-BtHImbsT.js";import b from"./hisBackup-Bz9rE_Gs.js";import{u as f}from"./userInfo-CZAB7rZN.js";import{_ as x,bb as g,p as k,q as v,t as _,u as y,B as V,J as h,I as C,H as T,G as E,L as w,F as A,y as D,a_ as I,aX as Y}from"./index-CyyLRP8W.js";import{ElLoading as H}from"./index-C3VYT6fr.js";import{ElMessage as M}from"./index-BU0epQJo.js";import"./baseRequest-CU9cTnaC.js";import"./version-DYnJBHiW.js";import"./website-CoEF8fmW.js";import"./index-DvjFJXYU.js";import"./index-D4GlTUBi.js";import"./index-B3sKL47p.js";import"./plugin-vue_export-helper-O3gUY6pX.js";import"./types-Ci7ev57k.js";import"./style-BBQwFGbP.js";import"./indexdb-D6yYQ1E4.js";import"./eventBus-BB4cUTPt.js";import"./scroll-3JEGyj3w.js";import"./typescript-CRqm1_SZ.js";import"./index-CXKOYI6o.js";import"./_baseGet-DEcaJYAt.js";import"./isSymbol-Bt1TyP4H.js";import"./use-form-item-CUGNa-4i.js";import"./constants-Dnj8X3EN.js";import"./use-global-config-DcVlDyFX.js";import"./index-CB1eEFAV.js";import"./focus-trap-D8QWET1-.js";import"./aria-BUADUvnR.js";import"./isEqual-DOZxeYFr.js";import"./_baseIsEqual-DN6o0BQy.js";import"./index-BrMlOSMZ.js";import"./index-kxe6IHwf.js";import"./hasIn-y6DbaUwA.js";import"./event-BwRzfsZt.js";import"./index-DjlyN6je.js";import"./index-CdRnR6wp.js";import"./vnode-CwyaGvUL.js";import"./use-dialog-0gmd-idO.js";import"./icon-Dsqoi_oS.js";import"./isUndefined-DgmxjSXK.js";import"./index-hc1PwDik.js";import"./debounce-Dd9nEzpy.js";import"./d-tabs-x-fZyCMJeT.js";import"./css-DsIEOZKU.js";/* empty css                 */import"./Delete16Regular-DgH01z7r.js";import"./index-CMn5lzXr.js";import"./index-BvBbK8nS.js";import"./index-BPnMED6p.js";import"./index-DsFsGggn.js";import"./aria-C-hsWcn7.js";import"./validator-DvohupZ1.js";import"./config-provider-Bf5G9WCh.js";import"./index-BFuAB0_P.js";const q=s=>(I("data-v-a67d438f"),s=s(),Y(),s),F=[q((()=>_("a",{class:"link"},"同步到本地",-1)))],G={key:0,class:"setting-li-sub"},J={class:"setting-panel"},O=[q((()=>_("a",{class:"link"},"立即备份",-1)))],R=[q((()=>_("a",{class:"link"},"恢复历史数据",-1)))],S=q((()=>_("br",null,null,-1))),U={class:"setting-panel"},B=[q((()=>_("a",{class:"link"},"导出本地数据",-1)))],N=q((()=>_("a",{class:"link"},"导入备份数据",-1))),z={class:"p20 ac"},L={class:"ac mb20"},P=x({__name:"backup",setup(x){const I=f(),Y=[{label:"图标",value:"navConfig"},{label:"设置",value:"baseConfig"},{label:"备忘录",value:"notes"},{label:"待办",value:"todo"}];function q(){P.backupVisible=!0}const P=g({backupVisible:!1,exportVisible:!1,exportCheck:["baseConfig","navConfig","notes","todo"]});function K(t){if(!function(){let i=s.get("token");return i||(e((()=>import("./create_login-CUpbwega.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75]),import.meta.url).then((s=>{s.default("login")})),M.warning("请登录后使用同步功能")),!!i}())return;const o=H.service({lock:!0,text:"数据同步中",background:"rgba(0, 0, 0, 0.7)"});setTimeout((()=>{o.close()}),500),"backup"==t?j(null,100,"manua"):l({from:"itab",t:(new Date).getTime()}).then((e=>{I.value=e.data||{};let t=s.get("asyncTime"),o={};for(let s in e.data.itabAsyncTime)t[s]!=e.data.itabAsyncTime[s]&&(o[s]=1);i(o)&&(o=null),r(o,e.data.itabAsyncTime)}))}const Q=s=>{var e=new FileReader;e.readAsText(s.raw),e.onload=()=>{const s=JSON.parse(e.result);s?(p(s),M.success("恢复成功")):M.error("数据格式可能不正确")}},Z=()=>{let e={};P.exportCheck.forEach((i=>{e[i]=s.get(i)||[]})),o(JSON.stringify(e),a().format("-YYYY-MM-DD MM:HH")+".itabdata")};return(s,e)=>(k(),v("span",null,[_("p",{class:"setting-panel lh24 mb20",onClick:e[0]||(e[0]=s=>K("async"))},F),y(I).itabAsyncTime?(k(),v("h2",G," 上次备份: "+V(y(m)(y(I).itabAsyncTime.baseConfig,"YYYY-MM-DD HH:mm:ss")),1)):h("",!0),_("div",J,[_("p",{onClick:e[1]||(e[1]=s=>K("backup"))},O),_("p",{onClick:q},R)]),S,_("div",U,[_("p",{onClick:e[2]||(e[2]=s=>y(P).exportVisible=!0)},B),C(y(n),{action:"/","show-file-list":!1,multiple:!1,"auto-upload":!1,"on-change":Q,class:"backup-import"},{default:T((()=>[N])),_:1})]),y(P).backupVisible?(k(),E(b,{key:1,modelValue:y(P).backupVisible,"onUpdate:modelValue":e[3]||(e[3]=s=>y(P).backupVisible=s)},null,8,["modelValue"])):h("",!0),C(y(d),{modelValue:y(P).exportVisible,"onUpdate:modelValue":e[6]||(e[6]=s=>y(P).exportVisible=s),title:"选择导出内容",width:"600px"},{footer:T((()=>[_("div",L,[C(t,{size:"default",onClick:e[5]||(e[5]=s=>y(P).exportVisible=!1)},{default:T((()=>[w("取消")])),_:1}),C(t,{size:"default",class:"ml10",type:"primary",onClick:Z},{default:T((()=>[w("导出")])),_:1})])])),default:T((()=>[_("div",z,[C(y(u),{modelValue:y(P).exportCheck,"onUpdate:modelValue":e[4]||(e[4]=s=>y(P).exportCheck=s)},{default:T((()=>[(k(),v(A,null,D(Y,(s=>C(y(c),{key:s.value,label:s.value},{default:T((()=>[w(V(s.label),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])])),_:1},8,["modelValue"])]))}},[["__scopeId","data-v-a67d438f"]]);export{P as default};
