import{_ as e}from"./d-dialog-Dp99XzOL.js";import{m as a,p as t,q as s,t as i,_ as l,s as o,bb as n,a as r,c as p,w as c,n as m,aV as d,B as u,u as f,z as y,L as v,v as g,x as h,I as x,J as j,C as w,a_ as k,aX as _,G as z,H as Y}from"./index-CyyLRP8W.js";import{d as b}from"./localforage-BVRgvwJc.js";/* empty css            */import"./css-D3Kd0WPg.js";import{B as C,o as M,b as L}from"./main-DJB5iAKQ.js";import{yiyanInfoApi as A,yiyanLikeApi as D,yiyanShareApi as H}from"./yiyan-B5O_-2SE.js";import{a2 as I,a3 as B,n as $,F as V}from"./todo-nv2WtoEp.js";import{ElMessage as F}from"./index-BU0epQJo.js";import"./el-dialog-BoL22f5R.js";import"./index-CdRnR6wp.js";import"./index-B3sKL47p.js";import"./scroll-3JEGyj3w.js";import"./style-BBQwFGbP.js";import"./types-Ci7ev57k.js";import"./vnode-CwyaGvUL.js";import"./index-D4GlTUBi.js";import"./plugin-vue_export-helper-O3gUY6pX.js";import"./use-dialog-0gmd-idO.js";import"./icon-Dsqoi_oS.js";import"./event-BwRzfsZt.js";import"./index-CB1eEFAV.js";import"./_baseGet-DEcaJYAt.js";import"./isSymbol-Bt1TyP4H.js";import"./focus-trap-D8QWET1-.js";import"./aria-BUADUvnR.js";import"./use-global-config-DcVlDyFX.js";import"./index-CXKOYI6o.js";import"./isUndefined-DgmxjSXK.js";import"./index-hc1PwDik.js";import"./index-DjlyN6je.js";/* empty css                   */import"./getAudio-D_HGGnT2.js";/* empty css                                                 */import"./modulepreload-polyfill-Dqv5PPZA.js";import"./baseRequest-CU9cTnaC.js";import"./userInfo-CZAB7rZN.js";import"./version-DYnJBHiW.js";import"./index-BrMlOSMZ.js";import"./typescript-CRqm1_SZ.js";import"./config-provider-Bf5G9WCh.js";import"./index-BFuAB0_P.js";const R={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},q=[i("g",{fill:"none"},[i("path",{d:"M3 5.25A2.25 2.25 0 0 1 5.25 3h1.865a.75.75 0 1 1 0 1.5H5.25a.75.75 0 0 0-.75.75v1.865a.75.75 0 1 1-1.5 0V5.25zm9.135-1.5a.75.75 0 0 1 .75-.75h1.865A2.25 2.25 0 0 1 17 5.25v1.865a.75.75 0 0 1-1.5 0V5.25a.75.75 0 0 0-.75-.75h-1.865a.75.75 0 0 1-.75-.75zM3.75 12.135a.75.75 0 0 1 .75.75v1.865c0 .414.336.75.75.75h1.865a.75.75 0 0 1 0 1.5H5.25A2.25 2.25 0 0 1 3 14.75v-1.865a.75.75 0 0 1 .75-.75zm12.5 0a.75.75 0 0 1 .75.75v1.865A2.25 2.25 0 0 1 14.75 17h-1.865a.75.75 0 0 1 0-1.5h1.865a.75.75 0 0 0 .75-.75v-1.865a.75.75 0 0 1 .75-.75z",fill:"currentColor"})],-1)],S=a({name:"FullScreenMaximize20Filled",render:function(e,a){return t(),s("svg",R,q)}}),G={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},J=[i("g",{fill:"none"},[i("path",{d:"M12.82 5.58l-.82.822l-.824-.824a5.375 5.375 0 1 0-7.601 7.602l7.895 7.895a.75.75 0 0 0 1.06 0l7.902-7.897a5.376 5.376 0 0 0-.001-7.599a5.38 5.38 0 0 0-7.611 0zm6.548 6.54L12 19.485L4.635 12.12a3.875 3.875 0 1 1 5.48-5.48l1.358 1.357a.75.75 0 0 0 1.073-.012L13.88 6.64a3.88 3.88 0 0 1 5.487 5.48z",fill:"currentColor"})],-1)],O=a({name:"Heart24Regular",render:function(e,a){return t(),s("svg",G,J)}}),U={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},P=[i("g",{fill:"none"},[i("path",{d:"M7.5 2A2.5 2.5 0 0 0 5 4.5v8A2.5 2.5 0 0 0 7.5 15h8a2.5 2.5 0 0 0 2.5-2.5v-8A2.5 2.5 0 0 0 15.5 2h-8zM17 4.5V5h-6.5a.5.5 0 0 1-.5-.5V3h5.5A1.5 1.5 0 0 1 17 4.5zm-8 0A1.5 1.5 0 0 0 10.5 6H17v6.5a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 6 12.5v-8A1.5 1.5 0 0 1 7.5 3H9v1.5zM12.5 18a2.5 2.5 0 0 0 2.45-2h-1.035a1.5 1.5 0 0 1-1.415 1H6a3 3 0 0 1-3-3V7.5a1.5 1.5 0 0 1 1-1.415V5.05A2.5 2.5 0 0 0 2 7.5V14a4 4 0 0 0 4 4h6.5z",fill:"currentColor"})],-1)],Q=a({name:"TabDesktopCopy20Regular",render:function(e,a){return t(),s("svg",U,P)}}),T=""+new URL("../tide.png",import.meta.url).href,K={class:"app-yiyan-body ac d-relative pt50",style:{"z-index":"1"}},W={class:"f14"},X={class:"app-yiyan-text"},Z={class:"app-yiyan-footer"},E={key:0,class:"yiyan-icon"},N={class:"f12 number"},ee={class:"f12 number"},ae=(e=>(k("data-v-78587d32"),e=e(),_(),e))((()=>i("p",{class:"yiyan-datasource absolute bottom-2 flex items-center justify-center w-full opacity-30 hover:opacity-60",style:{"font-size":"10px",height:"18px"}},[v(" 数据来源于 "),i("a",{class:"h-[18px]",target:"_blank",href:"https://tide.fm/"},[i("img",{class:"h-[18px]",src:T})])],-1))),te=l({__name:"Content",setup(e){const a=o(null),{toggle:l,isFullscreen:k}=I(a),_=n({randomBg:B(7),isLikeClick:!1,isLike:!1,isFullScreen:!1,date:"",day:""}),z=r($.get("app-yiyan")||{});var Y;A(Y).then((e=>{z.value=e.data||{}})),G();const R=p((()=>{let e=z.value.pic_url;return e||(e=`https://files.codelife.cc/itab/widget/yiyan/${_.randomBg}.jpg?x-oss-process=image/resize,limit_0,m_fill,w_1920,h_1080/quality,q_90/format,webp`),e}));let q=null;function G(e=!1){let a=C[b().day()];e?(_.date=`${b().format("YYYY.MM.DD")} 星期${a}`,_.day=b().format("HH:mm:ss")):(_.date=`${b().format("YYYY.MM")} 星期${a}`,_.day=b().format("DD"))}function J(e){_.isLike=!1;let a=b(z.value.date).valueOf();"next"==e?a+=864e5:a-=864e5;let t=b(a).format("YYYYMMDD");t>b().format("YYYYMMDD")?F.warning("明天怎么翻也翻不过去"):t<20220706?F.warning("不能再往前查看了"):A({date:t}).then((e=>{z.value=e.data||{},_.randomBg=B(7);let a=C[b(z.value.date).day()];_.date=`${b(z.value.date).format("YYYY.MM")} 星期${a}`,_.day=b(z.value.date).format("DD")}))}function U(e){"F11"===e.code&&(e.preventDefault(),l())}function P(){_.isLike=!_.isLike,_.isLike&&(D({_id:z.value._id}).then((e=>{let a=e.data;a&&(z.value.like=a.like)})),_.isLikeClick=!0,setTimeout((()=>{_.isLikeClick=!1}),600))}function T(){V(z.value.content),F.success("已复制到剪贴板"),H({_id:z.value._id}).then((e=>{let a=e.data;a&&(z.value.share=a.share)}))}return q&&clearInterval(q),c(k,(e=>{G(e),e?(q&&clearInterval(q),q=setInterval((()=>{G(e)}),1e3)):q&&clearInterval(q)})),m((()=>{M(document,"keydown",U)})),d((()=>{clearInterval(q),L(document,"keydown",U)})),(e,o)=>(t(),s("div",{ref_key:"yiyanRef",ref:a,class:"app-yiyan-wrap d-relative h-full select-text",style:w(`background-image:url(${R.value})`)},[i("div",K,[i("i",{class:"prev arrow-icon d-icon",onClick:o[0]||(o[0]=e=>J("prev"))}),i("i",{class:"next arrow-icon d-icon",onClick:o[1]||(o[1]=e=>J("next"))}),i("span",W,u(f(_).date),1),i("p",{class:y(["app-yiyan-day",{fullscreen:f(k)}])},u(f(_).day),3),i("p",X,[v(u(z.value.content)+" ",1),g(i("span",{class:"app-yiyan-author f12 d-block",style:{opacity:"0.4","font-weight":"400"}},u(z.value.from)+"，"+u(z.value.author),513),[[h,z.value.author]])]),i("p",Z,[f(k)?j("",!0):(t(),s("span",E,[i("i",{title:"分享",onClick:T,class:"d-icon",style:{"font-size":"30px"}},[x(f(Q))]),i("em",N,u(z.value.share||0),1)])),i("span",{class:y(["yiyan-icon",{fullscreen:f(k)}])},[i("i",{class:"d-icon",title:"设为屏保",onClick:o[2]||(o[2]=(...e)=>f(l)&&f(l)(...e)),style:{"font-size":"30px"}},[x(f(S))])],2),f(k)?j("",!0):(t(),s("span",{key:1,class:y(["yiyan-icon yiyan-like",[{like:f(_).isLike},{click:f(_).isLikeClick}]])},[i("i",{title:"喜欢",class:"d-icon",style:{"font-size":"30px"},onClick:P},[x(f(O),{class:"heart"})]),i("em",ee,u(z.value.like||0),1)],2))])]),ae],4))}},[["__scopeId","data-v-78587d32"]]),se={__name:"index",setup:a=>(a,s)=>(t(),z(e,{width:"860px",height:"550px",destroyOnClose:!0},{default:Y((()=>[x(te)])),_:1}))};export{se as default};
