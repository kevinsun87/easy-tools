import{m as l,p as t,q as e,t as a,_ as i,b0 as s,I as o,H as n,F as r,y as c,G as d,u as p,v as m,x as u,B as h,L as w,z as f,bH as v,J as y,E as x,a_ as g,aX as b,a as _,c as j,b3 as z,b4 as C,b5 as k}from"./index-CyyLRP8W.js";import{d as L}from"./localforage-BVRgvwJc.js";import{_ as M}from"./d-dialog-Dp99XzOL.js";import{_ as I}from"./d-scroll-x-DmrxoDz6.js";/* empty css            *//* empty css                 */import{E as H,a as B}from"./el-select-D9newx6z.js";import"./el-scrollbar-BVpSQI8U.js";/* empty css                  */import{t as V}from"./timeFormat-qtCApzlE.js";import{getWeather as S}from"./weather-Bwn9ikAa.js";import{a as O,b as A}from"./weatherApi-CW4P18LR.js";import D from"./indexdb-D6yYQ1E4.js";import{J as F,B as T}from"./main-DJB5iAKQ.js";import{aK as q,n as E,aL as U,aM as W}from"./todo-nv2WtoEp.js";import{u as P,H as $,i as G,a as J,b as K}from"./install-DOZUvoqa.js";import{L as N}from"./Leaf-CAIYRnd1.js";import"./el-dialog-BoL22f5R.js";import"./index-CdRnR6wp.js";import"./index-B3sKL47p.js";import"./scroll-3JEGyj3w.js";import"./style-BBQwFGbP.js";import"./types-Ci7ev57k.js";import"./vnode-CwyaGvUL.js";import"./index-D4GlTUBi.js";import"./plugin-vue_export-helper-O3gUY6pX.js";import"./use-dialog-0gmd-idO.js";import"./icon-Dsqoi_oS.js";import"./event-BwRzfsZt.js";import"./index-CB1eEFAV.js";import"./_baseGet-DEcaJYAt.js";import"./isSymbol-Bt1TyP4H.js";import"./focus-trap-D8QWET1-.js";import"./aria-BUADUvnR.js";import"./use-global-config-DcVlDyFX.js";import"./index-CXKOYI6o.js";import"./isUndefined-DgmxjSXK.js";import"./index-hc1PwDik.js";import"./index-DjlyN6je.js";/* empty css                   */import"./getAudio-D_HGGnT2.js";/* empty css                                                 *//* empty css                                                   */import"./index-BPnMED6p.js";import"./index-BrMlOSMZ.js";import"./typescript-CRqm1_SZ.js";import"./index-kxe6IHwf.js";import"./hasIn-y6DbaUwA.js";import"./index-DsFsGggn.js";import"./use-form-item-CUGNa-4i.js";import"./constants-Dnj8X3EN.js";import"./index-D1OyjWme.js";import"./strings-B8lWsWjR.js";import"./isEqual-DOZxeYFr.js";import"./_baseIsEqual-DN6o0BQy.js";import"./index-BFuAB0_P.js";import"./debounce-Dd9nEzpy.js";import"./_baseIteratee-BaNfRxc9.js";import"./index-DHV32PmZ.js";import"./castArray-LUE-lsy0.js";import"./baseApi-BUYbzNW3.js";import"./baseRequest-CU9cTnaC.js";import"./userInfo-CZAB7rZN.js";import"./version-DYnJBHiW.js";import"./modulepreload-polyfill-Dqv5PPZA.js";const R={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},X=[a("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8s8 3.58 8 8s-3.58 8-8 8z",fill:"currentColor"},null,-1),a("path",{d:"M12.5 7H11v6l5.25 3.15l.75-1.23l-4.5-2.67z",fill:"currentColor"},null,-1)],Q=l({name:"AccessTimeFilled",render:function(l,a){return t(),e("svg",R,X)}}),Z={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Y=[a("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10s10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3s1.34-3 3-3s3 1.34 3 3z",fill:"currentColor"},null,-1)],ll=l({name:"AdjustRound",render:function(l,a){return t(),e("svg",Z,Y)}}),tl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},el=[a("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z",fill:"currentColor"},null,-1)],al=l({name:"CalendarMonthOutlined",render:function(l,a){return t(),e("svg",tl,el)}}),il={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},sl=[a("g",{fill:"none"},[a("path",{d:"M11.299 5.487a7.33 7.33 0 0 1 .377-.328c.583-.473 1.474-1.043 2.492-1.143a2.978 2.978 0 0 1 .886.04c1.238.241 2.147 1.224 2.663 1.93c.595.811.1 1.82-.737 2.09L12.8 9.429l-3.098 4.006c-.97 1.254-2.968.343-2.657-1.212l.293-1.464L4.32 11.8A1.75 1.75 0 0 1 2 10.146V7.16c0-.076.006-.148.019-.217c.157-.897 1.283-1.217 1.902-.62c.096.09.18.204.245.34l.593 1.224l5.805-1.935c.258-.086.503-.249.735-.465zM5.384 6.624l3.73-1.243L7.508 4.28A1.596 1.596 0 0 0 6.605 4C5.28 4 4.532 5.525 5.345 6.573l.039.051zM2.75 16.5a.75.75 0 0 0 0 1.5h14.5a.75.75 0 0 0 0-1.5H2.75z",fill:"currentColor"})],-1)],ol=l({name:"AirplaneTakeOff20Filled",render:function(l,a){return t(),e("svg",il,sl)}}),nl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},rl=[a("g",{fill:"none"},[a("path",{d:"M13.303 3.525a5.071 5.071 0 0 1 7.172 7.172l-9.778 9.778a5.071 5.071 0 0 1-7.172-7.172l9.778-9.778zm6.111 1.061a3.571 3.571 0 0 0-5.05 0l-4.359 4.359l5.05 5.05l4.36-4.359a3.571 3.571 0 0 0 0-5.05zm-8.606 13.691a.75.75 0 0 0-1.06-1.06l-1.441 1.44a1.5 1.5 0 0 1-2.1.022l-.017-.016a.75.75 0 1 0-1.039 1.082l.017.016a3 3 0 0 0 4.2-.043l1.44-1.44z",fill:"currentColor"})],-1)],cl=l({name:"Pill24Filled",render:function(l,a){return t(),e("svg",nl,rl)}}),dl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},pl=[a("g",{fill:"none"},[a("path",{d:"M15.744 4.276c1.221-2.442 4.476-2.97 6.406-1.04l6.614 6.614c1.93 1.93 1.402 5.186-1.04 6.406l-6.35 3.176a1.5 1.5 0 0 0-.753.867l-1.66 4.983a2 2 0 0 1-3.312.782l-4.149-4.15l-6.086 6.087H4v-1.415l6.086-6.085l-4.149-4.15a2 2 0 0 1 .782-3.31l4.982-1.662a1.5 1.5 0 0 0 .868-.752l3.175-6.35z",fill:"currentColor"})],-1)],ml=l({name:"Pin32Filled",render:function(l,a){return t(),e("svg",dl,pl)}}),ul={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 496 512"},hl=[a("path",{d:"M212.3 10.3c-43.8 6.3-86.2 24.1-122.2 53.8l77.4 77.4c27.8-35.8 43.3-81.2 44.8-131.2zM248 222L405.9 64.1c-42.4-35-93.6-53.5-145.5-56.1c-1.2 63.9-21.5 122.3-58.7 167.7L248 222zM56.1 98.1c-29.7 36-47.5 78.4-53.8 122.2c50-1.5 95.5-17 131.2-44.8L56.1 98.1zm272.2 204.2c45.3-37.1 103.7-57.4 167.7-58.7c-2.6-51.9-21.1-103.1-56.1-145.5L282 256l46.3 46.3zM248 290L90.1 447.9c42.4 34.9 93.6 53.5 145.5 56.1c1.3-64 21.6-122.4 58.7-167.7L248 290zm191.9 123.9c29.7-36 47.5-78.4 53.8-122.2c-50.1 1.6-95.5 17.1-131.2 44.8l77.4 77.4zM167.7 209.7C122.3 246.9 63.9 267.3 0 268.4c2.6 51.9 21.1 103.1 56.1 145.5L214 256l-46.3-46.3zm116 292c43.8-6.3 86.2-24.1 122.2-53.8l-77.4-77.4c-27.7 35.7-43.2 81.2-44.8 131.2z",fill:"currentColor"},null,-1)],wl=l({name:"BasketballBall",render:function(l,a){return t(),e("svg",ul,hl)}}),fl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 480 512"},vl=[a("path",{d:"M438.66 212.33l-11.24-28.1l-19.93-49.83C390.38 91.63 349.57 64 303.5 64h-127c-46.06 0-86.88 27.63-103.99 70.4l-19.93 49.83l-11.24 28.1C17.22 221.5 0 244.66 0 272v48c0 16.12 6.16 30.67 16 41.93V416c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-32h256v32c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-54.07c9.84-11.25 16-25.8 16-41.93v-48c0-27.34-17.22-50.5-41.34-59.67zm-306.73-54.16c7.29-18.22 24.94-30.17 44.57-30.17h127c19.63 0 37.28 11.95 44.57 30.17L368 208H112l19.93-49.83zM80 319.8c-19.2 0-32-12.76-32-31.9S60.8 256 80 256s48 28.71 48 47.85s-28.8 15.95-48 15.95zm320 0c-19.2 0-48 3.19-48-15.95S380.8 256 400 256s32 12.76 32 31.9s-12.8 31.9-32 31.9z",fill:"currentColor"},null,-1)],yl=l({name:"CarAlt",render:function(l,a){return t(),e("svg",fl,vl)}}),xl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 576 512"},gl=[a("path",{d:"M327.1 96c-89.97 0-168.54 54.77-212.27 101.63L27.5 131.58c-12.13-9.18-30.24.6-27.14 14.66L24.54 256L.35 365.77c-3.1 14.06 15.01 23.83 27.14 14.66l87.33-66.05C158.55 361.23 237.13 416 327.1 416C464.56 416 576 288 576 256S464.56 96 327.1 96zm87.43 184c-13.25 0-24-10.75-24-24c0-13.26 10.75-24 24-24c13.26 0 24 10.74 24 24c0 13.25-10.75 24-24 24z",fill:"currentColor"},null,-1)],bl=l({name:"Fish",render:function(l,a){return t(),e("svg",xl,gl)}}),_l={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 496 512"},jl=[a("path",{d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm80 168c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zm-160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zm194.8 170.2C334.3 380.4 292.5 400 248 400s-86.3-19.6-114.8-53.8c-13.6-16.3 11-36.7 24.6-20.5c22.4 26.9 55.2 42.2 90.2 42.2s67.8-15.4 90.2-42.2c13.4-16.2 38.1 4.2 24.6 20.5z",fill:"currentColor"},null,-1)],zl=l({name:"Smile",render:function(l,a){return t(),e("svg",_l,jl)}}),Cl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 640 512"},kl=[a("path",{d:"M631.2 96.5L436.5 0C416.4 27.8 371.9 47.2 320 47.2S223.6 27.8 203.5 0L8.8 96.5c-7.9 4-11.1 13.6-7.2 21.5l57.2 114.5c4 7.9 13.6 11.1 21.5 7.2l56.6-27.7c10.6-5.2 23 2.5 23 14.4V480c0 17.7 14.3 32 32 32h256c17.7 0 32-14.3 32-32V226.3c0-11.8 12.4-19.6 23-14.4l56.6 27.7c7.9 4 17.5.8 21.5-7.2L638.3 118c4-7.9.8-17.6-7.1-21.5z",fill:"currentColor"},null,-1)],Ll=l({name:"Tshirt",render:function(l,a){return t(),e("svg",Cl,kl)}}),Ml={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Il=[a("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z",fill:"currentColor"},null,-1)],Hl=l({name:"MenuFoldOutlined",render:function(l,a){return t(),e("svg",Ml,Il)}}),Bl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Vl=[a("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z",fill:"currentColor"},null,-1)],Sl=l({name:"MenuUnfoldOutlined",render:function(l,a){return t(),e("svg",Bl,Vl)}}),Ol={class:"app-weather-list-select h-full"},Al=(l=>(g("data-v-cc7cc507"),l=l(),b(),l))((()=>a("h2",{class:"al mb10"},"天气列表",-1))),Dl={key:0},Fl={class:"d-icon d-absolute city-item-pin"},Tl={class:"al"},ql=["title"],El=["src"],Ul={class:"ar"},Wl={class:"b f22",style:{"line-height":"35px",color:"#efefef"}},Pl={class:""},$l=["onClick"],Gl={class:"d-icon d-absolute city-item-pin"},Jl=["onClick"],Kl={class:"al"},Nl={class:"f14",style:{"line-height":"35px",color:"#efefef"}},Rl=["src"],Xl={class:"ar"},Ql={class:"b f22",style:{"line-height":"35px",color:"#efefef"}},Zl={key:0},Yl=i({__name:"weather-list",props:{modelValue:Boolean,cityId:[String,Number]},emits:["change","update:modelValue"],setup(l,{emit:i}){const g=i,b=s({defaultCity:{now:{},location:{}},cityList:[],cityId:"",cityOptions:[],loading:!1});function _(l){l&&O({location:l}).then((l=>{let t=l.data||[];b.cityOptions=t}))}function j(l){g("change",l.location)}async function z(l){let t=await D.get("weather-list")||[];if(t.some((t=>t.location.id===l)))return;if(b.loading=!0,!l)return;let e=b.cityOptions.find((t=>t.id==l)),a=await S(e,!0,!1);t.push(a),b.cityList=t,await D.set("weather-list",t,18e5),b.cityId="",setTimeout((()=>{b.loading=!1}),200)}return async function(){let l=await D.getItem("weather-default-city")||{};b.defaultCity=l.data||{now:{},location:{}},l.isExp&&S(null,!0,!1).then((l=>{b.defaultCity=l,D.set("weather-default-city",l,18e5)}));let t=await D.getItem("weather-list")||[];if(b.cityList=t.data||[],!t.isExp)return;let e=(t.data||[]).map((l=>S({...l.location,type:"simple"},!0,!1)));Promise.all(e).then((l=>{b.cityList=l,D.set("weather-list",l,18e5)}))}(),(i,s)=>(t(),e("div",Ol,[Al,o(p(B),{class:"w-full mb10","append-to":"",modelValue:b.cityId,"onUpdate:modelValue":s[0]||(s[0]=l=>b.cityId=l),"remote-method":_,filterable:"",remote:"",placeholder:"输入城市、乡镇",onChange:z,size:"small",style:{"--el-text-color-placeholder":"rgba(255, 255, 255, 0.8)","--el-fill-color-blank":"rgba(255, 255, 255, 0.2)","--el-border-color":"transparent","--el-select-multiple-input-color":"#efefef"}},{default:n((()=>[(t(!0),e(r,null,c(b.cityOptions,(l=>(t(),d(p(H),{key:l.value,label:l.label,value:l.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),b.defaultCity&&b.defaultCity.now?(t(),e("div",Dl,[a("section",{class:f(["city-item",p(F)(b.defaultCity.now.cond_code)]),onClick:s[1]||(s[1]=l=>j(b.defaultCity))},[m(a("i",Fl,[o(p(ml))],512),[[u,l.cityId==b.defaultCity.location.id]]),a("div",Tl,[a("p",{class:"f12 d-elip",title:b.defaultCity.location.name,style:{"line-height":"35px",color:"#efefef"}}," 我的位置 · "+h(b.defaultCity.location.name),9,ql),a("p",null,[a("img",{class:"mr5",style:{width:"14px",height:"14px","vertical-align":"-2px"},src:`https://files.codelife.cc/itab/weather/icon/${b.defaultCity.now.cond_code}-fill.svg`},null,8,El),w(" "+h(b.defaultCity.now.cond_txt),1)])]),a("div",Ul,[a("p",Wl,h(b.defaultCity.now.tmp)+"° ",1),a("p",Pl," 最高"+h(b.defaultCity.daily_forecast&&b.defaultCity.daily_forecast[0].tmp_max)+"° 最低"+h(b.defaultCity.daily_forecast&&b.defaultCity.daily_forecast[0].tmp_min)+"° ",1)])],2),(t(!0),e(r,null,c(b.cityList,((i,s)=>(t(),e("section",{class:f(["city-item",p(F)(i.now.cond_code)]),key:s,onClick:l=>j(i)},[m(a("i",Gl,[o(p(ml))],512),[[u,l.cityId==i.location.id]]),a("i",{onClick:v((l=>function(l){b.cityList.splice(l,1),D.set("weather-list",x(b.cityList),18e5)}(s)),["stop"]),class:"d-icon d-absolute city-item-delete",title:"删除"},[o(p(q))],8,Jl),a("div",Kl,[a("p",Nl,h(i.location.name),1),a("p",null,[a("img",{class:"mr5",style:{width:"14px",height:"14px","vertical-align":"-2px"},src:`https://files.codelife.cc/itab/weather/icon/${i.now.cond_code}-fill.svg`},null,8,Rl),w(" "+h(i.now.cond_txt),1)])]),a("div",Xl,[a("p",Ql,h(i.now.tmp)+"° ",1),i.daily_forecast?(t(),e("p",Zl," 最高"+h(i.daily_forecast[0].tmp_max)+"° 最低"+h(i.daily_forecast[0].tmp_min)+"° ",1)):y("",!0)])],10,$l)))),128))])):y("",!0)]))}},[["__scopeId","data-v-cc7cc507"]]),lt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},tt=[a("path",{d:"M16 30l-3.463-5.822L6 26l1.822-6.537L2 16l5.822-3.463L6 6l6.537 1.822L16 2l3.463 5.822L26 6l-1.822 6.537L30 16l-5.822 3.463L26 26l-6.537-1.822z",fill:"currentColor"},null,-1)],et=l({name:"UvIndexFilled",render:function(l,a){return t(),e("svg",lt,tt)}}),at=l=>(g("data-v-c8510c25"),l=l(),b(),l),it={class:"d-layout h-full"},st={class:"app-weather-body d-scrollbar-hide h-full relative overflow-y-auto d-layout-content",style:{"--bg-card":"rgba(0, 0, 0, 0)","--bg-hover":"rgba(0, 0, 0, 0.2)","padding-bottom":"6px",padding:"30px 12px 20px 24px"}},ot={class:"d-flex-between"},nt={class:"f12"},rt={class:"ml5"},ct={class:"f12 ml20 weather-pubtime"},dt={class:"d-flex-y app-weather-select relative"},pt={class:"mt20 mb20 weather-nowtmp d-flex-y"},mt={class:"weather-now-tmp block"},ut={class:"ml20 f13"},ht={key:0,class:"weather-aqi",style:{"vertical-align":"middle"}},wt={class:"d-icon f20",style:{"vertical-align":"middle"}},ft={class:"mt10"},vt=["src"],yt={class:"mr10"},xt={class:"mr10"},gt={class:"mr10"},bt={key:0,class:"f13",style:{color:"rgba(255, 255, 255, 0.82)"}},_t={class:"mt10 mb10 f13 weather-info",style:{"line-height":"18px",color:"rgba(255, 255, 255, 0.82)"}},jt={class:"weather-card-bg",style:{"--bg-card":"rgba(0, 0, 0, 0)","--bg-hover":"rgba(0, 0, 0, 0.2)","padding-bottom":"10px"}},zt={class:"weather-card-title d-flex-y"},Ct={class:"d-icon f15 mr5"},kt={class:"f14 weather-hours relative"},Lt={class:"mb10 f12"},Mt={class:"mb10 d-flex-center"},It=["title","src"],Ht={class:"absolute w-full opacity-70",style:{top:"63px"}},Bt={class:"weather-card-bg"},Vt={class:"weather-card-title d-flex-y"},St={class:"d-icon f15 mr5"},Ot={class:"mt5 weather-daily_grid f14 w-full relative rounded-t-md flex leading-8"},At={style:{"line-height":"22px"}},Dt={style:{"line-height":"12px"},class:"mb10 f12 weather-date"},Ft={class:"mb10 d-flex-center"},Tt=["src"],qt=at((()=>a("p",{class:"tmp-line",style:{height:"180px"}},null,-1))),Et={class:"mb10 d-flex-center"},Ut={class:"d-icon mr5"},Wt={class:"weather-card-bg"},Pt={class:"weather-card-title d-flex-y"},$t={class:"d-icon f15 mr5"},Gt={class:"weather-lifestyle f12"},Jt={class:"d-flex-y"},Kt={class:"weather-lifestyle-icon mr10 d-flex-center"},Nt={class:"d-icon"},Rt={class:"f12"},Xt={style:{color:"rgba(255, 255, 255, 0.5)","font-weight":"200"}},Qt=at((()=>a("div",{class:"mt10 f12 ac opacity-50"},"天气数据由和风天气提供",-1))),Zt={name:"appWeather",title:"i天气",icon:"weather-icon",components:{uv:et,flu:cl,trav:ol,comf:zl,fsh:bl,cw:yl,drsg:Ll,sport:wl},description:"准确预报全球近10000多个地区的一周天气预报，包括国内县级和县级以上全部城市"},Yt=i(Object.assign(Zt,{setup(l){P([G,J,K]);const i={location:{},now:{tmp:0},daily_forecast:[{}],air_now_city:{},sun:{},rain:{},lifestyle:[]},v=_(i),x=_(E.get("weatherListVisible"));D.getItem("weather").then((l=>{v.value=l.data||i,l.isExp&&S().then((l=>{v.value=l||i}))}));const g=s({cityId:"",cityOptions:[],loading:!1,searchWeather:null,updateTime:"",hourly24Data:[]}),b={type:"line",smooth:.2,label:{show:!0,position:"bottom",color:"#fff",borderWidth:0,formatter:function(l){return l.value+"°"}},lineStyle:{width:1},symbolSize:10,itemStyle:{width:10}},q=j((()=>{let l=g.hourly24Data.map((l=>l.temp));return{backgroundColor:"transparent",color:["#fff","#fff"],grid:{left:"16px",right:"26px",bottom:"10px",top:"24px",containLabel:!1},xAxis:{type:"category",boundaryGap:!1,show:!1},yAxis:{type:"value",show:!1,min:Math.min(...l)},series:[{...b,symbolSize:6,label:{show:!0,position:"top",color:"#fff",borderWidth:0,formatter:function(l){return l.value+"°"}},data:l}]}})),R=j((()=>{const l=v.value.daily_forecast.map((l=>l.tmp_max)),t=v.value.daily_forecast.map((l=>l.tmp_min));return{backgroundColor:"transparent",color:["#fff","#fff"],grid:{left:"4%",right:"6%",bottom:30,top:30,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,show:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value",show:!1,min:Math.min(...t)},series:[{...b,label:{show:!0,position:"top",color:"#fff",borderWidth:0,formatter:function(l){return l.value+"°"}},data:l},{...b,data:t}]}})),X={cw:"洗车指数",drsg:"穿衣指数",uv:"紫外线指数",fsh:"钓鱼指数",comf:"舒适度指数",sport:"运动指数",flu:"感冒指数",trav:"旅游指数"},Z=j((()=>(v.value.lifestyle||[]).map((l=>({...l,name:X[l.type]}))))),Y=j((()=>v.value.now.cond_code&&F(v.value.now.cond_code)));async function tl(l){let t=await D.getItem("weather24H");if(t.data&&(g.hourly24Data=t.data.hourly||[]),!l&&!t.isExp)return t.data||[];let e={location:v.value.location.id,unit:"m"},a=(await A(e)||{}).data;return a&&(g.hourly24Data=a.hourly||[],g.hourly24Data.length&&D.set("weather24H",a,12e5)),a}function el(l){g.cityOptions=[],l&&O({location:l}).then((l=>{let t=l.data||[];g.cityOptions=t}))}async function il(){g.loading=!0,S(null,!0).then((l=>{v.value=l,tl(!0).then((l=>{g.hourly24Data=l.hourly||[]}))})).finally((()=>{g.loading=!1})),g.cityId=""}async function sl(l){let t=l;if("string"==typeof l){if(!l)return;t=g.cityOptions.find((t=>t.id==l))}g.loading=!0,await S(t,!0).then((l=>{v.value=l})),await tl(!0).then((l=>{g.hourly24Data=l.hourly||[]})),setTimeout((()=>{g.loading=!1}),100)}function ol(l){let t="周"+T[L(l).day()];return L(l).format("DD")==L().format("DD")&&(t="今天"),t}return tl(),(l,i)=>{const s=z("el-icon"),b=C("loading");return t(),d(M,{id:"weather-dialog","default-width":502,style:{"overflow-x":"hidden"}},{default:n((()=>[a("div",{class:f(["app-weather text-white h-full opacity-100",Y.value])},[a("div",it,[m((t(),e("div",st,[a("div",ot,[a("div",nt,[a("span",null,h(v.value.location.adm1)+" · ",1),a("span",null,h(v.value.location.name),1),a("span",rt,h(v.value.now.cond_txt),1),a("span",ct,"发布于:"+h(p(V)(v.value.updateTime)),1)]),a("div",dt,[o(p(B),{style:{width:"130px","--el-fill-color-blank":"rgba(255, 255, 255, 0.2)","--el-border-color":"transparent","--el-select-multiple-input-color":"#efefef"},"append-to":"",modelValue:g.cityId,"onUpdate:modelValue":i[0]||(i[0]=l=>g.cityId=l),"remote-method":el,filterable:"",remote:"","popper-class":"app-weather-popper",placeholder:"输入城市、乡镇",onChange:sl,size:"small"},{default:n((()=>[(t(!0),e(r,null,c(g.cityOptions,(l=>(t(),d(p(H),{key:l.value,label:l.label,value:l.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),o(s,{title:"自动定位",class:"location-btn !w-6 !h-6 text-center cursor-pointer",onClick:il},{default:n((()=>[o(p(U))])),_:1}),a("i",{class:"d-icon f22 ml5 cursor-pointer",onClick:i[1]||(i[1]=l=>(x.value=!x.value,void E.set("weatherListVisible",x.value)))},[m(o(p(Sl),null,null,512),[[u,x.value]]),m(o(p(Hl),null,null,512),[[u,!x.value]])])])]),a("div",pt,[a("span",mt,h(v.value.now.tmp)+"°",1),a("div",ut,[v.value.air_now_city?(t(),e("p",ht,[a("i",wt,[o(p(N))]),w(" "+h(v.value.air_now_city.qlty)+"/"+h(v.value.air_now_city.aqi),1)])):y("",!0),a("p",ft,[a("img",{class:"mr5",style:{width:"18px",height:"18px","vertical-align":"-4px"},src:`https://files.codelife.cc/itab/weather/icon/${v.value.now.cond_code}-fill.svg`},null,8,vt),a("span",yt,h(v.value.now.cond_txt),1),a("span",xt,h(v.value.now.wind_dir),1),a("span",gt,h(v.value.now.wind_sc)+"级",1)])])]),v.value.rain?(t(),e("div",bt,h(v.value.rain.txt),1)):y("",!0),a("div",_t,[a("span",null," 温度 "+h(v.value.daily_forecast[0].tmp_min)+"°~"+h(v.value.daily_forecast[0].tmp_max)+"° ",1),a("span",null,"湿度 "+h(v.value.now.hum)+"%",1),a("span",null,"气压 "+h(v.value.now.pres)+"hPa",1),a("span",null,"降水 "+h(v.value.now.pcpn)+"mm",1),a("span",null,"日出 "+h(v.value.sun.rise),1),a("span",null,"日落 "+h(v.value.sun.set),1)]),a("div",jt,[a("h3",zt,[a("i",Ct,[o(p(Q))]),w(" 24小时天气预报 ")]),o(I,{class:"f14 weather-hours h-[132px]"},{default:n((()=>[a("ul",kt,[(t(!0),e(r,null,c(g.hourly24Data,((l,i)=>(t(),e("li",{class:"weather-hours_item ac pb20",key:i,style:{"min-width":"50px"}},[a("p",Lt,h(p(V)(l.fxTime,"H时")),1),a("p",Mt,[a("img",{title:l.text,style:{width:"20px",height:"20px"},src:`https://files.codelife.cc/itab/weather/icon/${l.icon}-fill.svg`},null,8,It)])])))),128)),a("div",Ht,[o(p($),{style:{height:"70px"},autoresize:"",theme:"dark",class:"weather-line",option:q.value},null,8,["option"])])])])),_:1})]),a("div",Bt,[a("h3",Vt,[a("i",St,[o(p(al))]),w(" 7日天气预报 ")]),a("ul",Ot,[(t(!0),e(r,null,c(v.value.daily_forecast,((l,i)=>{return t(),e("li",{class:"weather-daily_item ac",key:i},[a("p",At,h(ol(l.date)),1),a("p",Dt,h((s=l.date,L(s).format("MM-DD"))),1),a("p",Ft,[a("img",{class:"mr5",style:{width:"18px",height:"18px"},src:`https://files.codelife.cc/itab/weather/icon/${l.cond_code_d}-fill.svg`},null,8,Tt),w(" "+h(l.cond_txt_d),1)]),qt,a("p",Et,[a("i",Ut,[o(p(W))]),w(" "+h(l.wind_sc)+"级 ",1)])]);var s})),128)),o(p($),{autoresize:"",theme:"dark",class:"weather-line",option:R.value},null,8,["option"])])]),a("div",Wt,[a("h3",Pt,[a("i",$t,[o(p(ll))]),w("生活指数 ")]),a("ul",Gt,[(t(!0),e(r,null,c(Z.value,((l,i)=>(t(),e("li",{key:i},[a("div",Jt,[a("span",Kt,[a("i",Nt,[(t(),d(k(l.type)))])]),a("dl",null,[a("dd",Rt,h(l.brf),1),a("dt",Xt,h(l.name),1)])])])))),128))])]),Qt])),[[b,g.loading]]),a("div",{class:f(["d-layout-aside weather-aside",{active:x.value}])},[o(Yl,{onChange:sl,cityId:v.value.location.id},null,8,["cityId"])],2)])],2)])),_:1})}}}),[["__scopeId","data-v-c8510c25"]]);export{Yt as default};
