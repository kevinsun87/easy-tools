import{_ as e}from"./d-dialog-Dp99XzOL.js";import{m as t,p as a,q as s,t as l,_ as o,a as i,c as r,b4 as n,B as c,I as d,u as p,v as m,E as u,s as f,b0 as g,w as x,H as h,F as y,y as v,G as j,bH as b,by as w,L as S,C,J as k,a2 as _,z as L,n as D,a_ as N,aX as A}from"./index-CyyLRP8W.js";import{D as U}from"./vuedraggable.umd-BrO2vZZS.js";import{exchangerateHistory as I,exchangerateQuery as M,exchangerateList as V}from"./exchangerate-Dci6YDU3.js";import R from"./indexdb-D6yYQ1E4.js";import E from"./eventBus-BB4cUTPt.js";/* empty css            *//* empty css                 */import{E as F,a as $}from"./el-select-D9newx6z.js";import"./el-scrollbar-BVpSQI8U.js";/* empty css                  */import"./css-D3Kd0WPg.js";import{n as z,e as H,F as q}from"./todo-nv2WtoEp.js";import{D as B}from"./decimal-DzYMnzy_.js";import{SAVE_CONFIG as G}from"./save_config-BtHImbsT.js";import{D as J}from"./d-tabs-x-fZyCMJeT.js";import{u as K,i as O,a as P,b as Y,H as Q}from"./install-DOZUvoqa.js";import{i as T,a as W}from"./install-CffqdKv_.js";import"./getAudio-D_HGGnT2.js";import{S as X,a as Z}from"./StarRegular-BQgo9xPu.js";import{A as ee}from"./Add16Filled-BRoijLYp.js";import{E as te}from"./index-BPnMED6p.js";import{ElMessage as ae}from"./index-BU0epQJo.js";import"./el-dialog-BoL22f5R.js";import"./index-CdRnR6wp.js";import"./index-B3sKL47p.js";import"./scroll-3JEGyj3w.js";import"./style-BBQwFGbP.js";import"./types-Ci7ev57k.js";import"./vnode-CwyaGvUL.js";import"./index-D4GlTUBi.js";import"./plugin-vue_export-helper-O3gUY6pX.js";import"./use-dialog-0gmd-idO.js";import"./icon-Dsqoi_oS.js";import"./event-BwRzfsZt.js";import"./index-CB1eEFAV.js";import"./_baseGet-DEcaJYAt.js";import"./isSymbol-Bt1TyP4H.js";import"./focus-trap-D8QWET1-.js";import"./aria-BUADUvnR.js";import"./use-global-config-DcVlDyFX.js";import"./index-CXKOYI6o.js";import"./isUndefined-DgmxjSXK.js";import"./index-hc1PwDik.js";import"./index-DjlyN6je.js";/* empty css                   */import"./main-DJB5iAKQ.js";import"./modulepreload-polyfill-Dqv5PPZA.js";import"./localforage-BVRgvwJc.js";/* empty css                                                 */import"./vue.runtime.esm-bundler-Ds1RV6_Q.js";import"./baseRequest-CU9cTnaC.js";import"./userInfo-CZAB7rZN.js";import"./version-DYnJBHiW.js";import"./index-D1OyjWme.js";import"./index-kxe6IHwf.js";import"./hasIn-y6DbaUwA.js";import"./index-BrMlOSMZ.js";import"./constants-Dnj8X3EN.js";import"./use-form-item-CUGNa-4i.js";import"./strings-B8lWsWjR.js";import"./isEqual-DOZxeYFr.js";import"./_baseIsEqual-DN6o0BQy.js";import"./index-BFuAB0_P.js";import"./debounce-Dd9nEzpy.js";import"./_baseIteratee-BaNfRxc9.js";import"./index-DHV32PmZ.js";import"./castArray-LUE-lsy0.js";import"./public-api-DxRCcbRs.js";import"./website-CoEF8fmW.js";import"./index-DvjFJXYU.js";import"./typescript-CRqm1_SZ.js";import"./index-DsFsGggn.js";import"./config-provider-Bf5G9WCh.js";const se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},le=[l("g",{fill:"none"},[l("path",{d:"M10 2.5a7.5 7.5 0 0 1 5.964 12.048l4.743 4.745a1 1 0 0 1-1.32 1.497l-.094-.083l-4.745-4.743A7.5 7.5 0 1 1 10 2.5zm0 2a5.5 5.5 0 1 0 0 11a5.5 5.5 0 0 0 0-11z",fill:"currentColor"})],-1)],oe=t({name:"Search24Filled",render:function(e,t){return a(),s("svg",se,le)}}),ie={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","enable-background":"new 0 0 512 512","xml:space":"preserve"},re=[l("g",null,[l("g",null,[l("path",{d:"M85,277.375h259.704L225.002,397.077L256,427l171-171L256,85l-29.922,29.924l118.626,119.701H85V277.375z"})])],-1)],ne=t({name:"MdArrowForward",render:function(e,t){return a(),s("svg",ie,re)}}),ce={class:"ac h-full ml10 pl10 pr10 pt10 relative"},de={class:"d-flex-between pl50 pr50 mt20 main-info pt10 pb10"},pe={class:"d-flex"},me=["src"],ue={class:"d-icon ml20 mr20",style:{"margin-top":"8px","font-size":"20px"}},fe=["src"],ge={class:"b f26 ar"},xe={class:"d-sub"},he={class:"",style:{width:"480px",margin:"0 auto"}},ye={class:"d-flex-between pl50 pr10 mt20"},ve=o({__name:"History",props:{data:{type:Object,default:{}}},setup(e,{expose:t}){K([O,P,Y,T,W]);const o=[{name:"48小时",id:"1",params:{length:"2",resolution:"hourly",unit:"day"}},{name:"1周",id:"2",params:{length:"7",resolution:"hourly",unit:"day"}},{name:"1个月",id:"3",params:{length:"30",resolution:"hourly",unit:"day"}},{name:"6个月",id:"4",params:{length:"6",resolution:"daily",unit:"month"}},{name:"1年",id:"5",params:{length:"1",resolution:"daily",unit:"year"}}],f=i("1"),g=i({}),x=i(!1),h=e;function y(e){v({...e.params})}function v(e={length:"2",resolution:"hourly",unit:"day"},t){t&&(f.value="1"),x.value=!0,I({source:h.data.source,target:h.data.c,...e}).then((e=>{g.value=e.data||[]})).finally((()=>{x.value=!1}))}function j(e,t="min"){if(e)return"average"===t?(e.reduce(((e,t)=>e+t),0)/e.length).toFixed(4):Math[t](...u(e))}t({reload:v});const b=r((()=>({backgroundColor:"transparent",title:{text:"",subtext:"",left:0},tooltip:{trigger:"axis"},grid:{top:36,left:0,right:10,bottom:40,containLabel:!0},xAxis:{type:"category",data:g.value.time||[],scale:!0,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1}},yAxis:{scale:!0,splitLine:{lineStyle:{color:"rgba(100,100,100,.1)"}}},series:[{type:"line",data:g.value.value||[],areaStyle:{opacity:.8,color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(84, 119, 255, .5)"},{offset:1,color:"rgba(84, 119, 255, 0)"}],globalCoord:!1}}}]})));return(t,i)=>{const r=n("loading");return a(),s("div",ce,[l("div",de,[l("div",pe,[l("span",null,[l("img",{src:`https://files.codelife.cc/itab/widget/exchangerate/${e.data.source}.png`},null,8,me),l("p",null,c(e.data.sourceName),1)]),l("i",ue,[d(p(ne))]),l("span",null,[l("img",{src:`https://files.codelife.cc/itab/widget/exchangerate/${e.data.c}.png`},null,8,fe),l("p",null,c(e.data.n),1)])]),l("span",null,[l("p",ge,c(e.data.v),1),l("p",xe," 1"+c(e.data.sourceName)+"="+c(e.data.v)+c(e.data.n),1)])]),l("div",he,[d(J,{class:"mt5",modelValue:f.value,"onUpdate:modelValue":i[0]||(i[0]=e=>f.value=e),style:{"--height":"32px"},data:o,onTabClick:y},null,8,["modelValue"])]),l("div",ye,[l("span",null,"最高："+c(j(g.value.value,"max")),1),l("span",null,"最低："+c(j(g.value.value,"min")),1),l("span",null,"平均："+c(j(g.value.value,"average")),1)]),m(d(p(Q),{autoresize:"",theme:"dark",style:{height:"calc(100% - 160px)"},class:"chart",option:b.value},null,8,["option"]),[[r,x.value]])])}}},[["__scopeId","data-v-afcdfcd8"]]),je={class:"app-rate select-text"},be={class:"d-layout h-full"},we={class:"d-left-tabs d-layout-aside pt10",style:{width:"220px"}},Se={class:"p10 d-flex-between"},Ce=(e=>(N("data-v-07873aae"),e=e(),A(),e))((()=>l("span",{class:"b"},"货币汇率",-1))),ke={class:"f12 d-sub"},_e={class:"stock-search self-content-li",style:{"background-color":"var(--bg-card)"}},Le={class:"d-flex-between self-content-li-body b"},De={class:"d-elip title d-flex-y"},Ne=["src"],Ae={class:"d-flex-between"},Ue={class:"d-flex-y"},Ie=["src"],Me={class:"ml5 d-elip",style:{"max-width":"120px"}},Ve=["onClick"],Re={class:"ar",style:{width:"50%"}},Ee={class:"f12 name"},Fe={class:"pl15 pt10 pb5 d-flex-between pr15 d-sub"},$e={key:0,class:"rate-add-select"},ze={key:0,class:"ac d-sub"},He=["onClick"],qe={class:"d-flex-between"},Be={class:"d-flex-y"},Ge=["src"],Je={class:"ml5 d-elip",style:{"max-width":"120px"}},Ke={title:"添加自选列表",class:"d-icon f18 d-hover filter-add",style:{color:"var(--d-sub)"}},Oe=["onClick"],Pe={class:"self-content-li-body d-flex-between b"},Ye=["onClick"],Qe={class:"d-elip title d-flex-y",style:{width:"44%"}},Te=["src"],We={class:"f15"},Xe={class:"ar"},Ze=["onClick"],et={class:"f12 name"},tt={class:"d-layout-content todo-content pr10 h-full",style:{"padding-top":"10px"}},at=o({__name:"Content",setup(e){let t=!0;f(!1);const o=[{c:"USD",n:"美元"},{c:"HKD",n:"港币"},{c:"JPY",n:"日元"},{c:"CNY",n:"人民币"},{c:"AUD",n:"澳大利亚元"},{c:"SGD",n:"新加坡元"}],i=f(null);let r=z.get("app-exchangerate-config")||{};const N=g({isAdd:!1,inputVal:"",rateList:[],filterRateList:[],rateSelect:[],rateMoney:r.money||100,rateSourceCode:r.source||"CNY",rateSourceName:r.sourceName||"人民币",formatSelectData:[],lastUpdateDate:r.date,activeCode:{c:"USD"},loading:!1});function A(){t&&D((()=>{i.value.reload(null,!0)}))}async function I(e){let t=(await R.getItem("app-exchangerate-icon")).data||o;N.formatSelectData=t,N.rateSelect=await R.get("app-exchangerate-select")||[];let a={money:1,source:N.rateSourceCode,target:t.map((e=>e.c)).join(",")};return N.loading=!0,M(a).then((e=>{let t=e.data||[];t.length&&(R.set("app-exchangerate-select",t,36e5),N.lastUpdateDate=e.date,N.activeCode=t[0],A(),N.rateSelect=t)})).finally((()=>{N.loading=!1}))}function J(e){t=!1;let a=[];-1==N.rateSelect.findIndex((t=>t.c==e.code))?N.rateSelect.length>=10?ae({type:"warning",message:"最多只能添加10条",duration:3e3,showClose:!0}):(a=[...u(N.rateSelect),{c:e.code,n:e.name}],R.set("app-exchangerate-icon",a,36e5).then((e=>{I(),T()})),ae({type:"success",message:`已添加【${e.name}】到自选列表`,duration:3e3,showClose:!0})):O(e)}function K(){let e=u(N.formatSelectData);R.set("app-exchangerate-icon",e,36e5).then((e=>{T()})),R.set("app-exchangerate-select",e,36e5),E.emit("app-exchangerate-icon",e,{date:N.lastUpdateDate,source:N.rateSourceCode,sourceName:N.rateSourceName,money:N.rateMoney}),T()}function O(e){if(N.rateSelect.length<2)return void ae({type:"warning",message:"至少保留一条",duration:3e3,showClose:!0});e.c=e.code||e.c;let t=N.rateSelect.findIndex((t=>t.c==e.c));N.rateSelect.splice(t,1),R.set("app-exchangerate-select",u(N.rateSelect),36e5).then((e=>{T()}))}function P(e){let t=N.rateList.find((t=>t.code===e));N.rateSourceName=t.name,N.rateSourceCode=t.code,I()}function Y(e){N.filterRateList=e?N.rateList.filter((t=>t.name.includes(e)||t.code.includes(e.toUpperCase()))):N.rateList}function Q(e){Y(e)}function T(){G("exchangerate")}return x((()=>[N.rateSelect,N.rateMoney]),(e=>{!function(e){N.formatSelectData=e.map((e=>{let t=new B(e.v||0).times(N.rateMoney||0);return{...e,v:Number(t)}}));let t=u(N.formatSelectData);R.set("app-exchangerate-icon",t,36e5),E.emit("app-exchangerate-icon",t,{date:N.lastUpdateDate,source:N.rateSourceCode,sourceName:N.rateSourceName,money:N.rateMoney})}(e[0])}),{deep:!0}),I(),async function(){let e=await R.getItem("app-exchangerate-list");e.isExp?V().then((e=>{let t=e.data||[];N.rateList=t,R.set("app-exchangerate-list",t,1728e5)})):N.rateList=e.data||[];N.filterRateList=N.rateList}(),(e,o)=>{const r=n("loading");return m((a(),s("div",je,[l("div",be,[l("aside",we,[l("div",Se,[Ce,l("span",ke,"更新于:"+c(N.lastUpdateDate),1)]),l("div",_e,[l("div",Le,[l("span",De,[l("img",{class:"rate-logo",src:`https://files.codelife.cc/itab/widget/exchangerate/${N.rateSourceCode}.png`},null,8,Ne),d(p($),{class:"rate-select","model-value":N.rateSourceCode,filterable:"",remote:"",onChange:P,"remote-method":Y,placeholder:"Select"},{default:h((()=>[(a(!0),s(y,null,v(N.filterRateList,(e=>(a(),j(p(F),{key:e.code,label:e.code,value:e.code},{default:h((()=>[l("div",Ae,[l("div",Ue,[l("img",{class:"rate-logo",src:`https://files.codelife.cc/itab/widget/exchangerate/${e.code}.png`},null,8,Ie),l("span",Me,c(e.code)+"-"+c(e.name),1)]),l("i",{onClick:b((t=>J(e)),["stop"]),title:"添加自选列表",class:"d-icon f18 d-hover filter-add",style:{color:"var(--d-sub)"}},[N.rateSelect.some((t=>t.c==e.code))?(a(),j(p(Z),{key:1})):(a(),j(p(X),{key:0}))],8,Ve)])])),_:2},1032,["label","value"])))),128))])),_:1},8,["model-value"])]),l("span",Re,[m(l("input",{class:"ar w-full f18 d-main b",type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>N.rateMoney=e)},null,512),[[w,N.rateMoney]]),l("p",Ee,c(N.rateSourceName),1)])])]),l("span",null,[l("h3",Fe,[S(" 我的自选 "),l("span",{class:"d-icon f18 d-pointer",style:C([{transition:"transform 0.2s"},""+(N.isAdd?"transform: rotate(45deg)":"")]),onClick:o[1]||(o[1]=e=>N.isAdd=!N.isAdd)},[d(p(ee))],4)]),N.isAdd?(a(),s("span",$e,[d(p(te),{onInput:Q,placeholder:"搜索",modelValue:N.inputVal,"onUpdate:modelValue":o[2]||(o[2]=e=>N.inputVal=e),"prefix-icon":p(oe),clearable:""},null,8,["modelValue","prefix-icon"]),d(_,{name:"flip-list",tag:"div",class:"rate-add-content"},{default:h((()=>[N.filterRateList.length?k("",!0):(a(),s("p",ze,"无数据")),(a(!0),s(y,null,v(N.filterRateList,(e=>(a(),s("section",{key:e.code,onClick:b((t=>J(e)),["stop"])},[l("div",qe,[l("div",Be,[l("img",{class:"rate-logo",src:`https://files.codelife.cc/itab/widget/exchangerate/${e.code}.png`},null,8,Ge),l("span",Je,c(e.code)+"-"+c(e.name),1)]),l("i",Ke,[N.rateSelect.some((t=>t.c==e.code))?(a(),j(p(Z),{key:1})):(a(),j(p(X),{key:0}))])])],8,He)))),128))])),_:1})])):k("",!0),N.isAdd?k("",!0):(a(),j(p(U),{key:1,style:{"background-color":"var(--bg-card)"},class:"self-content d-scrollbar-hide",animation:200,list:N.formatSelectData,itemKey:"f12",onEnd:K},{item:h((({element:e})=>[(a(),s("section",{class:L(["self-content-li d-hidden",{active:N.activeCode.c===e.c}]),key:e.f12,onClick:a=>{return s=e,t=!0,N.rateSelect.find((e=>e.code==s.c)),N.activeCode=N.rateSelect.find((e=>e.c==s.c)),void A();var s}},[l("p",Pe,[l("i",{class:"d-icon li-del f22",onClick:b((t=>O(e)),["stop"])},[d(p(H))],8,Ye),l("span",Qe,[l("img",{class:"rate-logo",src:`https://files.codelife.cc/itab/widget/exchangerate/${e.c}.png`},null,8,Te),l("span",We,c(e.c),1)]),l("span",Xe,[l("p",{class:"f18 val",onClick:b((t=>(q(e.v),void ae.success("汇率值已复制到剪贴板"))),["stop"])},c(e.v),9,Ze),l("p",et,c(e.n),1)])])],10,Oe))])),_:1},8,["list"]))])]),l("div",tt,[d(ve,{ref_key:"historyRef",ref:i,data:{source:N.rateSourceCode,sourceName:N.rateSourceName,...N.activeCode}},null,8,["data"])])])])),[[r,N.loading]])}}},[["__scopeId","data-v-07873aae"]]),st={name:"appStock"},lt=Object.assign(st,{setup:t=>(t,s)=>(a(),j(e,{height:"600px"},{default:h((()=>[d(at)])),_:1}))});export{lt as default};
