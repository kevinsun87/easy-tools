import{h as e,I as t,a2 as n,a3 as i,a4 as o,Y as a,_ as r,k as s,a5 as l,K as d,a6 as h,a7 as u,a8 as p,c,j as g,a9 as f,aa as m,ab as v,ac as y,ad as _,ae as x,af as S,ag as M,ah as w,ai as b,aj as I,ak as D,al as A,am as C,q as P,an as R,ao as T,ap as z,O as L,$ as O,aq as k,l as B,ar as V,as as W,at as Z,C as G,S as N,au as E,av as H,aw as F,ax as Y,ay as X,o as K,R as j,az as U,T as q,aA as J,aB as Q,P as $,y as ee,aC as te,aD as ne,Z as ie,aE as oe,aF as ae,f as re,a0 as se,aG as le,aH as de,aI as he,aJ as ue,aK as pe,aL as ce,aM as ge,aN as fe,aO as me,u as ve,v as ye,aP as _e,w as xe,aQ as Se,aR as Me,aS as we,aT as be,aU as Ie,aV as De,aW as Ae}from"./install-DOZUvoqa.js";var Ce="\0_ec_interaction_mutex";function Pe(e,t){return!!function(e){return e[Ce]||(e[Ce]={})}(e)[t]}function Re(e,t,n,i,o){e.pointerChecker&&e.pointerChecker(i,o.originX,o.originY)&&(u(i.event),Te(e,t,n,i,o))}function Te(e,t,n,i,o){o.isAvailableBehavior=s(ze,null,n,i),e.trigger(t,o)}function ze(e,t,n){var i=n[e];return!e||i&&(!c(i)||t.event[i+"Key"])}o({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},a);const Le=function(e){function t(t){var n=e.call(this)||this;n._zr=t;var i=s(n._mousedownHandler,n),o=s(n._mousemoveHandler,n),a=s(n._mouseupHandler,n),r=s(n._mousewheelHandler,n),h=s(n._pinchHandler,n);return n.enable=function(e,n){this.disable(),this._opt=l(d(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",i),t.on("mousemove",o),t.on("mouseup",a)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",r),t.on("pinch",h))},n.disable=function(){t.off("mousedown",i),t.off("mousemove",o),t.off("mouseup",a),t.off("mousewheel",r),t.off("pinch",h)},n}return r(t,e),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!h(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var n=e.offsetX,i=e.offsetY;this.pointerChecker&&this.pointerChecker(e,n,i)&&(this._x=n,this._y=i,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&ze("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!Pe(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,i=this._x,o=this._y,a=t-i,r=n-o;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&u(e.event),Te(this,"pan","moveOnMouseMove",e,{dx:a,dy:r,oldX:i,oldY:o,newX:t,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){h(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var t=ze("zoomOnMouseWheel",e,this._opt),n=ze("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,o=Math.abs(i),a=e.offsetX,r=e.offsetY;if(0!==i&&(t||n)){if(t){var s=o>3?1.4:o>1?1.2:1.1;Re(this,"zoom","zoomOnMouseWheel",e,{scale:i>0?s:1/s,originX:a,originY:r,isAvailableBehavior:null})}if(n){var l=Math.abs(i);Re(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(i>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:a,originY:r,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){Pe(this._zr,"globalPan")||Re(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(p);function Oe(e,t,n,i,o,a){e=e||0;var r=n[1]-n[0];if(null!=o&&(o=Be(o,[0,r])),null!=a&&(a=Math.max(a,null!=o?o:0)),"all"===i){var s=Math.abs(t[1]-t[0]);s=Be(s,[0,r]),o=a=Be(s,[o,a]),i=0}t[0]=Be(t[0],n),t[1]=Be(t[1],n);var l=ke(t,i);t[i]+=e;var d,h=o||0,u=n.slice();return l.sign<0?u[0]+=h:u[1]-=h,t[i]=Be(t[i],u),d=ke(t,i),null!=o&&(d.sign!==l.sign||d.span<o)&&(t[1-i]=t[i]+l.sign*o),d=ke(t,i),null!=a&&d.span>a&&(t[1-i]=t[i]+d.sign*a),t}function ke(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function Be(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var Ve=function(){function o(){}return o.prototype.getInitialData=function(o,a){var r,s,l=a.getComponent("xAxis",this.get("xAxisIndex")),d=a.getComponent("yAxis",this.get("yAxisIndex")),h=l.get("type"),u=d.get("type");"category"===h?(o.layout="horizontal",r=l.getOrdinalMeta(),s=!0):"category"===u?(o.layout="vertical",r=d.getOrdinalMeta(),s=!0):o.layout=o.layout||"horizontal";var p=["x","y"],c="horizontal"===o.layout?0:1,y=this._baseAxisDim=p[c],_=p[1-c],x=[l,d],S=x[c].get("type"),M=x[1-c].get("type"),w=o.data;if(w&&s){var b=[];g(w,(function(n,i){var o;e(n)?(o=n.slice(),n.unshift(i)):e(n.value)?((o=t({},n)).value=o.value.slice(),n.value.unshift(i)):o=n,b.push(o)})),o.data=b}var I=this.defaultValueDimensions,D=[{name:y,type:f(S),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:_,type:f(M),dimsDef:I.slice()}];return function(o,a,r){a=e(a)&&{coordDimensions:a}||t({encodeDefine:o.getEncode()},a);var s=o.getSource(),l=n(s,a).dimensions,d=new i(l,o);return d.initData(s,r),d}(this,{coordDimensions:D,dimensionsCount:I.length+1,encodeDefaulter:m(v,D,this)})},o.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},o}(),We=["color","borderColor"],Ze=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return r(t,e),t.prototype.render=function(e,t,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,t,n){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,t,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},t.prototype.eachRendered=function(e){y(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e){var t=e.getData(),n=this._data,i=this.group,o=t.getLayout("isSimpleBox"),a=e.get("clip",!0),r=e.coordinateSystem,s=r.getArea&&r.getArea();this._data||i.removeAll(),t.diff(n).add((function(n){if(t.hasValue(n)){var r=t.getItemLayout(n);if(a&&He(s,r))return;var l=Ee(r,n,!0);_(l,{shape:{points:r.ends}},e,n),Fe(l,t,n,o),i.add(l),t.setItemGraphicEl(n,l)}})).update((function(r,l){var d=n.getItemGraphicEl(l);if(t.hasValue(r)){var h=t.getItemLayout(r);a&&He(s,h)?i.remove(d):(d?(x(d,{shape:{points:h.ends}},e,r),S(d)):d=Ee(h),Fe(d,t,r,o),i.add(d),t.setItemGraphicEl(r,d))}else i.remove(d)})).remove((function(e){var t=n.getItemGraphicEl(e);t&&i.remove(t)})).execute(),this._data=t},t.prototype._renderLarge=function(e){this._clear(),je(e,this.group);var t=e.get("clip",!0)?M(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,t){for(var n,i=t.getData(),o=i.getLayout("isSimpleBox");null!=(n=e.next());){var a=Ee(i.getItemLayout(n));Fe(a,i,n,o),a.incremental=!0,this.group.add(a),this._progressiveEls.push(a)}},t.prototype._incrementalRenderLarge=function(e,t){je(t,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(w),Ge=function(){return function(){}}(),Ne=function(e){function t(t){var n=e.call(this,t)||this;return n.type="normalCandlestickBox",n}return r(t,e),t.prototype.getDefaultShape=function(){return new Ge},t.prototype.buildPath=function(e,t){var n=t.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))},t}(b);function Ee(e,t,n){var i=e.ends;return new Ne({shape:{points:n?Ye(i,e):i},z2:100})}function He(e,t){for(var n=!0,i=0;i<t.ends.length;i++)if(e.contain(t.ends[i][0],t.ends[i][1])){n=!1;break}return n}function Fe(e,t,n,i){var o=t.getItemModel(n);e.useStyle(t.getItemVisual(n,"style")),e.style.strokeNoScale=!0,e.__simpleBox=i,I(e,o)}function Ye(e,t){return D(e,(function(e){return(e=e.slice())[1]=t.initBaseline,e}))}var Xe=function(){return function(){}}(),Ke=function(e){function t(t){var n=e.call(this,t)||this;return n.type="largeCandlestickBox",n}return r(t,e),t.prototype.getDefaultShape=function(){return new Xe},t.prototype.buildPath=function(e,t){for(var n=t.points,i=0;i<n.length;)if(this.__sign===n[i++]){var o=n[i++];e.moveTo(o,n[i++]),e.lineTo(o,n[i++])}else i+=3},t}(b);function je(e,t,n,i){var o=e.getData().getLayout("largePoints"),a=new Ke({shape:{points:o},__sign:1,ignoreCoarsePointer:!0});t.add(a);var r=new Ke({shape:{points:o},__sign:-1,ignoreCoarsePointer:!0});t.add(r);var s=new Ke({shape:{points:o},__sign:0,ignoreCoarsePointer:!0});t.add(s),Ue(1,a,e),Ue(-1,r,e),Ue(0,s,e),i&&(a.incremental=!0,r.incremental=!0),n&&n.push(a,r)}function Ue(e,t,n,i){var o=n.get(["itemStyle",e>0?"borderColor":"borderColor0"])||n.get(["itemStyle",e>0?"color":"color0"]);0===e&&(o=n.get(["itemStyle","borderColorDoji"]));var a=n.getModel("itemStyle").getItemStyle(We);t.useStyle(a),t.style.fill=null,t.style.stroke=o}const qe=Ze;var Je=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return r(t,e),t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,t,n){var i=t.getItemLayout(e);return i&&n.rect(i.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(A);C(Je,Ve,!0);const Qe=Je;function $e(t){t&&e(t.series)&&g(t.series,(function(e){P(e)&&"k"===e.type&&(e.type="candlestick")}))}var et=["itemStyle","borderColor"],tt=["itemStyle","borderColor0"],nt=["itemStyle","borderColorDoji"],it=["itemStyle","color"],ot=["itemStyle","color0"];const at={seriesType:"candlestick",plan:R(),performRawSeries:!0,reset:function(e,n){function i(e,t){return t.get(e>0?it:ot)}function o(e,t){return t.get(0===e?nt:e>0?et:tt)}if(!n.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(e,n){for(var a;null!=(a=e.next());){var r=n.getItemModel(a),s=n.getItemLayout(a).sign,l=r.getItemStyle();l.fill=i(s,r),l.stroke=o(s,r)||l.fill;var d=n.ensureUniqueItemVisual(a,"style");t(d,l)}}}}};function rt(e,t,n,i,o,a){return n>i?-1:n<i?1:a?0:t>0?e.get(o,t-1)<=i?1:-1:1}const st={seriesType:"candlestick",plan:R(),reset:function(e){var t=e.coordinateSystem,n=e.getData(),i=function(e,t){var n,i=e.getBaseAxis(),o="category"===i.type?i.getBandWidth():(n=i.getExtent(),Math.abs(n[1]-n[0])/t.count()),a=L(O(e.get("barMaxWidth"),o),o),r=L(O(e.get("barMinWidth"),1),o),s=e.get("barWidth");return null!=s?L(s,o):Math.max(Math.min(o/2,a),r)}(e,n),o=["x","y"],a=n.getDimensionIndex(n.mapDimension(o[0])),r=D(n.mapDimensionsAll(o[1]),n.getDimensionIndex,n),s=r[0],l=r[1],d=r[2],h=r[3];if(n.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(a<0||r.length<4))return{progress:e.pipelineContext.large?function(n,i){var o,r,u=z(4*n.count),p=0,c=[],g=[],f=i.getStore(),m=!!e.get(["itemStyle","borderColorDoji"]);for(;null!=(r=n.next());){var v=f.get(a,r),y=f.get(s,r),_=f.get(l,r),x=f.get(d,r),S=f.get(h,r);isNaN(v)||isNaN(x)||isNaN(S)?(u[p++]=NaN,p+=3):(u[p++]=rt(f,r,y,_,l,m),c[0]=v,c[1]=x,o=t.dataToPoint(c,null,g),u[p++]=o?o[0]:NaN,u[p++]=o?o[1]:NaN,c[1]=S,o=t.dataToPoint(c,null,g),u[p++]=o?o[1]:NaN)}i.setLayout("largePoints",u)}:function(e,n){var o,r=n.getStore();for(;null!=(o=e.next());){var u=r.get(a,o),p=r.get(s,o),c=r.get(l,o),g=r.get(d,o),f=r.get(h,o),m=Math.min(p,c),v=Math.max(p,c),y=b(m,u),_=b(v,u),x=b(g,u),S=b(f,u),M=[];I(M,_,0),I(M,y,1),M.push(A(S),A(_),A(x),A(y));var w=!!n.getItemModel(o).get(["itemStyle","borderColorDoji"]);n.setItemLayout(o,{sign:rt(r,o,p,c,l,w),initBaseline:p>c?_[1]:y[1],ends:M,brushRect:D(g,f,u)})}function b(e,n){var i=[];return i[0]=n,i[1]=e,isNaN(n)||isNaN(e)?[NaN,NaN]:t.dataToPoint(i)}function I(e,t,n){var o=t.slice(),a=t.slice();o[0]=T(o[0]+i/2,1,!1),a[0]=T(a[0]-i/2,1,!0),n?e.push(o,a):e.push(a,o)}function D(e,t,n){var o=b(e,n),a=b(t,n);return o[0]-=i/2,a[0]-=i/2,{x:o[0],y:o[1],width:i,height:a[1]-o[1]}}function A(e){return e[0]=T(e[0],1),e}}}}};function lt(e){e.registerChartView(qe),e.registerSeriesModel(Qe),e.registerPreprocessor($e),e.registerVisual(at),e.registerLayout(st)}var dt=["x","y","radius","angle","single"],ht=["cartesian2d","polar","singleAxis"];function ut(e){return e+"Axis"}function pt(e,t){var n,i=k(),o=[],a=k();e.eachComponent({mainType:"dataZoom",query:t},(function(e){a.get(e.uid)||s(e)}));do{n=!1,e.eachComponent("dataZoom",r)}while(n);function r(e){!a.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis((function(e,n){var o=i.get(e);o&&o[n]&&(t=!0)})),t}(e)&&(s(e),n=!0)}function s(e){a.set(e.uid,!0),o.push(e),e.eachTargetAxis((function(e,t){(i.get(e)||i.set(e,[]))[t]=!0}))}return o}function ct(e){var t=e.ecModel,n={infoList:[],infoMap:k()};return e.eachTargetAxis((function(e,i){var o=t.getComponent(ut(e),i);if(o){var a=o.getCoordSysModel();if(a){var r=a.uid,s=n.infoMap.get(r);s||(s={model:a,axisModels:[]},n.infoList.push(s),n.infoMap.set(r,s)),s.axisModels.push(o)}}})),n}var gt=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}(),ft=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return r(t,e),t.prototype.init=function(e,t,n){var i=mt(e);this.settledOption=i,this.mergeDefaultAndTheme(e,n),this._doInit(i)},t.prototype.mergeOption=function(e){var t=mt(e);V(this.option,e,!0),V(this.settledOption,t,!0),this._doInit(t)},t.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;g([["start","startValue"],["end","endValue"]],(function(e,i){"value"===this._rangePropMode[i]&&(t[e[0]]=n[e[0]]=null)}),this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=k();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each((function(e){e.indexList.length&&(this._noTarget=!1)}),this)},t.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return g(dt,(function(n){var i=this.getReferringComponents(ut(n),W);if(i.specified){t=!0;var o=new gt;g(i.models,(function(e){o.add(e.componentIndex)})),e.set(n,o)}}),this),t},t.prototype._fillAutoTargetAxisByOrient=function(e,t){var n=this.ecModel,i=!0;if(i){var o="vertical"===t?"y":"x";a(n.findComponents({mainType:o+"Axis"}),o)}i&&a(n.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single");function a(t,n){var o=t[0];if(o){var a=new gt;if(a.add(o.componentIndex),e.set(n,a),i=!1,"x"===n||"y"===n){var r=o.getReferringComponents("grid",Z).models[0];r&&g(t,(function(e){o.componentIndex!==e.componentIndex&&r===e.getReferringComponents("grid",Z).models[0]&&a.add(e.componentIndex)}))}}}i&&g(dt,(function(t){if(i){var o=n.findComponents({mainType:ut(t),filter:function(e){return"category"===e.get("type",!0)}});if(o[0]){var a=new gt;a.add(o[0].componentIndex),e.set(t,a),i=!1}}}),this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis((function(t){!e&&(e=t)}),this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var t=this._rangePropMode,n=this.get("rangeMode");g([["start","startValue"],["end","endValue"]],(function(i,o){var a=null!=e[i[0]],r=null!=e[i[1]];a&&!r?t[o]="percent":!a&&r?t[o]="value":n?t[o]=n[o]:a&&(t[o]="percent")}))},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis((function(t,n){null==e&&(e=this.ecModel.getComponent(ut(t),n))}),this),e},t.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each((function(n,i){g(n.indexList,(function(n){e.call(t,i,n)}))}))},t.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(ut(e),t)},t.prototype.setRawRange=function(e){var t=this.option,n=this.settledOption;g([["start","startValue"],["end","endValue"]],(function(i){null==e[i[0]]&&null==e[i[1]]||(t[i[0]]=n[i[0]]=e[i[0]],t[i[1]]=n[i[1]]=e[i[1]])}),this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var t=this.option;g(["start","startValue","end","endValue"],(function(n){t[n]=e[n]}))},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var o=n[i],a=this._targetAxisInfoMap.get(o),r=0;r<a.indexList.length;r++){var s=this.getAxisProxy(o,a.indexList[r]);if(s.hostedBy(this))return s;t||(t=s)}return t},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(G);function mt(e){var t={};return g(["start","end","startValue","endValue","throttle"],(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}const vt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return r(t,e),t.prototype.render=function(e,t,n,i){this.dataZoomModel=e,this.ecModel=t,this.api=n},t.type="dataZoom",t}(N);var yt=g,_t=X,xt=function(){function e(e,t,n,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries((function(t){if(function(e){var t=e.get("coordinateSystem");return B(ht,t)>=0}(t)){var n=ut(this._dimName),i=t.getReferringComponents(n,Z).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}}),this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return d(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,i=this.getAxisModel().axis.scale,o=this._dataZoomModel.getRangePropMode(),a=[0,100],r=[],s=[];yt(["start","end"],(function(l,d){var h=e[l],u=e[l+"Value"];"percent"===o[d]?(null==h&&(h=a[d]),u=i.parse(E(h,a,n))):(t=!0,u=null==u?n[d]:i.parse(u),h=E(u,n,a)),s[d]=null==u||isNaN(u)?n[d]:u,r[d]=null==h||isNaN(h)?a[d]:h})),_t(s),_t(r);var l=this._minMaxSpan;function d(e,t,n,o,a){var r=a?"Span":"ValueSpan";Oe(0,e,n,"all",l["min"+r],l["max"+r]);for(var s=0;s<2;s++)t[s]=E(e[s],n,o,!0),a&&(t[s]=i.parse(t[s]))}return t?d(s,r,n,a,!1):d(r,s,a,n,!0),{valueWindow:s,percentWindow:r}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var i=[1/0,-1/0];yt(n,(function(e){F(i,e.getData(),t)}));var o=e.getAxisModel(),a=Y(o.axis.scale,o,i).calculate();return[a.min,a.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),o=e.get("filterMode"),a=this._valueWindow;"none"!==o&&yt(i,(function(e){var t=e.getData(),i=t.mapDimensionsAll(n);if(i.length){if("weakFilter"===o){var r=t.getStore(),s=D(i,(function(e){return t.getDimensionIndex(e)}),t);t.filterSelf((function(e){for(var t,n,o,l=0;l<i.length;l++){var d=r.get(s[l],e),h=!isNaN(d),u=d<a[0],p=d>a[1];if(h&&!u&&!p)return!0;h&&(o=!0),u&&(t=!0),p&&(n=!0)}return o&&t&&n}))}else yt(i,(function(n){if("empty"===o)e.setData(t=t.map(n,(function(e){return function(e){return e>=a[0]&&e<=a[1]}(e)?e:NaN})));else{var i={};i[n]=a,t.selectRange(i)}}));yt(i,(function(e){t.setApproximateExtent(a,e)}))}}))}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;yt(["min","max"],(function(i){var o=t.get(i+"Span"),a=t.get(i+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?o=E(n[0]+a,n,[0,100],!0):null!=o&&(a=E(o,[0,100],n,!0)-n[0]),e[i+"Span"]=o,e[i+"ValueSpan"]=a}),this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var i=H(n,[0,500]);i=Math.min(i,20);var o=e.axis.scale.rawExtentInfo;0!==t[0]&&o.setDeterminedMinMax("min",+n[0].toFixed(i)),100!==t[1]&&o.setDeterminedMinMax("max",+n[1].toFixed(i)),o.freeze()}},e}();const St={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(i,o){var a=e.getComponent(ut(i),o);t(i,o,a,n)}))}))}t((function(e,t,n,i){n.__dzAxisProxy=null}));var n=[];t((function(t,i,o,a){o.__dzAxisProxy||(o.__dzAxisProxy=new xt(t,i,a,e),n.push(o.__dzAxisProxy))}));var i=k();return g(n,(function(e){g(e.getTargetSeriesModels(),(function(e){i.set(e.uid,e)}))})),i},overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(t,n){e.getAxisProxy(t,n).reset(e)})),e.eachTargetAxis((function(n,i){e.getAxisProxy(n,i).filterData(e,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),i=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}}))}};var Mt=!1;function wt(e){Mt||(Mt=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,St),function(e){e.registerAction("dataZoom",(function(e,t){var n=pt(t,e);g(n,(function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))}(e),e.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}const bt=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e.layoutMode={type:"box",ignoreSize:!0},e}return r(n,t),n.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},n.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},n.prototype._updateSelector=function(t){var n=t.selector,i=this.ecModel;!0===n&&(n=t.selector=["all","inverse"]),e(n)&&g(n,(function(e,t){c(e)&&(e={type:e}),n[t]=V(e,function(e,t){return"all"===t?{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])}:"inverse"===t?{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(i,e.type))}))},n.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var i=e[n].get("name");if(this.isSelected(i)){this.select(i),t=!0;break}}!t&&this.select(e[0].get("name"))}},n.prototype._updateData=function(e){var t=[],n=[];e.eachRawSeries((function(i){var o,a=i.name;if(n.push(a),i.legendVisualProvider){var r=i.legendVisualProvider.getAllNames();e.isSeriesFiltered(i)||(n=n.concat(r)),r.length?t=t.concat(r):o=!0}else o=!0;o&&U(i)&&t.push(i.name)})),this._availableNames=n;var i=this.get("data")||t,o=k(),a=D(i,(function(e){return(c(e)||Q(e))&&(e={name:e}),o.get(e.name)?null:(o.set(e.name,!0),new q(e,this,this.ecModel))}),this);this._data=J(a,(function(e){return!!e}))},n.prototype.getData=function(){return this._data},n.prototype.select=function(e){var t=this.option.selected;if("single"===this.get("selectedMode")){var n=this._data;g(n,(function(e){t[e.get("name")]=!1}))}t[e]=!0},n.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},n.prototype.toggleSelected=function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},n.prototype.allSelect=function(){var e=this._data,t=this.option.selected;g(e,(function(e){t[e.get("name",!0)]=!0}))},n.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;g(e,(function(e){var n=e.get("name",!0);t.hasOwnProperty(n)||(t[n]=!0),t[n]=!t[n]}))},n.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&B(this._availableNames,e)>=0},n.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},n.type="legend.plain",n.dependencies=["series"],n.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},n}(G);var It=m,Dt=g,At=pe;function Ct(e,t,n,i){Tt(e,t,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),Rt(e,t,n,i)}function Pt(e){for(var t,n=e.getZr().storage.getDisplayList(),i=0,o=n.length;i<o&&!(t=n[i].states.emphasis);)i++;return t&&t.hoverLayer}function Rt(e,t,n,i){Pt(n)||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:i})}function Tt(e,t,n,i){Pt(n)||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:i})}const zt=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t.newlineDisabled=!1,t}return r(n,e),n.prototype.init=function(){this.group.add(this._contentGroup=new At),this.group.add(this._selectorGroup=new At),this._isFirstRender=!0},n.prototype.getContentGroup=function(){return this._contentGroup},n.prototype.getSelectorGroup=function(){return this._selectorGroup},n.prototype.render=function(e,t,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var o=e.get("align"),a=e.get("orient");o&&"auto"!==o||(o="right"===e.get("left")&&"vertical"===a?"right":"left");var r=e.get("selector",!0),s=e.get("selectorPosition",!0);!r||s&&"auto"!==s||(s="horizontal"===a?"end":"start"),this.renderInner(o,e,t,n,r,a,s);var d=e.getBoxLayoutParams(),h={width:n.getWidth(),height:n.getHeight()},u=e.get("padding"),p=$(d,h,u),c=this.layoutInner(e,o,p,i,r,s),g=$(l({width:c.width,height:c.height},d),h,u);this.group.x=g.x-c.x,this.group.y=g.y-c.y,this.group.markRedraw(),this.group.add(this._backgroundEl=function(e,t){var n=K(t.get("padding")),i=t.getItemStyle(["color","opacity"]);return i.fill=t.get("backgroundColor"),new j({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:i,silent:!0,z2:-1})}(c,e))}},n.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},n.prototype.renderInner=function(e,n,i,o,a,r,s){var l=this.getContentGroup(),d=k(),h=n.get("selectedMode"),u=[];i.eachRawSeries((function(e){!e.get("legendHoverLink")&&u.push(e.id)})),Dt(n.getData(),(function(a,r){var s=a.get("name");if(!this.newlineDisabled&&(""===s||"\n"===s)){var p=new At;return p.newline=!0,void l.add(p)}var c=i.getSeriesByName(s)[0];if(!d.get(s))if(c){var g=c.getData(),f=g.getVisual("legendLineStyle")||{},m=g.getVisual("legendIcon"),v=g.getVisual("style"),y=this._createItem(c,s,r,a,n,e,f,v,m,h,o);y.on("click",It(Ct,s,null,o,u)).on("mouseover",It(Rt,c.name,null,o,u)).on("mouseout",It(Tt,c.name,null,o,u)),i.ssr&&y.eachChild((function(e){var t=ee(e);t.seriesIndex=c.seriesIndex,t.dataIndex=r,t.ssrType="legend"})),d.set(s,!0)}else i.eachRawSeries((function(l){if(!d.get(s)&&l.legendVisualProvider){var p=l.legendVisualProvider;if(!p.containName(s))return;var c=p.indexOfName(s),g=p.getItemVisual(c,"style"),f=p.getItemVisual(c,"legendIcon"),m=te(g.fill);m&&0===m[3]&&(m[3]=.2,g=t(t({},g),{fill:ne(m,"rgba")}));var v=this._createItem(l,s,r,a,n,e,{},g,f,h,o);v.on("click",It(Ct,null,s,o,u)).on("mouseover",It(Rt,null,s,o,u)).on("mouseout",It(Tt,null,s,o,u)),i.ssr&&v.eachChild((function(e){var t=ee(e);t.seriesIndex=l.seriesIndex,t.dataIndex=r,t.ssrType="legend"})),d.set(s,!0)}}),this)}),this),a&&this._createSelector(a,n,o,r,s)},n.prototype._createSelector=function(e,t,n,i,o){var a=this.getSelectorGroup();Dt(e,(function(e){var i=e.type,o=new ie({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});a.add(o);var r=t.getModel("selectorLabel"),s=t.getModel(["emphasis","selectorLabel"]);oe(o,{normal:r,emphasis:s},{defaultText:e.title}),ae(o)}))},n.prototype._createItem=function(e,t,n,i,o,a,r,s,l,d,h){var u=e.visualDrawType,p=o.get("itemWidth"),g=o.get("itemHeight"),f=o.isSelected(t),m=i.get("symbolRotate"),v=i.get("symbolKeepAspect"),y=i.get("icon"),_=function(e,t,n,i,o,a,r){function s(e,t){"auto"===e.lineWidth&&(e.lineWidth=t.lineWidth>0?2:0),Dt(e,(function(n,i){"inherit"===e[i]&&(e[i]=t[i])}))}var l=t.getModel("itemStyle"),d=l.getItemStyle(),h=0===e.lastIndexOf("empty",0)?"fill":"stroke",u=l.getShallow("decal");d.decal=u&&"inherit"!==u?he(u,r):i.decal,"inherit"===d.fill&&(d.fill=i[o]);"inherit"===d.stroke&&(d.stroke=i[h]);"inherit"===d.opacity&&(d.opacity=("fill"===o?i:n).opacity);s(d,i);var p=t.getModel("lineStyle"),c=p.getLineStyle();if(s(c,n),"auto"===d.fill&&(d.fill=i.fill),"auto"===d.stroke&&(d.stroke=i.fill),"auto"===c.stroke&&(c.stroke=i.fill),!a){var g=t.get("inactiveBorderWidth"),f=d[h];d.lineWidth="auto"===g?i.lineWidth>0&&f?2:0:d.lineWidth,d.fill=t.get("inactiveColor"),d.stroke=t.get("inactiveBorderColor"),c.stroke=p.get("inactiveColor"),c.lineWidth=p.get("inactiveWidth")}return{itemStyle:d,lineStyle:c}}(l=y||l||"roundRect",i,r,s,u,f,h),x=new At,S=i.getModel("textStyle");if(!re(e.getLegendIcon)||y&&"inherit"!==y){var M="inherit"===y&&e.getData().getVisual("symbol")?"inherit"===m?e.getData().getVisual("symbolRotate"):m:0;x.add(function(e){var t=e.icon||"roundRect",n=ue(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);n.setStyle(e.itemStyle),n.rotation=(e.iconRotate||0)*Math.PI/180,n.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2);return n}({itemWidth:p,itemHeight:g,icon:l,iconRotate:M,itemStyle:_.itemStyle,lineStyle:_.lineStyle,symbolKeepAspect:v}))}else x.add(e.getLegendIcon({itemWidth:p,itemHeight:g,icon:l,iconRotate:m,itemStyle:_.itemStyle,lineStyle:_.lineStyle,symbolKeepAspect:v}));var w="left"===a?p+5:-5,b=a,I=o.get("formatter"),D=t;c(I)&&I?D=I.replace("{name}",null!=t?t:""):re(I)&&(D=I(t));var A=f?S.getTextColor():i.get("inactiveColor");x.add(new ie({style:se(S,{text:D,x:w,y:g/2,fill:A,align:b,verticalAlign:"middle"},{inheritColor:A})}));var C=new j({shape:x.getBoundingRect(),style:{fill:"transparent"}}),P=i.getModel("tooltip");return P.get("show")&&le({el:C,componentModel:o,itemName:t,itemTooltipOption:P.option}),x.add(C),x.eachChild((function(e){e.silent=!0})),C.silent=!d,this.getContentGroup().add(x),ae(x),x.__legendDataIndex=n,x},n.prototype.layoutInner=function(e,t,n,i,o,a){var r=this.getContentGroup(),s=this.getSelectorGroup();de(e.get("orient"),r,e.get("itemGap"),n.width,n.height);var l=r.getBoundingRect(),d=[-l.x,-l.y];if(s.markRedraw(),r.markRedraw(),o){de("horizontal",s,e.get("selectorItemGap",!0));var h=s.getBoundingRect(),u=[-h.x,-h.y],p=e.get("selectorButtonGap",!0),c=e.getOrient().index,g=0===c?"width":"height",f=0===c?"height":"width",m=0===c?"y":"x";"end"===a?u[c]+=l[g]+p:d[c]+=h[g]+p,u[1-c]+=l[f]/2-h[f]/2,s.x=u[0],s.y=u[1],r.x=d[0],r.y=d[1];var v={x:0,y:0};return v[g]=l[g]+p+h[g],v[f]=Math.max(l[f],h[f]),v[m]=Math.min(0,h[m]+u[1-c]),v}return r.x=d[0],r.y=d[1],this.group.getBoundingRect()},n.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},n.type="legend.plain",n}(N);function Lt(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries((function(e){for(var n=0;n<t.length;n++)if(!t[n].isSelected(e.name))return!1;return!0}))}function Ot(e,t,n){var i,o={},a="toggleSelected"===e;return n.eachComponent("legend",(function(n){a&&null!=i?n[i?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?n[e]():(n[e](t.name),i=n.isSelected(t.name));var r=n.getData();g(r,(function(e){var t=e.get("name");if("\n"!==t&&""!==t){var i=n.isSelected(t);o.hasOwnProperty(t)?o[t]=o[t]&&i:o[t]=i}}))})),"allSelect"===e||"inverseSelect"===e?{selected:o}:{name:t.name,selected:o}}function kt(e){e.registerComponentModel(bt),e.registerComponentView(zt),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,Lt),e.registerSubTypeDefaulter("legend",(function(){return"plain"})),function(e){e.registerAction("legendToggleSelect","legendselectchanged",m(Ot,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",m(Ot,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",m(Ot,"inverseSelect")),e.registerAction("legendSelect","legendselected",m(Ot,"select")),e.registerAction("legendUnSelect","legendunselected",m(Ot,"unSelect"))}(e)}function Bt(e,t,n){var i=[1,1];i[e.getOrient().index]=0,fe(t,n,{type:"box",ignoreSize:!!i})}const Vt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return r(t,e),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(t,n,i){var o=ce(t);e.prototype.init.call(this,t,n,i),Bt(this,t,o)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),Bt(this,this.option,t)},t.type="legend.scroll",t.defaultOption=ge(bt.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(bt);var Wt=pe,Zt=["width","height"],Gt=["x","y"];const Nt=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e.newlineDisabled=!0,e._currentIndex=0,e}return r(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new Wt),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Wt)},n.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},n.prototype.renderInner=function(n,i,o,a,r,l,d){var h=this;t.prototype.renderInner.call(this,n,i,o,a,r,l,d);var u=this._controllerGroup,p=i.get("pageIconSize",!0),c=e(p)?p:[p,p];f("pagePrev",0);var g=i.getModel("pageTextStyle");function f(e,t){var n=e+"DataIndex",o=me(i.get("pageIcons",!0)[i.getOrient().name][t],{onclick:s(h._pageGo,h,n,i,a)},{x:-c[0]/2,y:-c[1]/2,width:c[0],height:c[1]});o.name=e,u.add(o)}u.add(new ie({name:"pageText",style:{text:"xx/xx",fill:g.getTextColor(),font:g.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),f("pageNext",1)},n.prototype.layoutInner=function(e,t,n,i,o,a){var r=this.getSelectorGroup(),s=e.getOrient().index,l=Zt[s],h=Gt[s],u=Zt[1-s],p=Gt[1-s];o&&de("horizontal",r,e.get("selectorItemGap",!0));var c=e.get("selectorButtonGap",!0),g=r.getBoundingRect(),f=[-g.x,-g.y],m=d(n);o&&(m[l]=n[l]-g[l]-c);var v=this._layoutContentAndController(e,i,m,s,l,u,p,h);if(o){if("end"===a)f[s]+=v[l]+c;else{var y=g[l]+c;f[s]-=y,v[h]-=y}v[l]+=g[l]+c,f[1-s]+=v[p]+v[u]/2-g[u]/2,v[u]=Math.max(v[u],g[u]),v[p]=Math.min(v[p],g[p]+f[1-s]),r.x=f[0],r.y=f[1],r.markRedraw()}return v},n.prototype._layoutContentAndController=function(e,t,n,i,o,a,r,s){var l=this.getContentGroup(),d=this._containerGroup,h=this._controllerGroup;de(e.get("orient"),l,e.get("itemGap"),i?n.width:null,i?null:n.height),de("horizontal",h,e.get("pageButtonItemGap",!0));var u=l.getBoundingRect(),p=h.getBoundingRect(),c=this._showController=u[o]>n[o],g=[-u.x,-u.y];t||(g[i]=l[s]);var f=[0,0],m=[-p.x,-p.y],v=O(e.get("pageButtonGap",!0),e.get("itemGap",!0));c&&("end"===e.get("pageButtonPosition",!0)?m[i]+=n[o]-p[o]:f[i]+=p[o]+v);m[1-i]+=u[a]/2-p[a]/2,l.setPosition(g),d.setPosition(f),h.setPosition(m);var y={x:0,y:0};if(y[o]=c?n[o]:u[o],y[a]=Math.max(u[a],p[a]),y[r]=Math.min(0,p[r]+m[1-i]),d.__rectSize=n[o],c){var _={x:0,y:0};_[o]=Math.max(n[o]-p[o]-v,0),_[a]=y[a],d.setClipPath(new j({shape:_})),d.__rectSize=_[o]}else h.eachChild((function(e){e.attr({invisible:!0,silent:!0})}));var S=this._getPageInfo(e);return null!=S.pageIndex&&x(l,{x:S.contentPosition[0],y:S.contentPosition[1]},c?e:null),this._updatePageInfoView(e,S),y},n.prototype._pageGo=function(e,t,n){var i=this._getPageInfo(t)[e];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:t.id})},n.prototype._updatePageInfoView=function(e,t){var n=this._controllerGroup;g(["pagePrev","pageNext"],(function(i){var o=null!=t[i+"DataIndex"],a=n.childOfName(i);a&&(a.setStyle("fill",o?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),a.cursor=o?"pointer":"default")}));var i=n.childOfName("pageText"),o=e.get("pageFormatter"),a=t.pageIndex,r=null!=a?a+1:0,s=t.pageCount;i&&o&&i.setStyle("text",c(o)?o.replace("{current}",null==r?"":r+"").replace("{total}",null==s?"":s+""):o({current:r,total:s}))},n.prototype._getPageInfo=function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,o=e.getOrient().index,a=Zt[o],r=Gt[o],s=this._findTargetItemIndex(t),l=n.children(),d=l[s],h=l.length,u=h?1:0,p={contentPosition:[n.x,n.y],pageCount:u,pageIndex:u-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return p;var c=y(d);p.contentPosition[o]=-c.s;for(var g=s+1,f=c,m=c,v=null;g<=h;++g)(!(v=y(l[g]))&&m.e>f.s+i||v&&!_(v,f.s))&&(f=m.i>f.i?m:v)&&(null==p.pageNextDataIndex&&(p.pageNextDataIndex=f.i),++p.pageCount),m=v;for(g=s-1,f=c,m=c,v=null;g>=-1;--g)(v=y(l[g]))&&_(m,v.s)||!(f.i<m.i)||(m=f,null==p.pagePrevDataIndex&&(p.pagePrevDataIndex=f.i),++p.pageCount,++p.pageIndex),f=v;return p;function y(e){if(e){var t=e.getBoundingRect(),n=t[r]+e[r];return{s:n,e:n+t[a],i:e.__legendDataIndex}}}function _(e,t){return e.e>=t&&e.s<=t+i}},n.prototype._findTargetItemIndex=function(e){return this._showController?(this.getContentGroup().eachChild((function(i,o){var a=i.__legendDataIndex;null==n&&null!=a&&(n=o),a===e&&(t=o)})),null!=t?t:n):0;var t,n},n.type="legend.scroll",n}(zt);function Et(e){ve(kt),e.registerComponentModel(Vt),e.registerComponentView(Nt),function(e){e.registerAction("legendScroll","legendscroll",(function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},(function(e){e.setScrollDataIndex(n)}))}))}(e)}function Ht(e){ve(kt),ve(Et)}const Ft=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return r(t,e),t.type="dataZoom.inside",t.defaultOption=ge(ft.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(ft);var Yt=_e();function Xt(e,t){if(t){e.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function Kt(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function jt(e,t,n,i){return e.coordinateSystem.containPoint([n,i])}function Ut(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,(function(e,t){var n=Yt(t),i=n.coordSysRecordMap||(n.coordSysRecordMap=k());i.each((function(e){e.dataZoomInfoMap=null})),e.eachComponent({mainType:"dataZoom",subType:"inside"},(function(e){var n=ct(e);g(n.infoList,(function(n){var o=n.model.uid,a=i.get(o)||i.set(o,function(e,t){var n={model:t,containsPoint:m(jt,t),dispatchAction:m(Kt,e),dataZoomInfoMap:null,controller:null},i=n.controller=new Le(e.getZr());return g(["pan","zoom","scrollMove"],(function(e){i.on(e,(function(t){var i=[];n.dataZoomInfoMap.each((function(o){if(t.isAvailableBehavior(o.model.option)){var a=(o.getRange||{})[e],r=a&&a(o.dzReferCoordSysInfo,n.model.mainType,n.controller,t);!o.model.get("disabled",!0)&&r&&i.push({dataZoomId:o.model.id,start:r[0],end:r[1]})}})),i.length&&n.dispatchAction(i)}))})),n}(t,n.model));(a.dataZoomInfoMap||(a.dataZoomInfoMap=k())).set(e.uid,{dzReferCoordSysInfo:n,model:e,getRange:null})}))})),i.each((function(e){var t,n=e.controller,o=e.dataZoomInfoMap;if(o){var a=o.keys()[0];null!=a&&(t=o.get(a))}if(t){var r=function(e){var t,n="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return e.each((function(e){var a=e.model,r=!a.get("disabled",!0)&&(!a.get("zoomLock",!0)||"move");i[n+r]>i[n+t]&&(t=r),o=o&&a.get("preventDefaultMouseMove",!0)})),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}(o);n.enable(r.controlType,r.opt),n.setPointerChecker(e.containsPoint),ye(e,"dispatchAction",t.model.get("throttle",!0),"fixRate")}else Xt(i,e)}))}))}var qt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return r(t,e),t.prototype.render=function(t,n,i){e.prototype.render.apply(this,arguments),t.noTarget()?this._clear():(this.range=t.getPercentRange(),function(e,t,n){Yt(e).coordSysRecordMap.each((function(e){var i=e.dataZoomInfoMap.get(t.uid);i&&(i.getRange=n)}))}(i,t,{pan:s(Jt.pan,this),zoom:s(Jt.zoom,this),scrollMove:s(Jt.scrollMove,this)}))},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){!function(e,t){for(var n=Yt(e).coordSysRecordMap,i=n.keys(),o=0;o<i.length;o++){var a=i[o],r=n.get(a),s=r.dataZoomInfoMap;if(s){var l=t.uid;s.get(l)&&(s.removeKey(l),s.keys().length||Xt(n,r))}}}(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(vt),Jt={zoom:function(e,t,n,i){var o=this.range,a=o.slice(),r=e.axisModels[0];if(r){var s=$t[t](null,[i.originX,i.originY],r,n,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],d=Math.max(1/i.scale,0);a[0]=(a[0]-l)*d+l,a[1]=(a[1]-l)*d+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return Oe(0,a,[0,100],0,h.minSpan,h.maxSpan),this.range=a,o[0]!==a[0]||o[1]!==a[1]?a:void 0}},pan:Qt((function(e,t,n,i,o,a){var r=$t[i]([a.oldX,a.oldY],[a.newX,a.newY],t,o,n);return r.signal*(e[1]-e[0])*r.pixel/r.pixelLength})),scrollMove:Qt((function(e,t,n,i,o,a){return $t[i]([0,0],[a.scrollDelta,a.scrollDelta],t,o,n).signal*(e[1]-e[0])*a.scrollDelta}))};function Qt(e){return function(t,n,i,o){var a=this.range,r=a.slice(),s=t.axisModels[0];if(s)return Oe(e(r,s,t,n,i,o),r,[0,100],"all"),this.range=r,a[0]!==r[0]||a[1]!==r[1]?r:void 0}}var $t={grid:function(e,t,n,i,o){var a=n.axis,r={},s=o.model.coordinateSystem.getRect();return e=e||[0,0],"x"===a.dim?(r.pixel=t[0]-e[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=a.inverse?-1:1),r},polar:function(e,t,n,i,o){var a=n.axis,r={},s=o.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),d=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===n.mainType?(r.pixel=t[0]-e[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=d[1]-d[0],r.pixelStart=d[0],r.signal=a.inverse?-1:1),r},singleAxis:function(e,t,n,i,o){var a=n.axis,r=o.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===a.orient?(s.pixel=t[0]-e[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=a.inverse?-1:1),s}};const en=qt;function tn(e){wt(e),e.registerComponentModel(Ft),e.registerComponentView(en),Ut(e)}const nn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return r(t,e),t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=ge(ft.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(ft);var on=j,an="horizontal",rn="vertical",sn=["line","bar","candlestick","scatter"],ln={easing:"cubicOut",duration:100,delay:0};function dn(e){return"vertical"===e?"ns-resize":"ew-resize"}const hn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return r(t,e),t.prototype.init=function(e,t){this.api=t,this._onBrush=s(this._onBrush,this),this._onBrushEnd=s(this._onBrushEnd,this)},t.prototype.render=function(t,n,i,o){if(e.prototype.render.apply(this,arguments),ye(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),!1!==t.get("show")){if(t.noTarget())return this._clear(),void this.group.removeAll();o&&"dataZoom"===o.type&&o.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){xe(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new pe;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,n=e.get("brushSelect")?7:0,i=this._findCoordRect(),o={width:t.getWidth(),height:t.getHeight()},a=this._orient===an?{right:o.width-i.x-i.width,top:o.height-30-7-n,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},r=ce(e.option);g(["right","top","width","height"],(function(e){"ph"===r[e]&&(r[e]=a[e])}));var s=$(r,o);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===rn&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,t=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),a=this._displayables.sliderGroup,r=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n!==an||o?n===an&&o?{scaleY:r?1:-1,scaleX:-1}:n!==rn||o?{scaleY:r?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:r?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:r?1:-1,scaleX:1});var s=e.getBoundingRect([a]);e.x=t.x-s.x,e.y=t.y-s.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,n=this._displayables.sliderGroup,i=e.get("brushSelect");n.add(new on({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var o=new on({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:s(this._onClickPanel,this)}),a=this.api.getZr();i?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",a.on("mousemove",this._onBrush),a.on("mouseup",this._onBrushEnd)):(a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)),n.add(o)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],e){var t=this._size,n=this._shadowSize||[],i=e.series,o=i.getRawData(),a=i.getShadowDim&&i.getShadowDim(),r=a&&o.getDimensionInfo(a)?i.getShadowDim():e.otherDim;if(null!=r){var s=this._shadowPolygonPts,l=this._shadowPolylinePts;if(o!==this._shadowData||r!==this._shadowDim||t[0]!==n[0]||t[1]!==n[1]){var d=o.getDataExtent(r),h=.3*(d[1]-d[0]);d=[d[0]-h,d[1]+h];var u,p=[0,t[1]],c=[0,t[0]],g=[[t[0],0],[0,0]],f=[],m=c[1]/(o.count()-1),v=0,y=Math.round(o.count()/t[0]);o.each([r],(function(e,t){if(y>0&&t%y)v+=m;else{var n=null==e||isNaN(e)||""===e,i=n?0:E(e,d,p,!0);n&&!u&&t?(g.push([g[g.length-1][0],0]),f.push([f[f.length-1][0],0])):!n&&u&&(g.push([v,0]),f.push([v,0])),g.push([v,i]),f.push([v,i]),v+=m,u=n}})),s=this._shadowPolygonPts=g,l=this._shadowPolylinePts=f}this._shadowData=o,this._shadowDim=r,this._shadowSize=[t[0],t[1]];for(var _,x,S,M,w,b=this.dataZoomModel,I=0;I<3;I++){var D=(_=1===I,x=void 0,S=void 0,M=void 0,w=void 0,x=b.getModel(_?"selectedDataBackground":"dataBackground"),S=new pe,M=new De({shape:{points:s},segmentIgnoreThreshold:1,style:x.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),w=new Ae({shape:{points:l},segmentIgnoreThreshold:1,style:x.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),S.add(M),S.add(w),S);this._displayables.sliderGroup.add(D),this._displayables.dataShadowSegs.push(D)}}}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,i=this.ecModel;return e.eachTargetAxis((function(o,a){var r=e.getAxisProxy(o,a).getTargetSeriesModels();g(r,(function(e){if(!(n||!0!==t&&B(sn,e.get("type"))<0)){var r,s=i.getComponent(ut(o),a).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[o],d=e.coordinateSystem;null!=l&&d.getOtherAxis&&(r=d.getOtherAxis(s).inverse),l=e.getData().mapDimension(l),n={thisAxis:s,series:e,thisDim:o,otherDim:l,otherAxisInverse:r}}}),this)}),this),n}},t.prototype._renderHandle=function(){var e=this.group,t=this._displayables,n=t.handles=[null,null],i=t.handleLabels=[null,null],o=this._displayables.sliderGroup,a=this._size,r=this.dataZoomModel,l=this.api,d=r.get("borderRadius")||0,h=r.get("brushSelect"),u=t.filler=new on({silent:h,style:{fill:r.get("fillerColor")},textConfig:{position:"inside"}});o.add(u),o.add(new on({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1],r:d},style:{stroke:r.get("dataBackgroundColor")||r.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),g([0,1],(function(t){var a=r.get("handleIcon");!Se[a]&&a.indexOf("path://")<0&&a.indexOf("image://")<0&&(a="path://"+a);var l=ue(a,-1,0,2,2,null,!0);l.attr({cursor:dn(this._orient),draggable:!0,drift:s(this._onDragMove,this,t),ondragend:s(this._onDragEnd,this),onmouseover:s(this._showDataInfo,this,!0),onmouseout:s(this._showDataInfo,this,!1),z2:5});var d=l.getBoundingRect(),h=r.get("handleSize");this._handleHeight=L(h,this._size[1]),this._handleWidth=d.width/d.height*this._handleHeight,l.setStyle(r.getModel("handleStyle").getItemStyle()),l.style.strokeNoScale=!0,l.rectHover=!0,l.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),ae(l);var u=r.get("handleColor");null!=u&&(l.style.fill=u),o.add(n[t]=l);var p=r.getModel("textStyle");e.add(i[t]=new ie({silent:!0,invisible:!0,style:se(p,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:p.getTextColor(),font:p.getFont()}),z2:10}))}),this);var p=u;if(h){var c=L(r.get("moveHandleSize"),a[1]),f=t.moveHandle=new j({style:r.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:a[1]-.5,height:c}}),m=.8*c,v=t.moveHandleIcon=ue(r.get("moveHandleIcon"),-m/2,-m/2,m,m,"#fff",!0);v.silent=!0,v.y=a[1]+c/2-.5,f.ensureState("emphasis").style=r.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(a[1]/2,Math.max(c,10));(p=t.moveZone=new j({invisible:!0,shape:{y:a[1]-y,height:c+y}})).on("mouseover",(function(){l.enterEmphasis(f)})).on("mouseout",(function(){l.leaveEmphasis(f)})),o.add(f),o.add(v),o.add(p)}p.attr({draggable:!0,cursor:dn(this._orient),drift:s(this._onDragMove,this,"all"),ondragstart:s(this._showDataInfo,this,!0),ondragend:s(this._onDragEnd,this),onmouseover:s(this._showDataInfo,this,!0),onmouseout:s(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[E(e[0],[0,100],t,!0),E(e[1],[0,100],t,!0)]},t.prototype._updateInterval=function(e,t){var n=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),r=[0,100];Oe(t,i,o,n.get("zoomLock")?"all":e,null!=a.minSpan?E(a.minSpan,r,o,!0):null,null!=a.maxSpan?E(a.maxSpan,r,o,!0):null);var s=this._range,l=this._range=X([E(i[0],o,r,!0),E(i[1],o,r,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},t.prototype._updateView=function(e){var t=this._displayables,n=this._handleEnds,i=X(n.slice()),o=this._size;g([0,1],(function(e){var i=t.handles[e],a=this._handleHeight;i.attr({scaleX:a/2,scaleY:a/2,x:n[e]+(e?-1:1),y:o[1]/2-a/2})}),this),t.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]});var a={x:i[0],width:i[1]-i[0]};t.moveHandle&&(t.moveHandle.setShape(a),t.moveZone.setShape(a),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",a.x+a.width/2));for(var r=t.dataShadowSegs,s=[0,i[0],i[1],o[0]],l=0;l<r.length;l++){var d=r[l],h=d.getClipPath();h||(h=new j,d.setClipPath(h)),h.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:o[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,n=this._displayables,i=n.handleLabels,o=this._orient,a=["",""];if(t.get("showDetail")){var r=t.findRepresentativeAxisProxy();if(r){var s=r.getAxisModel().axis,l=this._range,d=e?r.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:r.getDataValueWindow();a=[this._formatLabel(d[0],s),this._formatLabel(d[1],s)]}}var h=X(this._handleEnds.slice());function u(e){var t=Me(n.handles[e].parent,this.group),r=we(0===e?"right":"left",t),s=this._handleWidth/2+5,l=be([h[e]+(0===e?-s:s),this._size[1]/2],t);i[e].setStyle({x:l[0],y:l[1],verticalAlign:o===an?"middle":r,align:o===an?r:"center",text:a[e]})}u.call(this,0),u.call(this,1)},t.prototype._formatLabel=function(e,t){var n=this.dataZoomModel,i=n.get("labelFormatter"),o=n.get("labelPrecision");null!=o&&"auto"!==o||(o=t.getPixelPrecision());var a=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(o,20));return re(i)?i(e,a):c(i)?i.replace("{value}",a):a},t.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,n=t.handleLabels;n[0].attr("invisible",!e),n[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},t.prototype._onDragMove=function(e,t,n,i){this._dragging=!0,u(i.event);var o=this._displayables.sliderGroup.getLocalTransform(),a=be([t,n],o,!0),r=this._updateInterval(e,a[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),r&&s&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var t=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var i=this._handleEnds,o=(i[0]+i[1])/2,a=this._updateInterval("all",n[0]-o);this._updateView(),a&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var t=e.offsetX,n=e.offsetY;this._brushStart=new Ie(t,n),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,t){t.attr("ignore",!0);var n=t.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var i=this._getViewExtent(),o=[0,100];this._range=X([E(n.x,i,o,!0),E(n.x+n.width,i,o,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(u(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,t){var n=this._displayables,i=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new on({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var a=this._brushStart,r=this._displayables.sliderGroup,s=r.transformCoordToLocal(e,t),l=r.transformCoordToLocal(a.x,a.y),d=this._size;s[0]=Math.max(Math.min(d[0],s[0]),0),o.setShape({x:l[0],y:0,width:s[0]-l[0],height:d[1]})},t.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?ln:null,start:t[0],end:t[1]})},t.prototype._findCoordRect=function(){var e,t=ct(this.dataZoomModel).infoList;if(!e&&t.length){var n=t[0].model.coordinateSystem;e=n.getRect&&n.getRect()}if(!e){var i=this.api.getWidth(),o=this.api.getHeight();e={x:.2*i,y:.2*o,width:.6*i,height:.6*o}}return e},t.type="dataZoom.slider",t}(vt);function un(e){e.registerComponentModel(nn),e.registerComponentView(hn),wt(e)}function pn(e){ve(tn),ve(un)}export{pn as a,lt as b,Ht as i};
