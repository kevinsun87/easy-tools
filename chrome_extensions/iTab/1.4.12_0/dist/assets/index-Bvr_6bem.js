import{m as e,a as t,c as l,p as o,G as s,H as a,t as i,z as r,u as n,C as c,b5 as p,J as d,L as m,B as u,I as f,A as h,K as y,q as b,_ as k,s as x,b0 as v,o as g,w as j,b3 as w,M as C,F as _,y as V,bF as B,a_ as T,aX as z}from"./index-CyyLRP8W.js";import{ai as I,o as D,p as E,ah as U,S,H as $,E as H,aj as A,ak as M,q}from"./todo-nv2WtoEp.js";/* empty css            */import"./css-D3Kd0WPg.js";/* empty css                 */import{a as K,E as F}from"./el-select-D9newx6z.js";import"./el-scrollbar-BVpSQI8U.js";/* empty css                  */import{E as O}from"./el-image-viewer-BDwDTkkr.js";/* empty css                   *//* empty css                  */import{E as G,a as L}from"./el-checkbox-group-D4p_N5Lq.js";import{_ as N}from"./d-dialog-Dp99XzOL.js";import{w as J}from"./website-CoEF8fmW.js";import{b as P}from"./getAudio-D_HGGnT2.js";import{b as R,E as Q}from"./index-BvBbK8nS.js";import{E as X}from"./index-BPnMED6p.js";import{ElIcon as W}from"./index-D4GlTUBi.js";import{a as Z,E as Y}from"./index-D1OyjWme.js";import{b as ee,u as te}from"./index-B3sKL47p.js";import{i as le}from"./icon-Dsqoi_oS.js";import{_ as oe,w as se}from"./plugin-vue_export-helper-O3gUY6pX.js";import{u as ae}from"./index-CXKOYI6o.js";import{a as ie}from"./style-BBQwFGbP.js";import{ElMessage as re}from"./index-BU0epQJo.js";import"./use-global-config-DcVlDyFX.js";import"./index-CB1eEFAV.js";import"./_baseGet-DEcaJYAt.js";import"./isSymbol-Bt1TyP4H.js";import"./types-Ci7ev57k.js";import"./use-form-item-CUGNa-4i.js";import"./constants-Dnj8X3EN.js";import"./focus-trap-D8QWET1-.js";import"./aria-BUADUvnR.js";import"./strings-B8lWsWjR.js";import"./isEqual-DOZxeYFr.js";import"./_baseIsEqual-DN6o0BQy.js";import"./index-BrMlOSMZ.js";import"./index-BFuAB0_P.js";import"./scroll-3JEGyj3w.js";import"./event-BwRzfsZt.js";import"./debounce-Dd9nEzpy.js";import"./_baseIteratee-BaNfRxc9.js";import"./hasIn-y6DbaUwA.js";import"./index-kxe6IHwf.js";import"./index-DHV32PmZ.js";import"./castArray-LUE-lsy0.js";import"./typescript-CRqm1_SZ.js";import"./throttle-1HGvzIm8.js";import"./index-DsFsGggn.js";import"./position-C03YnYn2.js";import"./index-DjlyN6je.js";import"./el-dialog-BoL22f5R.js";import"./index-CdRnR6wp.js";import"./vnode-CwyaGvUL.js";import"./use-dialog-0gmd-idO.js";import"./isUndefined-DgmxjSXK.js";import"./index-hc1PwDik.js";/* empty css                   */import"./main-DJB5iAKQ.js";import"./modulepreload-polyfill-Dqv5PPZA.js";import"./localforage-BVRgvwJc.js";/* empty css                                                 */import"./baseRequest-CU9cTnaC.js";import"./userInfo-CZAB7rZN.js";import"./version-DYnJBHiW.js";import"./config-provider-Bf5G9WCh.js";const ne=ee({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:R,default:"primary"},cancelButtonType:{type:String,values:R,default:"text"},icon:{type:le,default:()=>I},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:Z.teleported,persistent:Z.persistent,width:{type:[String,Number],default:150}}),ce={confirm:e=>e instanceof MouseEvent,cancel:e=>e instanceof MouseEvent},pe=e({name:"ElPopconfirm"});const de=se(oe(e({...pe,props:ne,emits:ce,setup(e,{emit:b}){const k=e,{t:x}=ae(),v=te("popconfirm"),g=t(),j=()=>{var e,t;null==(t=null==(e=g.value)?void 0:e.onClose)||t.call(e)},w=l((()=>({width:ie(k.width)}))),C=e=>{b("confirm",e),j()},_=e=>{b("cancel",e),j()},V=l((()=>k.confirmButtonText||x("el.popconfirm.confirmButtonText"))),B=l((()=>k.cancelButtonText||x("el.popconfirm.cancelButtonText")));return(e,t)=>(o(),s(n(Y),y({ref_key:"tooltipRef",ref:g,trigger:"click",effect:"light"},e.$attrs,{"popper-class":`${n(v).namespace.value}-popover`,"popper-style":n(w),teleported:e.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":e.hideAfter,persistent:e.persistent}),{content:a((()=>[i("div",{class:r(n(v).b())},[i("div",{class:r(n(v).e("main"))},[!e.hideIcon&&e.icon?(o(),s(n(W),{key:0,class:r(n(v).e("icon")),style:c({color:e.iconColor})},{default:a((()=>[(o(),s(p(e.icon)))])),_:1},8,["class","style"])):d("v-if",!0),m(" "+u(e.title),1)],2),i("div",{class:r(n(v).e("action"))},[f(n(Q),{size:"small",type:"text"===e.cancelButtonType?"":e.cancelButtonType,text:"text"===e.cancelButtonType,onClick:_},{default:a((()=>[m(u(n(B)),1)])),_:1},8,["type","text"]),f(n(Q),{size:"small",type:"text"===e.confirmButtonType?"":e.confirmButtonType,text:"text"===e.confirmButtonType,onClick:C},{default:a((()=>[m(u(n(V)),1)])),_:1},8,["type","text"])],2)],2)])),default:a((()=>[e.$slots.reference?h(e.$slots,"reference",{key:0}):d("v-if",!0)])),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}}),[["__file","popconfirm.vue"]])),me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ue=[i("path",{d:"M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z",fill:"currentColor"},null,-1)],fe=e({name:"Folder",render:function(e,t){return o(),b("svg",me,ue)}}),he={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 576 512"},ye=[i("path",{d:"M572.694 292.093L500.27 416.248A63.997 63.997 0 0 1 444.989 448H45.025c-18.523 0-30.064-20.093-20.731-36.093l72.424-124.155A64 64 0 0 1 152 256h399.964c18.523 0 30.064 20.093 20.73 36.093zM152 224h328v-48c0-26.51-21.49-48-48-48H272l-64-64H48C21.49 64 0 85.49 0 112v278.046l69.077-118.418C86.214 242.25 117.989 224 152 224z",fill:"currentColor"},null,-1)],be=e({name:"FolderOpen",render:function(e,t){return o(),b("svg",he,ye)}}),ke=e=>(T("data-v-1bfae4a5"),e=e(),z(),e),xe={class:"bookmarks-content w-full h-full relative"},ve={key:0,class:"absolute top-0 left-0 bottom-0 right-0 z-30 d-flex-center backdrop-blur-md",style:{"background-color":"rgba(var(--alpha-bg), 0.5)","backdrop-filter":"blur(10px)","-webkit-backdrop-filter":"blur(10px)"}},ge={class:"ac"},je=ke((()=>i("p",{class:"f20 d-main"},"欢迎使用iTab书签管理",-1))),we={style:{"line-height":"40px"},class:"bookmarks-header bb d-row"},Ce=ke((()=>i("li",{class:"pl30 f16 ac d-col-8"},null,-1))),_e={class:"d-col-8",span:8},Ve={class:"d-col-8",span:8},Be=ke((()=>i("div",{class:"d-inline f12 ml20 mr10"},"导入到",-1))),Te={class:"f12"},ze={class:"d-layout h-full"},Ie={class:"d-layout-aside d-auto-y",style:{height:"calc(100% - 40px)",width:"180px"}},De=["onClick"],Ee={class:"d-elip flex items-end"},Ue={class:"d-icon f17 mr-1",style:{color:"#f2b64c"}},Se={style:{color:"rgba(var(--alpha-color), 0.3)"}},$e={ref:"refBody",style:{height:"calc(100% - 40px)"},class:"d-layout-content bookmarks-body"},He={key:0,class:"ac mt50"},Ae=ke((()=>i("p",{class:"mt10"},[m(" 进入官网选择适合自己浏览器的版本下载 "),i("a",{href:"https://itab.link",class:"book-item-a",target:"_blank"},"https://itab.link")],-1))),Me={class:"body-item d-flex-y leading-normal",style:{"justify-content":"space-between"}},qe={key:0,class:"d-cell d-flex"},Ke=["href"],Fe={class:"h-full d-flex-center"},Oe={class:"d-elip"},Ge={class:"bookmarks-handle",style:{"min-width":"52px"}},Le={name:"appBookmarks"},Ne=k(Object.assign(Le,{setup(e){const t=D(),c=x(!1),p=x(!1);let h=[];const y=window.origin,k=x(!1),T=v({activeIndex:0,keyword:"",selectData:[],booksData:[],booksChildren:[]});function z(){chrome&&chrome.permissions.request({permissions:["favicon"]},(e=>{e&&(k.value=!1)}))}function I(e){T.selectData=e?h:[],p.value=!1}function R(e){const t=e.length;c.value=t===h.length,p.value=t>0&&t<h.length}function W(){if(T.selectData.length){let e=T.booksChildren.filter((e=>T.selectData.includes(e.id)));if(e.length>50)return void re.warning("最多只能导入50条数据");let t={};J({url:e.map((e=>e.url)).join(","),type:2}).then((e=>{t=e.data||{}})).finally((()=>{let l=e.map((e=>{let l=t[e.url]||{},o={backgroundColor:M(),name:e.title.slice(0,16),url:e.url.slice(0,300),id:q(),type:"icon"};return l.src?(o.type="icon",o.backgroundColor=l.backgroundColor||M(),o.src=l.src):(o.type="text",o.iconText=e.title.trim().slice(0,2)),o}));Z.value.children.push(...l),re.success(`批量导入了${l.length}条数据`)}))}}g((()=>{chrome&&chrome.permissions&&chrome.permissions.contains({permissions:["favicon"]},(e=>{e||(k.value=!0)}))}));const Z=l((()=>t.value.find((e=>e.id==E.value))));let Y=[];function ee(e){e&&!P()?(T.activeIndex=-1,chrome.bookmarks.search(e,(e=>{T.booksChildren=e||[]}))):(T.activeIndex=0,T.booksChildren=T.booksData[0].children||[])}function te(e){e.edit?chrome.bookmarks.update(e.id,{title:e.title,url:e.url},(t=>{e.edit=!1})):e.edit=!0}function le(e,t){let l={...t,children:[]};e.forEach(((e,t)=>{e.url?l.children.push(e):e.children&&le(e.children,e)})),l.children.length&&Y.push(l)}return chrome&&chrome.bookmarks&&chrome.bookmarks.getTree((e=>{le(e,{}),T.booksData=Y||[],T.booksData[0]&&(T.booksChildren=T.booksData[0].children||[])})),j((()=>T.booksChildren),(e=>{e.length?(T.selectData=[],c.value=!1,p.value=!1,h=e.map((e=>e.id))):h=[]})),(e,l)=>{const h=w("el-icon");return o(),s(N,{height:"600px",destroyOnClose:!0},{default:a((()=>[i("div",xe,[k.value?(o(),b("div",ve,[i("div",ge,[je,f(n(Q),{onClick:z,class:"mt-2",type:"primary"},{default:a((()=>[m("开始使用")])),_:1})])])):d("",!0),i("ul",we,[Ce,i("li",_e,[f(n(X),{style:{width:"200px"},placeholder:"搜索",onInput:ee,size:"small",modelValue:T.keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>T.keyword=e)},null,8,["modelValue"])]),i("li",Ve,[Be,f(n(K),{modelValue:n(E),"onUpdate:modelValue":l[1]||(l[1]=e=>C(E)?E.value=e:null),style:{width:"100px"},size:"small",placeholder:"group"},{default:a((()=>[(o(!0),b(_,null,V(n(t),(e=>(o(),s(n(F),{key:e.id,label:e.name,value:e.id},{default:a((()=>[i("span",Te,u(e.name),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),i("div",ze,[i("ul",Ie,[(o(!0),b(_,null,V(T.booksData,((e,t)=>(o(),b("li",{onClick:l=>function(e,t){T.activeIndex=t,T.booksChildren=e.children||[]}(e,t),class:r([{active:T.activeIndex==t},"d-left-tabs-item d-flex-between"]),key:t,style:{padding:"10px 14px"}},[i("h2",Ee,[i("i",Ue,[T.activeIndex==t?(o(),s(n(be),{key:0})):(o(),s(n(fe),{key:1}))]),m(" "+u(e.title),1)]),i("span",Se,u(e.children.length),1)],10,De)))),128))]),i("ul",$e,[n(P)()?(o(),b("div",He,[m(" 书签管理只能在扩展模式下使用 "),Ae])):d("",!0),i("div",null,[f(n(G),{modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=e=>c.value=e),indeterminate:p.value,onChange:I},{default:a((()=>[m("全选")])),_:1},8,["modelValue","indeterminate"]),f(n(Q),{class:"fr",disabled:!T.selectData.length,size:"small",type:"primary",onClick:W},{default:a((()=>[m("批量导入")])),_:1},8,["disabled"])]),f(n(L),{modelValue:T.selectData,"onUpdate:modelValue":l[3]||(l[3]=e=>T.selectData=e),onChange:R},{default:a((()=>[(o(!0),b(_,null,V(T.booksChildren,((e,t)=>(o(),b("div",{class:"body-card","body-style":{padding:"10px"},key:e.id},[(o(),s(n(G),{key:e.id,label:e.id},{default:a((()=>[i("div",Me,[e.edit?(o(),b("p",qe,[f(n(X),{src:`chrome://favicon/size/32@2x/${e.url}`,class:"d-cell",onKeyup:B((t=>te(e)),["enter"]),size:"small",placeholder:"标题",modelValue:e.title,"onUpdate:modelValue":t=>e.title=t},null,8,["src","onKeyup","modelValue","onUpdate:modelValue"]),f(n(X),{placeholder:"url",class:"d-cell ml5",onKeyup:B((t=>te(e)),["enter"]),size:"small",modelValue:e.url,"onUpdate:modelValue":t=>e.url=t},null,8,["onKeyup","modelValue","onUpdate:modelValue"])])):(o(),b("a",{key:1,href:e.url,target:"_blank",class:"d-flex-y d-hidden"},[f(n(O),{style:{width:"16px","min-width":"16px",height:"16px"},src:`${n(y)}/_favicon/?pageUrl=${e.url}`,class:"mr10"},{error:a((()=>[i("div",Fe,[f(h,{class:"d-sub",size:16},{default:a((()=>[f(n(U))])),_:1})])])),_:2},1032,["src"]),i("span",Oe,u(e.title),1)],8,Ke)),i("p",Ge,[f(n(Q),{type:"warning",onClick:t=>function(e){let t={backgroundColor:M(),id:q(),name:e.title.slice(0,16),src:"",type:"text",url:e.url};J({url:e.url,type:1}).then((l=>{let o=l.data||{};t.backgroundColor=o.backgroundColor||M(),1==o.type?(t.type="icon",t.src=o.src):(t.type="text",t.iconText=e.name.slice(0,3)),Z.value.children.push(t),re.success(`导入【${t.name}】成功`)})).catch((()=>{t.type="text",t.iconText=t.name.slice(0,3),Z.value.children.push(t),re.success(`导入【${t.name}】成功`)}))}(e),size:"small",icon:n(S)},null,8,["onClick","icon"]),f(n(Q),{onClick:t=>te(e),size:"small",type:"primary",icon:e.edit?n($):n(H)},null,8,["onClick","icon"]),f(n(de),{onConfirm:l=>function(e,t){chrome.bookmarks.remove(e.id,(()=>{T.booksChildren.splice(t,1)}))}(e,t),title:"确认删除?"},{reference:a((()=>[f(n(Q),{size:"small",type:"danger",icon:n(A)},null,8,["icon"])])),_:2},1032,["onConfirm"])])])])),_:2},1032,["label"]))])))),128))])),_:1},8,["modelValue"])],512)])])])),_:1})}}}),[["__scopeId","data-v-1bfae4a5"]]);export{Ne as default};
