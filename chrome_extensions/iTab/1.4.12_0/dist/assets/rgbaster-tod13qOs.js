var r=function(r,t){void 0===t&&(t=1);var n=new Image;return r.startsWith("data")||(n.crossOrigin="Anonymous"),new Promise((function(e,o){n.onload=function(){var r=n.width*t,o=n.height*t,a=function(r,t){var n=document.createElement("canvas");return n.setAttribute("width",r),n.setAttribute("height",t),n.getContext("2d")}(r,o);a.drawImage(n,0,0,r,o);var i=a.getImageData(0,0,r,o).data;e(i)};var a=function(){return o(new Error("An error occurred attempting to load image"))};n.onerror=a,n.onabort=a,n.src=r}))},t={ignore:[],scale:1},n=function(n,e){void 0===e&&(e=t);try{var o=(e=Object.assign({},t,e)).ignore,a=e.scale;return Promise.resolve(r(n,a)).then((function(r){return function(r,t){for(var n={},e=0;e<r.length;e+=4){var o=r[e+3];if(0!==o){var a=Array.from(r.subarray(e,e+3));if(-1===a.indexOf(void 0)){var i=o&&255!==o?"rgba("+a.concat([o]).join(",")+")":"rgb("+a.join(",")+")";-1===t.indexOf(i)&&(n[i]?n[i].count++:n[i]={color:i,count:1})}}}return Object.values(n).sort((function(r,t){return t.count-r.count}))}(r,o)}))}catch(i){return Promise.reject(i)}};export{n as default};
