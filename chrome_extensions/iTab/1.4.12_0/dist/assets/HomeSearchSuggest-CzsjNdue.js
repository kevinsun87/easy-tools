const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./IosClose-BNm0pzJF.js","./vue.runtime.esm-bundler-Ds1RV6_Q.js","./localforage-BVRgvwJc.js","./index-CyyLRP8W.js","./index-4Dsu8OkH.css","./Close-ze6DbCMS.js","./AccessTimeRound-1-Wtn1BO.js","./TranslateRound-BLR28bQn.js","./Calculation-CPbwXQD5.js","./LinkSharp-DojrNUtI.js","./HomeSearchList-CSkk0yGc.js","./todo-nv2WtoEp.js","./todo-Dkv1bMMm.css","./baseRequest-CU9cTnaC.js","./userInfo-CZAB7rZN.js","./version-DYnJBHiW.js","./el-dialog-BoL22f5R.js","./index-CdRnR6wp.js","./index-B3sKL47p.js","./scroll-3JEGyj3w.js","./style-BBQwFGbP.js","./types-Ci7ev57k.js","./vnode-CwyaGvUL.js","./index-D4GlTUBi.js","./plugin-vue_export-helper-O3gUY6pX.js","./use-dialog-0gmd-idO.js","./icon-Dsqoi_oS.js","./event-BwRzfsZt.js","./index-CB1eEFAV.js","./_baseGet-DEcaJYAt.js","./isSymbol-Bt1TyP4H.js","./focus-trap-D8QWET1-.js","./aria-BUADUvnR.js","./use-global-config-DcVlDyFX.js","./index-CXKOYI6o.js","./isUndefined-DgmxjSXK.js","./index-hc1PwDik.js","./index-DjlyN6je.js","./el-dialog-BZbd8a1U.css","./el-checkbox-group-D4p_N5Lq.js","./index-kxe6IHwf.js","./hasIn-y6DbaUwA.js","./use-form-item-CUGNa-4i.js","./constants-Dnj8X3EN.js","./isEqual-DOZxeYFr.js","./_baseIsEqual-DN6o0BQy.js","./el-checkbox-group-CJgxsd-x.css","./css-D3Kd0WPg.js","./css-DJhm0lbD.css","./css-BIm8ja1J.css","./indexdb-D6yYQ1E4.js","./index-BPnMED6p.js","./index-BrMlOSMZ.js","./typescript-CRqm1_SZ.js","./index-DsFsGggn.js","./index-BvBbK8nS.js","./index-BU0epQJo.js","./config-provider-Bf5G9WCh.js","./index-BFuAB0_P.js","./HomeSearchList-CMd9As7E.css","./el-input-_oO4j4uY.css","./el-overlay-DBZ27Rv4.css","./el-button-D43xa9mw.css","./statistics-CfKG6dyg.js","./useSta-BMJfgb02.js","./save_config-BtHImbsT.js","./public-api-DxRCcbRs.js","./website-CoEF8fmW.js","./index-DvjFJXYU.js","./index-1ymgXUpW.css","./eventBus-BB4cUTPt.js","./debounce-Dd9nEzpy.js"])))=>i.map(i=>d[i]);
import{m as e,n as s,_ as a,F as t,i as l}from"./todo-nv2WtoEp.js";import{_ as i,s as n,bb as o,c as r,a as c,o as u,w as d,aV as p,b3 as m,p as h,q as f,t as v,z as y,u as _,I as g,H as k,bH as b,J as w,B as x,v as I,x as E,C as V,L as j,F as S,y as A,G as R,ah as L,a_ as C,aX as P}from"./index-CyyLRP8W.js";import{o as T,$ as D,b as O}from"./main-DJB5iAKQ.js";import W from"./d-button-COA-aPKt.js";import{D as $}from"./vuedraggable.umd-BrO2vZZS.js";import{b as B,c as q,a as H,i as z}from"./getAudio-D_HGGnT2.js";import{v as K,c as U}from"./calculator-C-sxAA-d.js";import{S as F}from"./Search-DmQilsee.js";import"./modulepreload-polyfill-Dqv5PPZA.js";import"./localforage-BVRgvwJc.js";import"./vue.runtime.esm-bundler-Ds1RV6_Q.js";import"./decimal-DzYMnzy_.js";const N=e=>(C("data-v-2db676dc"),e=e(),P(),e),G={class:"se-down absolute inset-x-0 z-10"},J=["onClick","title"],M=["onClick"],X=["src"],Z={class:"d-elip se-item-title"},Q={class:"se-item-icon",style:{color:"var(--primary-color)"}},Y={class:"f18 d-icon",size:18},ee=N((()=>v("p",{class:"d-elip se-item-title"},"添加",-1))),se={key:0,class:"req-baidu-per h-full p-5 text-left leading-6"},ae=N((()=>v("span",{class:"f13 d-block"},"授权开启联想搜索，搜索时将显示联想词。iTab不会获取您的任何数据，建议您授权",-1))),te={class:"d-cell d-elip"},le={class:"se-W-icon d-icon f16",style:{"vertical-align":"-3px"}},ie=N((()=>v("em",{class:"f13"},"翻译：",-1))),ne={class:"d-cell"},oe={class:"se-W-icon d-icon f16",style:{"vertical-align":"-3px"}},re=N((()=>v("em",{class:"f13"},"访问：",-1))),ce={class:"d-cell"},ue={class:"se-W-icon d-icon f16",style:{"vertical-align":"-3px"}},de=N((()=>v("em",{class:"f13"},"复制算式：",-1))),pe={class:"f12",style:{color:"rgba(var(--alpha-color), 0.3)"}},me=["onClick","data-index"],he={class:"se-W-icon d-icon f16",size:16},fe={class:"d-cell d-elip"},ve=["onClick"],ye={name:"HomeSearchSuggest"},_e=i(Object.assign(ye,{props:{currSearch:{type:Object,default:{}},keyWord:{type:String,default:""}},emits:["selectSearch","selectSug"],setup(i,{expose:C,emit:P}){const N=n("text"),ye=P,_e=i,ge=L((()=>a((()=>import("./IosClose-BNm0pzJF.js").then((e=>e.I))),__vite__mapDeps([0,1,2,3,4]),import.meta.url))),ke=L((()=>a((()=>import("./Close-ze6DbCMS.js").then((e=>e.C))),__vite__mapDeps([5,1,2,3,4]),import.meta.url))),be=L((()=>a((()=>import("./AccessTimeRound-1-Wtn1BO.js").then((e=>e.A))),__vite__mapDeps([6,1,2,3,4]),import.meta.url))),we=L((()=>a((()=>import("./TranslateRound-BLR28bQn.js").then((e=>e.T))),__vite__mapDeps([7,1,2,3,4]),import.meta.url))),xe=L((()=>a((()=>import("./Calculation-CPbwXQD5.js").then((e=>e.C))),__vite__mapDeps([8,1,2,3,4]),import.meta.url))),Ie=L((()=>a((()=>import("./LinkSharp-DojrNUtI.js").then((e=>e.L))),__vite__mapDeps([9,1,2,3,4]),import.meta.url))),Ee=e(),Ve=L((()=>a((()=>import("./HomeSearchList-CSkk0yGc.js")),__vite__mapDeps([10,11,3,4,12,13,14,2,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]),import.meta.url))),je=o({value:"",engienVisible:!1,showKeyWord:!1,keyList:[],keyIndex:-1,searchVisible:!1,isReqBaiduSgPer:!0});function Se(e){if(s.set("isAuthBaidu",e),"0"===e)return je.isReqBaiduSgPer=!1,void a((()=>import("./index-BU0epQJo.js")),__vite__mapDeps([56,3,4,52,21,18,24,20,37,23,53,26,11,12,33,34,29,30,28,32,57,58]),import.meta.url).then((e=>{e.default.warning("如果想开启搜索建议, 在空白处右键-设置-搜索栏-开启搜索建议 即可")}));chrome&&chrome.permissions.request({origins:["https://www.baidu.com/"]},(e=>{e&&(je.isReqBaiduSgPer=!1)}))}B()||"safari"==q()||"firefox"==q()||H?je.isReqBaiduSgPer=!1:((e=[])=>new Promise(((s,a)=>{chrome&&chrome.permissions.contains({origins:e},(e=>{s(!!e)}))})))(["https://www.baidu.com/"]).then((e=>{je.isReqBaiduSgPer=!e,e&&s.set("isAuthBaidu","1"),"0"===s.get("isAuthBaidu")&&(je.isReqBaiduSgPer=!1)}));const Ae=r((()=>Ee.value.search.history&&!je.value)),Re=r((()=>je.value||je.keyList.length));let Le=c(s.get("searchHistory")||[]);a((()=>import("./indexdb-D6yYQ1E4.js")),__vite__mapDeps([50,2]),import.meta.url).then((e=>{e.default.get("searchHistory").then((e=>{Le.value=e||Le.value}))}));const Ce=r((()=>je.value||je.keyList.length?je.keyList||[]:Ee.value.search.history?Le.value:[]));const Pe=r((()=>Ee.value.search.translateHide)),Te=r((()=>{let e=Ce.value.length;return!Ee.value.search.translateHide&&je.value&&e++,30*e+"px"}));function De(e){D(".se-input-box").contains(e.target)||(je.showKeyWord=!1,je.engienVisible=!1)}u((()=>{T(D("#searchInput"),"input",We),T(D("#searchInput"),"keydown",$e),T(D("#searchInput"),"click",(()=>{je.showKeyWord=!0,je.engienVisible=!1})),T(D("#selectEngine"),"click",(e=>{je.engienVisible=!je.engienVisible})),T(document,"click",De),T(document,"keydown",(e=>{e.altKey&&"Enter"==e.code&&_e.keyWord&&ze(_e.keyWord,"fanyi")}))})),d((()=>_e.keyWord),(e=>{if(K(e)&&void 0!==U(e)&&!Object.is(U(e),"NaN")){let s=U(e);N.value=`${e} = ${s}`}else(s=e).length>30||!/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/.test(s)?N.value="text":N.value="link";var s;e||We()})),p((()=>{O(D("#searchInput"),"input",We),O(D("#searchInput"),"keydown",$e),O(document,"click",De)}));let Oe=null;function We(e){if(je.value=e?e.target.value:D("#searchInput").value,!je.value)return void setTimeout((()=>{je.keyList=[]}),100);je.showKeyWord=!0,je.keyIndex=-1;let a=encodeURIComponent(je.value);if(B())!function({url:e,params:s={},callback:a}){let t="jsonp_callback_"+Date.now()+Math.random().toString().substr(2,5),l=document.createElement("script"),i=`${e}?callback=${t}`;for(let n in s)i+=`&${n}=${s[n]}`;l.src=i,document.body.appendChild(l),window.baidu={sug:e=>{a(e),delete window[t],document.body.removeChild(l)}}}({url:`https://suggestion.baidu.com/su?wd=${a}&ie=utf-8&p=3`,params:{},callback(e){let s=e.s;s&&(je.keyList=s)}});else{Oe&&(Oe.abort(),Oe=null);const e=new AbortController,{signal:t}=e;if(Oe=e,"safari"==q()||"firefox"==q()||H)return void fetch(`https://api.codelife.cc/api/baidu_sugrec/${a}`,{signal:t}).then((e=>e.json())).then((e=>{let s=e.data;s&&(je.keyList=(s.g||[]).map((e=>e.q)),Oe=null)}));let l=s.get("isAuthBaidu");if(!l||"0"===l)return;if(je.isReqBaiduSgPer)return;fetch(`https://www.baidu.com/sugrec?&prod=pc&wd=${a}`,{signal:t}).then((e=>e.json())).then((e=>{let s=e.g||[];s=s.map((e=>e.q)),je.keyList=s,Oe=null}))}}function $e(e){let s=e.code;["ArrowDown","ArrowUp"].includes(s)?Be(e):"Tab"===s&&function(e){e.preventDefault();let s=Ee.value.useSearch||"baidu",a=Ee.value.searchEngine.findIndex((e=>e.key==s)),t=(Ee.value.searchEngine||[]).length;a+=1,a>=t&&(a=0);let l=Ee.value.searchEngine[a];Ee.value.useSearch=l.key,ye("selectSearch",l)}(e)}function Be(e){let s=e.code,a=Ee.value.search.translateHide?1:0;"ArrowDown"===s?(Ee.value.search.translateHide&&-1==je.keyIndex&&(je.keyIndex=0),je.keyIndex++,je.keyIndex>=11&&(je.keyIndex=a)):"ArrowUp"===s&&(e.preventDefault(),je.keyIndex--,je.keyIndex<a&&(je.keyIndex=10)),je.keyIndex>0&&ye("selectSug",Ce.value[je.keyIndex-1])}function qe(){je.searchVisible=!0}let He=[];function ze(e,l,i,n){i&&i.preventDefault(),async function(e){if(e){Le.value.unshift(e),Le.value=[...new Set(Le.value)],Le.value=Le.value.slice(0,10);let s=await a((()=>import("./indexdb-D6yYQ1E4.js")),__vite__mapDeps([50,2]),import.meta.url);s=s.default,s.set("searchHistory",Le._rawValue)}}(e),e=encodeURIComponent(e);let o="",r=_e.currSearch.key;if(0==je.keyIndex||"fanyi"==l){if("link"===N.value){let e=je.value;return e.includes("http")||(e=`https://${e}`),void setTimeout((()=>{window.open(e,"_blank")}),0)}if("text"!=N.value&&"link"!=N.value)return t(N.value),void a((()=>import("./index-BU0epQJo.js")),__vite__mapDeps([56,3,4,52,21,18,24,20,37,23,53,26,11,12,33,34,29,30,28,32,57,58]),import.meta.url).then((e=>{e.default.success("已复制到剪切板")}));let l=Ee.value.search.translate||s.get("app-fanyi")||"https://translate.volcengine.com/translate?text=%s";o=l.includes("%s")?l.replace("%s",e):`${l}${e}`,r=`翻译-${l}`}else{let s=_e.currSearch.href;o=s.includes("%s")?s.replace("%s",e):`${s}${e}`}a((()=>import("./statistics-CfKG6dyg.js")),__vite__mapDeps([63,11,3,4,12,64,13,14,2,15,50]),import.meta.url).then((e=>{e.googleAnalytics({type:"搜索栏",en:r})})),je.showKeyWord=!1;let c=Ee.value.open&&Ee.value.open.searchBlank?"_blank":"_self";document.body.clientWidth<570&&o.includes("www.baidu.com")&&(o=o.replace("www","m"),window.location.protocol.includes("http")&&(o=` https://m.baidu.com/s?word=${e}&from=1027661t`)),setTimeout((()=>{window.open(o,c)}),0),setTimeout((()=>{ye("selectSug",""),je.keyList=[],je.value=""}),500)}return d((()=>je.searchVisible),(e=>{if(e)He=Ee.value.searchEngine.map((e=>e.key));else{if(!Ee.value.searchEngine.filter((e=>!He.includes(e.key))).map((e=>e.key)).join("&"))return}})),C({searchHandle:ze}),(e,s)=>{const t=m("plus");return h(),f(S,null,[v("div",G,[v("ul",{class:y(["se-all h-0 overflow-hidden w-full z-0 origin-top flex",{action:_(je).engienVisible}])},[g(_($),{animation:200,list:_(Ee).searchEngine,itemKey:"f12"},{item:k((({element:e,index:s})=>[(h(),f("li",{onClick:b((s=>{return ye("selectSearch",t=e),je.engienVisible=!1,Ee.value.useSearch=t.key,void a((()=>import("./save_config-BtHImbsT.js")),__vite__mapDeps([65,66,11,3,4,12,2,13,14,15,67,68,23,18,24,21,20,69,49,50,70,71,30]),import.meta.url).then((e=>{e.SAVE_CONFIG("baseConfig")}));var t}),["stop"]),class:"se-item",key:e.key,title:e.title},[0!==s?(h(),f("i",{key:0,title:"删除",onClick:b((e=>function(e){Ee.value.searchEngine.splice(e,1),a((()=>import("./save_config-BtHImbsT.js")),__vite__mapDeps([65,66,11,3,4,12,2,13,14,15,67,68,23,18,24,21,20,69,49,50,70,71,30]),import.meta.url).then((e=>{e.SAVE_CONFIG("baseConfig")}))}(s)),["stop"]),class:"f12 d-icon se-item-del"},[g(_(ke))],8,M)):w("",!0),v("span",{class:y(["se-item-icon",{action:e.key==i.currSearch.key}])},[_(je).engienVisible?(h(),f("img",{key:0,loading:"lazy",class:"search-icon",src:`https://files.codelife.cc/itab/search/${e.key}.svg`},null,8,X)):w("",!0)],2),v("p",Z,x(e.title),1)],8,J))])),_:1},8,["list"]),v("li",{key:"add",onClick:b(qe,["stop"]),class:"se-item",title:"添加"},[v("span",Q,[v("i",Y,[g(t)])]),ee])],2),I(v("ul",{class:y(["se-W text-left h-0 overflow-hidden animation",[{isReqBaidu:_(je).isReqBaiduSgPer},{mobile:_(z)}]]),style:V({height:Te.value})},[_(je).isReqBaiduSgPer?(h(),f("div",se,[j(" 开启联想词搜索建议 "),ae,v("p",null,[g(W,{size:"small",onClick:s[0]||(s[0]=e=>Se("0"))},{default:k((()=>[j("取消")])),_:1}),g(W,{size:"small",class:"ml-1",type:"primary",onClick:s[1]||(s[1]=e=>Se("1"))},{default:k((()=>[j("授权")])),_:1})])])):w("",!0),Pe.value?w("",!0):(h(),f("li",{key:1,onClick:s[2]||(s[2]=b((e=>ze(_(je).value||Ce.value[0],"fanyi")),["stop"])),class:y(["se-W-item item-fanyi d-flex-y",{focus:0===_(je).keyIndex}]),onKeydown:Be},[I(v("span",te,[v("i",le,[g(_(we))]),v("span",null,[ie,j(x(_(je).value||Ce.value[0]),1)])],512),[[E,"text"===N.value]]),I(v("span",ne,[v("i",oe,[g(_(Ie))]),v("span",null,[re,j(" "+x(_(je).value),1)])],512),[[E,"link"===N.value]]),I(v("span",ce,[v("i",ue,[g(_(xe))]),v("span",null,[de,j(" "+x(N.value),1)])],512),[[E,"text"!==N.value&&"link"!==N.value]]),v("span",pe,x(_(l)()?"⌥":"Alt")+" +Enter",1)],34)),(h(!0),f(S,null,A(Ce.value,((e,s)=>(h(),f("li",{onClick:b((s=>ze(e,null,null)),["stop"]),class:y(["se-W-item d-flex-y",{focus:_(je).keyIndex==s+1}]),key:e,"data-index":s+1},[v("i",he,[Re.value?(h(),R(_(F),{key:0})):(h(),R(_(be),{key:1}))]),v("span",fe,x(e),1),Ae.value?(h(),f("i",{key:0,onClick:b((e=>async function(e){Le.value.splice(e,1),Le.value=Le.value;let s=await a((()=>import("./indexdb-D6yYQ1E4.js")),__vite__mapDeps([50,2]),import.meta.url);s=s.default,s.set("searchHistory",Le._rawValue)}(s)),["stop"]),class:"se-history-del d-icon f22"},[g(_(ge))],8,ve)):w("",!0)],10,me)))),128))],6),[[E,_(je).showKeyWord]])]),_(je).searchVisible?(h(),R(_(Ve),{key:0,modelValue:_(je).searchVisible,"onUpdate:modelValue":s[3]||(s[3]=e=>_(je).searchVisible=e)},null,8,["modelValue"])):w("",!0)],64)}}}),[["__scopeId","data-v-2db676dc"]]);export{_e as default};
